<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.myoa.dao.book.BookManageMapper" >
  <resultMap id="BaseResultMap" type="com.myoa.model.book.BookManage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="BORROW_ID" property="borrowId" jdbcType="INTEGER" />
    <result column="BUSER_ID" property="buserId" jdbcType="VARCHAR" />
    <result column="BOOK_NO" property="bookNo" jdbcType="VARCHAR" />
    <result column="BORROW_DATE" property="borrowDate" jdbcType="DATE" />
    <result column="RUSER_ID" property="ruserId" jdbcType="VARCHAR" />
    <result column="RETURN_DATE" property="returnDate" jdbcType="DATE" />
    <result column="BOOK_STATUS" property="bookStatus" jdbcType="VARCHAR" />
    <result column="REAL_RETURN_TIME" property="realReturnTime" jdbcType="DATE" />
    <result column="DELETE_FLAG" property="deleteFlag" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
    <result column="REG_FLAG" property="regFlag" jdbcType="CHAR" />
    <result column="RENEW_FLAG" property="renewFlag" jdbcType="CHAR" />
    <result column="WHO_CONFIRM" property="whoConfirm" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.myoa.model.book.BookManage" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="BORROW_REMARK" property="borrowRemark" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    BORROW_ID, BUSER_ID, BOOK_NO, BORROW_DATE, RUSER_ID, RETURN_DATE, BOOK_STATUS, REAL_RETURN_TIME, 
    DELETE_FLAG, STATUS, REG_FLAG, RENEW_FLAG, WHO_CONFIRM
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    BORROW_REMARK
  </sql>
  <select id="selectByExampleWithBLOBs" resultMap="ResultMapWithBLOBs" parameterType="com.myoa.model.book.BookManageExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from book_manage
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.myoa.model.book.BookManageExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from book_manage
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from book_manage
    where BORROW_ID = #{borrowId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from book_manage
    where BORROW_ID = #{borrowId,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="com.myoa.model.book.BookManageExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from book_manage
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.myoa.model.book.BookManage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into book_manage (BORROW_ID, BUSER_ID, BOOK_NO, 
      BORROW_DATE, RUSER_ID, RETURN_DATE, 
      BOOK_STATUS, REAL_RETURN_TIME, DELETE_FLAG, 
      STATUS, REG_FLAG, RENEW_FLAG, 
      WHO_CONFIRM, BORROW_REMARK)
    values (#{borrowId,jdbcType=INTEGER}, #{buserId,jdbcType=VARCHAR}, #{bookNo,jdbcType=VARCHAR}, 
      #{borrowDate,jdbcType=DATE}, #{ruserId,jdbcType=VARCHAR}, #{returnDate,jdbcType=DATE}, 
      #{bookStatus,jdbcType=VARCHAR}, #{realReturnTime,jdbcType=DATE}, #{deleteFlag,jdbcType=VARCHAR}, 
      #{status,jdbcType=VARCHAR}, #{regFlag,jdbcType=CHAR}, #{renewFlag,jdbcType=CHAR}, 
      #{whoConfirm,jdbcType=VARCHAR}, #{borrowRemark,jdbcType=LONGVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.myoa.model.book.BookManage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into book_manage
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="borrowId != null" >
        BORROW_ID,
      </if>
      <if test="buserId != null" >
        BUSER_ID,
      </if>
      <if test="bookNo != null" >
        BOOK_NO,
      </if>
      <if test="borrowDate != null" >
        BORROW_DATE,
      </if>
      <if test="ruserId != null" >
        RUSER_ID,
      </if>
      <if test="returnDate != null" >
        RETURN_DATE,
      </if>
      <if test="bookStatus != null" >
        BOOK_STATUS,
      </if>
      <if test="realReturnTime != null" >
        REAL_RETURN_TIME,
      </if>
      <if test="deleteFlag != null" >
        DELETE_FLAG,
      </if>
      <if test="status != null" >
        STATUS,
      </if>
      <if test="regFlag != null" >
        REG_FLAG,
      </if>
      <if test="renewFlag != null" >
        RENEW_FLAG,
      </if>
      <if test="whoConfirm != null" >
        WHO_CONFIRM,
      </if>
      <if test="borrowRemark != null" >
        BORROW_REMARK,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="borrowId != null" >
        #{borrowId,jdbcType=INTEGER},
      </if>
      <if test="buserId != null" >
        #{buserId,jdbcType=VARCHAR},
      </if>
      <if test="bookNo != null" >
        #{bookNo,jdbcType=VARCHAR},
      </if>
      <if test="borrowDate != null" >
        #{borrowDate,jdbcType=DATE},
      </if>
      <if test="ruserId != null" >
        #{ruserId,jdbcType=VARCHAR},
      </if>
      <if test="returnDate != null" >
        #{returnDate,jdbcType=DATE},
      </if>
      <if test="bookStatus != null" >
        #{bookStatus,jdbcType=VARCHAR},
      </if>
      <if test="realReturnTime != null" >
        #{realReturnTime,jdbcType=DATE},
      </if>
      <if test="deleteFlag != null" >
        #{deleteFlag,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="regFlag != null" >
        #{regFlag,jdbcType=CHAR},
      </if>
      <if test="renewFlag != null" >
        #{renewFlag,jdbcType=CHAR},
      </if>
      <if test="whoConfirm != null" >
        #{whoConfirm,jdbcType=VARCHAR},
      </if>
      <if test="borrowRemark != null" >
        #{borrowRemark,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.myoa.model.book.BookManageExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from book_manage
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update book_manage
    <set >
      <if test="record.borrowId != null" >
        BORROW_ID = #{record.borrowId,jdbcType=INTEGER},
      </if>
      <if test="record.buserId != null" >
        BUSER_ID = #{record.buserId,jdbcType=VARCHAR},
      </if>
      <if test="record.bookNo != null" >
        BOOK_NO = #{record.bookNo,jdbcType=VARCHAR},
      </if>
      <if test="record.borrowDate != null" >
        BORROW_DATE = #{record.borrowDate,jdbcType=DATE},
      </if>
      <if test="record.ruserId != null" >
        RUSER_ID = #{record.ruserId,jdbcType=VARCHAR},
      </if>
      <if test="record.returnDate != null" >
        RETURN_DATE = #{record.returnDate,jdbcType=DATE},
      </if>
      <if test="record.bookStatus != null" >
        BOOK_STATUS = #{record.bookStatus,jdbcType=VARCHAR},
      </if>
      <if test="record.realReturnTime != null" >
        REAL_RETURN_TIME = #{record.realReturnTime,jdbcType=DATE},
      </if>
      <if test="record.deleteFlag != null" >
        DELETE_FLAG = #{record.deleteFlag,jdbcType=VARCHAR},
      </if>
      <if test="record.status != null" >
        STATUS = #{record.status,jdbcType=VARCHAR},
      </if>
      <if test="record.regFlag != null" >
        REG_FLAG = #{record.regFlag,jdbcType=CHAR},
      </if>
      <if test="record.renewFlag != null" >
        RENEW_FLAG = #{record.renewFlag,jdbcType=CHAR},
      </if>
      <if test="record.whoConfirm != null" >
        WHO_CONFIRM = #{record.whoConfirm,jdbcType=VARCHAR},
      </if>
      <if test="record.borrowRemark != null" >
        BORROW_REMARK = #{record.borrowRemark,jdbcType=LONGVARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExampleWithBLOBs" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update book_manage
    set BORROW_ID = #{record.borrowId,jdbcType=INTEGER},
      BUSER_ID = #{record.buserId,jdbcType=VARCHAR},
      BOOK_NO = #{record.bookNo,jdbcType=VARCHAR},
      BORROW_DATE = #{record.borrowDate,jdbcType=DATE},
      RUSER_ID = #{record.ruserId,jdbcType=VARCHAR},
      RETURN_DATE = #{record.returnDate,jdbcType=DATE},
      BOOK_STATUS = #{record.bookStatus,jdbcType=VARCHAR},
      REAL_RETURN_TIME = #{record.realReturnTime,jdbcType=DATE},
      DELETE_FLAG = #{record.deleteFlag,jdbcType=VARCHAR},
      STATUS = #{record.status,jdbcType=VARCHAR},
      REG_FLAG = #{record.regFlag,jdbcType=CHAR},
      RENEW_FLAG = #{record.renewFlag,jdbcType=CHAR},
      WHO_CONFIRM = #{record.whoConfirm,jdbcType=VARCHAR},
      BORROW_REMARK = #{record.borrowRemark,jdbcType=LONGVARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update book_manage
    set BORROW_ID = #{record.borrowId,jdbcType=INTEGER},
      BUSER_ID = #{record.buserId,jdbcType=VARCHAR},
      BOOK_NO = #{record.bookNo,jdbcType=VARCHAR},
      BORROW_DATE = #{record.borrowDate,jdbcType=DATE},
      RUSER_ID = #{record.ruserId,jdbcType=VARCHAR},
      RETURN_DATE = #{record.returnDate,jdbcType=DATE},
      BOOK_STATUS = #{record.bookStatus,jdbcType=VARCHAR},
      REAL_RETURN_TIME = #{record.realReturnTime,jdbcType=DATE},
      DELETE_FLAG = #{record.deleteFlag,jdbcType=VARCHAR},
      STATUS = #{record.status,jdbcType=VARCHAR},
      REG_FLAG = #{record.regFlag,jdbcType=CHAR},
      RENEW_FLAG = #{record.renewFlag,jdbcType=CHAR},
      WHO_CONFIRM = #{record.whoConfirm,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.myoa.model.book.BookManage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update book_manage
    <set >
      <if test="buserId != null" >
        BUSER_ID = #{buserId,jdbcType=VARCHAR},
      </if>
      <if test="bookNo != null" >
        BOOK_NO = #{bookNo,jdbcType=VARCHAR},
      </if>
      <if test="borrowDate != null" >
        BORROW_DATE = #{borrowDate,jdbcType=DATE},
      </if>
      <if test="ruserId != null" >
        RUSER_ID = #{ruserId,jdbcType=VARCHAR},
      </if>
      <if test="returnDate != null" >
        RETURN_DATE = #{returnDate,jdbcType=DATE},
      </if>
      <if test="bookStatus != null" >
        BOOK_STATUS = #{bookStatus,jdbcType=VARCHAR},
      </if>
      <if test="realReturnTime != null" >
        REAL_RETURN_TIME = #{realReturnTime,jdbcType=DATE},
      </if>
      <if test="deleteFlag != null" >
        DELETE_FLAG = #{deleteFlag,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        STATUS = #{status,jdbcType=VARCHAR},
      </if>
      <if test="regFlag != null" >
        REG_FLAG = #{regFlag,jdbcType=CHAR},
      </if>
      <if test="renewFlag != null" >
        RENEW_FLAG = #{renewFlag,jdbcType=CHAR},
      </if>
      <if test="whoConfirm != null" >
        WHO_CONFIRM = #{whoConfirm,jdbcType=VARCHAR},
      </if>
      <if test="borrowRemark != null" >
        BORROW_REMARK = #{borrowRemark,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where BORROW_ID = #{borrowId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.myoa.model.book.BookManage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update book_manage
    set BUSER_ID = #{buserId,jdbcType=VARCHAR},
      BOOK_NO = #{bookNo,jdbcType=VARCHAR},
      BORROW_DATE = #{borrowDate,jdbcType=DATE},
      RUSER_ID = #{ruserId,jdbcType=VARCHAR},
      RETURN_DATE = #{returnDate,jdbcType=DATE},
      BOOK_STATUS = #{bookStatus,jdbcType=VARCHAR},
      REAL_RETURN_TIME = #{realReturnTime,jdbcType=DATE},
      DELETE_FLAG = #{deleteFlag,jdbcType=VARCHAR},
      STATUS = #{status,jdbcType=VARCHAR},
      REG_FLAG = #{regFlag,jdbcType=CHAR},
      RENEW_FLAG = #{renewFlag,jdbcType=CHAR},
      WHO_CONFIRM = #{whoConfirm,jdbcType=VARCHAR},
      BORROW_REMARK = #{borrowRemark,jdbcType=LONGVARCHAR}
    where BORROW_ID = #{borrowId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.myoa.model.book.BookManage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update book_manage
    set BUSER_ID = #{buserId,jdbcType=VARCHAR},
      BOOK_NO = #{bookNo,jdbcType=VARCHAR},
      BORROW_DATE = #{borrowDate,jdbcType=DATE},
      RUSER_ID = #{ruserId,jdbcType=VARCHAR},
      RETURN_DATE = #{returnDate,jdbcType=DATE},
      BOOK_STATUS = #{bookStatus,jdbcType=VARCHAR},
      REAL_RETURN_TIME = #{realReturnTime,jdbcType=DATE},
      DELETE_FLAG = #{deleteFlag,jdbcType=VARCHAR},
      STATUS = #{status,jdbcType=VARCHAR},
      REG_FLAG = #{regFlag,jdbcType=CHAR},
      RENEW_FLAG = #{renewFlag,jdbcType=CHAR},
      WHO_CONFIRM = #{whoConfirm,jdbcType=VARCHAR}
    where BORROW_ID = #{borrowId,jdbcType=INTEGER}
  </update>







  <insert id="insertManage" parameterType="com.myoa.model.book.BookManage" >
    insert into book_manage
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="borrowId != null" >
        BORROW_ID,
      </if>
      <if test="buserId != null" >
        BUSER_ID,
      </if>
      <if test="bookNo != null" >
        BOOK_NO,
      </if>
      <if test="borrowDate != null" >
        BORROW_DATE,
      </if>
      <if test="ruserId != null" >
        RUSER_ID,
      </if>
      <if test="returnDate != null" >
        RETURN_DATE,
      </if>
      <if test="bookStatus != null" >
        BOOK_STATUS,
      </if>
      <if test="realReturnTime != null" >
        REAL_RETURN_TIME,
      </if>
      <if test="deleteFlag != null" >
        DELETE_FLAG,
      </if>
      <if test="status != null" >
        STATUS,
      </if>
      <if test="regFlag != null" >
        REG_FLAG,
      </if>
      <if test="renewFlag != null" >
        RENEW_FLAG,
      </if>
      <if test="whoConfirm != null" >
        WHO_CONFIRM,
      </if>
      <if test="borrowRemark != null" >
        BORROW_REMARK,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="borrowId != null" >
        #{borrowId,jdbcType=INTEGER},
      </if>
      <if test="buserId != null" >
        #{buserId,jdbcType=VARCHAR},
      </if>
      <if test="bookNo != null" >
        #{bookNo,jdbcType=VARCHAR},
      </if>
      <if test="borrowDate != null" >
        #{borrowDate,jdbcType=DATE},
      </if>
      <if test="ruserId != null" >
        #{ruserId,jdbcType=VARCHAR},
      </if>
      <if test="returnDate != null" >
        #{returnDate,jdbcType=DATE},
      </if>
      <if test="bookStatus != null" >
        #{bookStatus,jdbcType=VARCHAR},
      </if>
      <if test="realReturnTime != null" >
        #{realReturnTime,jdbcType=DATE},
      </if>
      <if test="deleteFlag != null" >
        #{deleteFlag,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="regFlag != null" >
        #{regFlag,jdbcType=CHAR},
      </if>
      <if test="renewFlag != null" >
        #{renewFlag,jdbcType=CHAR},
      </if>
      <if test="whoConfirm != null" >
        #{whoConfirm,jdbcType=VARCHAR},
      </if>
      <if test="borrowRemark != null" >
        #{borrowRemark,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>

  <update id="upManageById" parameterType="com.myoa.model.book.BookManage" >
    update book_manage
    <set >
      <if test="buserId != null" >
        BUSER_ID = #{buserId,jdbcType=VARCHAR},
      </if>
      <if test="bookNo != null" >
        BOOK_NO = #{bookNo,jdbcType=VARCHAR},
      </if>
      <if test="borrowDate != null" >
        BORROW_DATE = #{borrowDate,jdbcType=DATE},
      </if>
      <if test="ruserId != null" >
        RUSER_ID = #{ruserId,jdbcType=VARCHAR},
      </if>
      <if test="returnDate != null" >
        RETURN_DATE = #{returnDate,jdbcType=DATE},
      </if>
      <if test="bookStatus != null" >
        BOOK_STATUS = #{bookStatus,jdbcType=VARCHAR},
      </if>
      <if test="realReturnTime != null" >
        REAL_RETURN_TIME = #{realReturnTime,jdbcType=DATE},
      </if>
      <if test="deleteFlag != null" >
        DELETE_FLAG = #{deleteFlag,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        STATUS = #{status,jdbcType=VARCHAR},
      </if>
      <if test="regFlag != null" >
        REG_FLAG = #{regFlag,jdbcType=CHAR},
      </if>
      <if test="renewFlag != null" >
        RENEW_FLAG = #{renewFlag,jdbcType=CHAR},
      </if>
      <if test="whoConfirm != null" >
        WHO_CONFIRM = #{whoConfirm,jdbcType=VARCHAR},
      </if>
      <if test="borrowRemark != null" >
        BORROW_REMARK = #{borrowRemark,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where BORROW_ID = #{borrowId,jdbcType=INTEGER}
  </update>

  <delete id="delManageById" parameterType="java.lang.Integer" >
    delete from book_manage
    where BORROW_ID = #{borrowId,jdbcType=INTEGER}
  </delete>

  <select id="selManageById" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Integer" >
    select *
    from book_manage
    where BORROW_ID = #{borrowId,jdbcType=INTEGER}
  </select>

    <select id="selManageByBookStatus" resultMap="ResultMapWithBLOBs" parameterType="com.myoa.model.book.BookManage" >
        select manage.*,info.BOOK_NAME as bookName,user.USER_NAME as buserName
        from book_manage manage
        JOIN  book_info info ON manage.BOOK_NO=info.BOOK_NO
        JOIN  user ON manage.BUSER_ID=user.USER_ID
        <where>
            <if test="bookStatus==2">
                and
              (BOOK_STATUS = #{bookStatus} or STATUS = #{bookStatus})
            </if>
            <if test="bookStatus!=2">
                and BOOK_STATUS = #{bookStatus}
            </if>
            and BUSER_ID=#{buserId}
            and DELETE_FLAG='0'
        </where>
    </select>


    <select id="selByRegFlag" resultMap="ResultMapWithBLOBs">
    select manage.*,info.BOOK_NAME as bookName,info.DEPT as dept,u1.USER_NAME as buserName,u2.USER_NAME as ruserName
     from book_manage manage
    JOIN  book_info info ON manage.BOOK_NO=info.BOOK_NO
     left JOIN  user u1 ON manage.BUSER_ID=u1.USER_ID
    left JOIN  user u2 ON manage.BUSER_ID=u2.USER_ID
    where
    manage.REG_FLAG='1' and manage.BOOK_STATUS='1'and manage.STATUS='0' and manage.DELETE_FLAG='0'
  </select>

  <select id="selByRegFlagAndBookStatus" resultMap="ResultMapWithBLOBs">
    select manage.*,info.BOOK_NAME as bookName,info.DEPT as dept,u1.USER_NAME as buserName,u2.USER_NAME as ruserName
    from book_manage manage
    JOIN  book_info info ON manage.BOOK_NO=info.BOOK_NO
    left JOIN  user u1 ON manage.BUSER_ID=u1.USER_ID
    left JOIN  user u2 ON manage.BUSER_ID=u2.USER_ID
    where
    manage.REG_FLAG='0' and manage.BOOK_STATUS='0'and manage.STATUS='1' and manage.DELETE_FLAG="0"
  </select>


    <select id="selByStatusQuire" resultMap="ResultMapWithBLOBs">
        select manage.*,info.BOOK_NAME as bookName,info.DEPT as dept,u1.USER_NAME as buserName,u2.USER_NAME as ruserName
        from book_manage manage
        JOIN  book_info info ON manage.BOOK_NO=info.BOOK_NO
        left JOIN  user u1 ON manage.BUSER_ID=u1.USER_ID
        left JOIN  user u2 ON manage.BUSER_ID=u2.USER_ID
        where
        manage.STATUS='0' and manage.DELETE_FLAG='0' and manage.BOOK_STATUS='0'
    </select>

    <select id="selByStatusManage" resultMap="ResultMapWithBLOBs">
        select manage.*,info.BOOK_NAME as bookName,info.DEPT as dept,u1.USER_NAME as buserName,u2.USER_NAME as ruserName
        from book_manage manage
        JOIN  book_info info ON manage.BOOK_NO=info.BOOK_NO
        left JOIN  user u1 ON manage.BUSER_ID=u1.USER_ID
        left JOIN  user u2 ON manage.BUSER_ID=u2.USER_ID
        where
      ((manage.BOOK_STATUS='1'and manage.STATUS='1') OR (manage.BOOK_STATUS='0'and manage.STATUS='0') OR (manage.BOOK_STATUS='1'and manage.STATUS='0'))
        and manage.DELETE_FLAG='0'
        <if test="buserId!=null and buserId!=''">
            and manage.BUSER_ID=#{buserId}
        </if>
        <if test="bookNo!=null and bookNo!=''">
            and info.BOOK_NO=#{bookNo}
        </if>
        <if test="borrowBeginDate!=null and borrowBeginDate!=''">
            and  #{borrowBeginDate} &lt;= manage.BORROW_DATE
        </if>
        <if test="borrowEndDate!=null and borrowEndDate!=''">
            and manage.BORROW_DATE &lt;= #{borrowEndDate}
        </if>
        <if test="status!=null and status!=''">
            and manage.STATUS=#{status}
        </if>
    </select>

    <select id="selDelFlag" resultMap="ResultMapWithBLOBs">
        select manage.*,info.BOOK_NAME as bookName,info.DEPT as dept,u1.USER_NAME as buserName,u2.USER_NAME as ruserName
        from book_manage manage
        JOIN  book_info info ON manage.BOOK_NO=info.BOOK_NO
        left JOIN  user u1 ON manage.BUSER_ID=u1.USER_ID
        left JOIN  user u2 ON manage.BUSER_ID=u2.USER_ID
        where
       manage.DELETE_FLAG='1'
        <if test="buserId!=null and buserId!=''">
            and manage.BUSER_ID=#{buserId}
        </if>
        <if test="bookNo!=null and bookNo!=''">
            and info.BOOK_NO=#{bookNo}
        </if>
        <if test="borrowBeginDate!=null and borrowBeginDate!=''">
            and  #{borrowBeginDate} &lt;= manage.BORROW_DATE
        </if>
        <if test="borrowEndDate!=null and borrowEndDate!=''">
            and manage.BORROW_DATE &lt;= #{borrowEndDate}
        </if>
        <if test="status!=null and status!=''">
            and manage.STATUS=#{status}
        </if>
        <if test="borrowRemark!=null and borrowRemark!=''">
            and manage.BORROW_REMARK=#{borrowRemark}
        </if>
    </select>

    <select id="selCountManageByBookNo" resultType="java.lang.Integer" parameterType="java.lang.String">
      select count(*)
      from book_manage
      where BOOK_NO = #{bookNo}
      AND
      (BOOK_STATUS='0' or STATUS='0' or STATUS='2')
      and DELETE_FLAG='0'
    </select>

</mapper>
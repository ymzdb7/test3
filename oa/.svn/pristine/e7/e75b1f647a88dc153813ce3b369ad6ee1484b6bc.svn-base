<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xoa.dao.portalColumn.PortalColumnMapper" >
  <resultMap id="BaseResultMap" type="com.xoa.model.portalColumn.PortalColumn" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="COLUMN_ID" property="columnId" jdbcType="INTEGER" />
    <result column="PORTAL_ID" property="portalId" jdbcType="INTEGER" />
    <result column="SORT_NO" property="sortNo" jdbcType="VARCHAR" />
    <result column="COLUMN_MARK" property="columnMark" jdbcType="VARCHAR" />
    <result column="PAGE_SIZE" property="pageSize" jdbcType="INTEGER" />
    <result column="PARENT_COLUMN_ID" property="parentColumnId" jdbcType="INTEGER" />
    <result column="PATH" property="path" jdbcType="VARCHAR"/>
    <result column="LIST_TEMPLATE" property="listTemplate" jdbcType="INTEGER" />
    <result column="DETAIL_TEMPLATE" property="detailTemplate" jdbcType="INTEGER" />
    <result column="AUDIT_YN" property="auditYn" jdbcType="CHAR" />
    <result column="AUDIT_USER" property="auditUser" jdbcType="VARCHAR" />
    <result column="APPENDIX" property="appendix" jdbcType="VARCHAR" />
    <result column="TEMPLATE_NAME" property="templateName" jdbcType="VARCHAR" />

  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.xoa.model.portalColumn.PortalColumn" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="COLUMN_NAME" property="columnName" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    COLUMN_ID, PORTAL_ID, SORT_NO, COLUMN_MARK, PAGE_SIZE, PARENT_COLUMN_ID, PATH, LIST_TEMPLATE, 
    DETAIL_TEMPLATE, AUDIT_YN, AUDIT_USER, APPENDIX, TEMPLATE_NAME
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    COLUMN_NAME
  </sql>
  <select id="selectByExampleWithBLOBs" resultMap="ResultMapWithBLOBs" parameterType="com.xoa.model.portalColumn.PortalColumnExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from portal_column
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.xoa.model.portalColumn.PortalColumnExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from portal_column
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    c.COLUMN_ID,c.PORTAL_ID,c.SORT_NO,c.COLUMN_MARK,c.PAGE_SIZE,c.PARENT_COLUMN_ID,c.PATH,c.LIST_TEMPLATE,c.DETAIL_TEMPLATE,c.AUDIT_YN,c.AUDIT_USER,c.APPENDIX,c.COLUMN_NAME,t.TEMPLATE_NAME
    from portal_column c ,portal_template t
    where c.COLUMN_ID = #{columnId,jdbcType=INTEGER} and t.TEMPLATE_ID=c.LIST_TEMPLATE
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from portal_column
    where COLUMN_ID = #{columnId,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="com.xoa.model.portalColumn.PortalColumnExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from portal_column
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.xoa.model.portalColumn.PortalColumn" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into portal_column (COLUMN_ID, PORTAL_ID, SORT_NO, 
      COLUMN_MARK, PAGE_SIZE, PARENT_COLUMN_ID, 
      PATH, LIST_TEMPLATE, DETAIL_TEMPLATE, 
      AUDIT_YN, AUDIT_USER, APPENDIX, 
      COLUMN_NAME)
    values (#{columnId,jdbcType=INTEGER}, #{portalId,jdbcType=INTEGER}, #{sortNo,jdbcType=VARCHAR}, 
      #{columnMark,jdbcType=VARCHAR}, #{pageSize,jdbcType=INTEGER}, #{parentColumnId,jdbcType=INTEGER}, 
      #{path,jdbcType=INTEGER}, #{listTemplate,jdbcType=INTEGER}, #{detailTemplate,jdbcType=INTEGER}, 
      #{auditYn,jdbcType=CHAR}, #{auditUser,jdbcType=VARCHAR}, #{appendix,jdbcType=VARCHAR}, 
      #{columnName,jdbcType=LONGVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.xoa.model.portalColumn.PortalColumn" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into portal_column
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="columnId != null" >
        COLUMN_ID,
      </if>
      <if test="portalId != null" >
        PORTAL_ID,
      </if>
      <if test="sortNo != null" >
        SORT_NO,
      </if>
      <if test="columnMark != null" >
        COLUMN_MARK,
      </if>
      <if test="pageSize != null" >
        PAGE_SIZE,
      </if>
      <if test="parentColumnId != null" >
        PARENT_COLUMN_ID,
      </if>
      <if test="path != null" >
        PATH,
      </if>
      <if test="listTemplate != null" >
        LIST_TEMPLATE,
      </if>
      <if test="detailTemplate != null" >
        DETAIL_TEMPLATE,
      </if>
      <if test="auditYn != null" >
        AUDIT_YN,
      </if>
      <if test="auditUser != null" >
        AUDIT_USER,
      </if>
      <if test="appendix != null" >
        APPENDIX,
      </if>
      <if test="columnName != null" >
        COLUMN_NAME,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="columnId != null" >
        #{columnId,jdbcType=INTEGER},
      </if>
      <if test="portalId != null" >
        #{portalId,jdbcType=INTEGER},
      </if>
      <if test="sortNo != null" >
        #{sortNo,jdbcType=VARCHAR},
      </if>
      <if test="columnMark != null" >
        #{columnMark,jdbcType=VARCHAR},
      </if>
      <if test="pageSize != null" >
        #{pageSize,jdbcType=INTEGER},
      </if>
      <if test="parentColumnId != null" >
        #{parentColumnId,jdbcType=INTEGER},
      </if>
      <if test="path != null" >
        #{path,jdbcType=INTEGER},
      </if>
      <if test="listTemplate != null" >
        #{listTemplate,jdbcType=INTEGER},
      </if>
      <if test="detailTemplate != null" >
        #{detailTemplate,jdbcType=INTEGER},
      </if>
      <if test="auditYn != null" >
        #{auditYn,jdbcType=CHAR},
      </if>
      <if test="auditUser != null" >
        #{auditUser,jdbcType=VARCHAR},
      </if>
      <if test="appendix != null" >
        #{appendix,jdbcType=VARCHAR},
      </if>
      <if test="columnName != null" >
        #{columnName,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.xoa.model.portalColumn.PortalColumnExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from portal_column
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update portal_column
    <set >
      <if test="record.columnId != null" >
        COLUMN_ID = #{record.columnId,jdbcType=INTEGER},
      </if>
      <if test="record.portalId != null" >
        PORTAL_ID = #{record.portalId,jdbcType=INTEGER},
      </if>
      <if test="record.sortNo != null" >
        SORT_NO = #{record.sortNo,jdbcType=VARCHAR},
      </if>
      <if test="record.columnMark != null" >
        COLUMN_MARK = #{record.columnMark,jdbcType=VARCHAR},
      </if>
      <if test="record.pageSize != null" >
        PAGE_SIZE = #{record.pageSize,jdbcType=INTEGER},
      </if>
      <if test="record.parentColumnId != null" >
        PARENT_COLUMN_ID = #{record.parentColumnId,jdbcType=INTEGER},
      </if>
      <if test="record.path != null" >
        PATH = #{record.path,jdbcType=INTEGER},
      </if>
      <if test="record.listTemplate != null" >
        LIST_TEMPLATE = #{record.listTemplate,jdbcType=INTEGER},
      </if>
      <if test="record.detailTemplate != null" >
        DETAIL_TEMPLATE = #{record.detailTemplate,jdbcType=INTEGER},
      </if>
      <if test="record.auditYn != null" >
        AUDIT_YN = #{record.auditYn,jdbcType=CHAR},
      </if>
      <if test="record.auditUser != null" >
        AUDIT_USER = #{record.auditUser,jdbcType=VARCHAR},
      </if>
      <if test="record.appendix != null" >
        APPENDIX = #{record.appendix,jdbcType=VARCHAR},
      </if>
      <if test="record.columnName != null" >
        COLUMN_NAME = #{record.columnName,jdbcType=LONGVARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExampleWithBLOBs" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update portal_column
    set COLUMN_ID = #{record.columnId,jdbcType=INTEGER},
      PORTAL_ID = #{record.portalId,jdbcType=INTEGER},
      SORT_NO = #{record.sortNo,jdbcType=VARCHAR},
      COLUMN_MARK = #{record.columnMark,jdbcType=VARCHAR},
      PAGE_SIZE = #{record.pageSize,jdbcType=INTEGER},
      PARENT_COLUMN_ID = #{record.parentColumnId,jdbcType=INTEGER},
      PATH = #{record.path,jdbcType=INTEGER},
      LIST_TEMPLATE = #{record.listTemplate,jdbcType=INTEGER},
      DETAIL_TEMPLATE = #{record.detailTemplate,jdbcType=INTEGER},
      AUDIT_YN = #{record.auditYn,jdbcType=CHAR},
      AUDIT_USER = #{record.auditUser,jdbcType=VARCHAR},
      APPENDIX = #{record.appendix,jdbcType=VARCHAR},
      COLUMN_NAME = #{record.columnName,jdbcType=LONGVARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update portal_column
    set COLUMN_ID = #{record.columnId,jdbcType=INTEGER},
      PORTAL_ID = #{record.portalId,jdbcType=INTEGER},
      SORT_NO = #{record.sortNo,jdbcType=VARCHAR},
      COLUMN_MARK = #{record.columnMark,jdbcType=VARCHAR},
      PAGE_SIZE = #{record.pageSize,jdbcType=INTEGER},
      PARENT_COLUMN_ID = #{record.parentColumnId,jdbcType=INTEGER},
      PATH = #{record.path,jdbcType=INTEGER},
      LIST_TEMPLATE = #{record.listTemplate,jdbcType=INTEGER},
      DETAIL_TEMPLATE = #{record.detailTemplate,jdbcType=INTEGER},
      AUDIT_YN = #{record.auditYn,jdbcType=CHAR},
      AUDIT_USER = #{record.auditUser,jdbcType=VARCHAR},
      APPENDIX = #{record.appendix,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.xoa.model.portalColumn.PortalColumn" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update portal_column
    <set >
      <if test="portalId != null" >
        PORTAL_ID = #{portalId,jdbcType=INTEGER},
      </if>
      <if test="sortNo != null" >
        SORT_NO = #{sortNo,jdbcType=VARCHAR},
      </if>
      <if test="columnMark != null" >
        COLUMN_MARK = #{columnMark,jdbcType=VARCHAR},
      </if>
      <if test="pageSize != null" >
        PAGE_SIZE = #{pageSize,jdbcType=INTEGER},
      </if>
      <if test="parentColumnId != null" >
        PARENT_COLUMN_ID = #{parentColumnId,jdbcType=INTEGER},
      </if>
      <if test="path != null" >
        PATH = #{path,jdbcType=INTEGER},
      </if>
      <if test="listTemplate != null" >
        LIST_TEMPLATE = #{listTemplate,jdbcType=INTEGER},
      </if>
      <if test="detailTemplate != null" >
        DETAIL_TEMPLATE = #{detailTemplate,jdbcType=INTEGER},
      </if>
      <if test="auditYn != null" >
        AUDIT_YN = #{auditYn,jdbcType=CHAR},
      </if>
      <if test="auditUser != null" >
        AUDIT_USER = #{auditUser,jdbcType=VARCHAR},
      </if>
      <if test="appendix != null" >
        APPENDIX = #{appendix,jdbcType=VARCHAR},
      </if>
      <if test="columnName != null" >
        COLUMN_NAME = #{columnName,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where COLUMN_ID = #{columnId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.xoa.model.portalColumn.PortalColumn" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update portal_column
    set PORTAL_ID = #{portalId,jdbcType=INTEGER},
      SORT_NO = #{sortNo,jdbcType=VARCHAR},
      COLUMN_MARK = #{columnMark,jdbcType=VARCHAR},
      PAGE_SIZE = #{pageSize,jdbcType=INTEGER},
      PARENT_COLUMN_ID = #{parentColumnId,jdbcType=INTEGER},
      PATH = #{path,jdbcType=INTEGER},
      LIST_TEMPLATE = #{listTemplate,jdbcType=INTEGER},
      DETAIL_TEMPLATE = #{detailTemplate,jdbcType=INTEGER},
      AUDIT_YN = #{auditYn,jdbcType=CHAR},
      AUDIT_USER = #{auditUser,jdbcType=VARCHAR},
      APPENDIX = #{appendix,jdbcType=VARCHAR},
      COLUMN_NAME = #{columnName,jdbcType=LONGVARCHAR}
    where COLUMN_ID = #{columnId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.xoa.model.portalColumn.PortalColumn" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update portal_column
    set PORTAL_ID = #{portalId,jdbcType=INTEGER},
      SORT_NO = #{sortNo,jdbcType=VARCHAR},
      COLUMN_MARK = #{columnMark,jdbcType=VARCHAR},
      PAGE_SIZE = #{pageSize,jdbcType=INTEGER},
      PARENT_COLUMN_ID = #{parentColumnId,jdbcType=INTEGER},
      PATH = #{path,jdbcType=INTEGER},
      LIST_TEMPLATE = #{listTemplate,jdbcType=INTEGER},
      DETAIL_TEMPLATE = #{detailTemplate,jdbcType=INTEGER},
      AUDIT_YN = #{auditYn,jdbcType=CHAR},
      AUDIT_USER = #{auditUser,jdbcType=VARCHAR},
      APPENDIX = #{appendix,jdbcType=VARCHAR}
    where COLUMN_ID = #{columnId,jdbcType=INTEGER}
  </update>

  <select id="selectPortalColumn" resultMap="ResultMapWithBLOBs">

       select c.COLUMN_ID,c.PORTAL_ID,c.SORT_NO,c.COLUMN_MARK,c.PAGE_SIZE,c.PARENT_COLUMN_ID,c.PATH,c.LIST_TEMPLATE,c.DETAIL_TEMPLATE,c.AUDIT_YN,c.AUDIT_USER,c.APPENDIX
    from portal_column c,portal_site s
    WHERE c.PORTAL_ID=s.PORTAL_ID
  </select>

  <delete id="delPortalColumn" parameterType="Integer[]"  >

    delete from portal_column
    WHERE COLUMN_ID IN
    <foreach item="ids" collection="array" open="(" separator="," close=")">
      <if test=' ids!="" '>
        #{ids}
      </if>
    </foreach>

  </delete>

  <select id="selectSiteSids" resultMap="ResultMapWithBLOBs" >

    select CODE_NAME,CODE_NO
    from sys_code
    WHERE CODE_NO  in
    <foreach item="ids" collection="array" open="(" separator="," close=")">
      <if test=' ids!="" '>
        #{ids}
      </if>
      order by SORT_NO asc
    </foreach>

  </select>

  <select id="count" parameterType="java.lang.Integer" resultType="java.lang.Integer" >

    select count(*) from portal_column
   WHERE PORTAL_ID=#{portalId}
   AND PARENT_COLUMN_ID=0

  </select>

  <select id="columnCount"  resultType="java.lang.Integer" >

    select count(*) from portal_column
    WHERE PORTAL_ID=#{portalId}
    AND PARENT_COLUMN_ID=#{columnId}

  </select>

    <select id="siteExpandColumn"  resultMap="ResultMapWithBLOBs" >

      select c.COLUMN_ID,c.PORTAL_ID,c.SORT_NO,c.COLUMN_MARK,c.PAGE_SIZE,c.PARENT_COLUMN_ID,c.PATH,c.LIST_TEMPLATE,c.DETAIL_TEMPLATE,c.AUDIT_YN,c.AUDIT_USER,c.APPENDIX,c.COLUMN_NAME
      from portal_column c
      WHERE c.PORTAL_ID=#{sid} and c.PARENT_COLUMN_ID=0

      <if test="colIds!=null and colIds.length>0">
        and c.COLUMN_ID not  in
        <foreach item="colIds" collection="array" open="(" separator="," close=")">

            #{colIds}

        </foreach>

      </if>
      order by c.SORT_NO asc

    </select>

  <select id="columnExpandColumn"  resultMap="ResultMapWithBLOBs" >

    select c.COLUMN_ID,c.PORTAL_ID,c.SORT_NO,c.COLUMN_MARK,c.PAGE_SIZE,c.PARENT_COLUMN_ID,c.PATH,c.LIST_TEMPLATE,c.DETAIL_TEMPLATE,c.AUDIT_YN,c.AUDIT_USER,c.APPENDIX,c.COLUMN_NAME
    from portal_column c
    WHERE c.PARENT_COLUMN_ID=#{sid}

    <if test="colIds!=null and colIds.length>0">
      and c.COLUMN_ID not  in
      <foreach item="colIds" collection="array" open="(" separator="," close=")">

        #{colIds}

      </foreach>

    </if>
    order by c.SORT_NO asc

  </select>


</mapper>
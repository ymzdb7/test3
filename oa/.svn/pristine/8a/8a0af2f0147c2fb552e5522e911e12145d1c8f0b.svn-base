/*      */ package com.xoa.service.attend;
/*      */ 
/*      */ import com.xoa.dao.attend.AttendEvectionMapper;
/*      */ import com.xoa.dao.attend.AttendLeaveMapper;
/*      */ import com.xoa.dao.attend.AttendMapper;
/*      */ import com.xoa.dao.attend.AttendOutMapper;
/*      */ import com.xoa.dao.attend.AttendSetMapper;
/*      */ import com.xoa.dao.attend.AttendanceOvertimeMapper;
/*      */ import com.xoa.dao.department.DepartmentMapper;
/*      */ import com.xoa.dao.users.UserExtMapper;
/*      */ import com.xoa.dao.users.UsersMapper;
/*      */ import com.xoa.model.attend.Absenteeism;
/*      */ import com.xoa.model.attend.Attend;
/*      */ import com.xoa.model.attend.AttendEvection;
/*      */ import com.xoa.model.attend.AttendLeave;
/*      */ import com.xoa.model.attend.AttendOut;
/*      */ import com.xoa.model.attend.AttendSet;
/*      */ import com.xoa.model.attend.AttendStatistics;
/*      */ import com.xoa.model.attend.Attendance;
/*      */ import com.xoa.model.attend.AttendanceOvertime;
/*      */ import com.xoa.model.attend.BaseAttend;
/*      */ import com.xoa.model.attend.BaseSupplement;
/*      */ import com.xoa.model.attend.Field;
/*      */ import com.xoa.model.attend.LackCard;
/*      */ import com.xoa.model.attend.Late;
/*      */ import com.xoa.model.attend.LeaveEarly;
/*      */ import com.xoa.model.attend.Normal;
/*      */ import com.xoa.model.attend.UnitException;
/*      */ import com.xoa.model.department.Department;
/*      */ import com.xoa.model.users.UserExt;
/*      */ import com.xoa.model.users.Users;
/*      */ import com.xoa.service.attend.wrapper.AttendSetWrappers;
import com.xoa.util.Constant;
/*      */ import com.xoa.util.DateCompute;
/*      */ import com.xoa.util.DateFormat;
/*      */ import com.xoa.util.GetAttachmentListUtil;
/*      */ import com.xoa.util.ToJson;
/*      */ import com.xoa.util.common.StringUtils;
/*      */ import com.xoa.util.common.session.SessionUtils;
/*      */ import com.xoa.util.common.wrapper.BaseWrapper;
/*      */ import com.xoa.util.page.PageParams;
/*      */ import java.io.PrintStream;
/*      */ import java.text.ParseException;
/*      */ import java.text.SimpleDateFormat;
/*      */ import java.util.ArrayList;
/*      */ import java.util.Calendar;
/*      */ import java.util.Collections;
/*      */ import java.util.Date;
/*      */ import java.util.HashMap;
/*      */ import java.util.Iterator;
/*      */ import java.util.LinkedHashMap;
/*      */ import java.util.List;
/*      */ import java.util.Map;
/*      */ import javax.servlet.http.HttpServletRequest;
/*      */ import javax.servlet.http.HttpSession;
/*      */ import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
/*      */ 
/*      */ @Service
/*      */ public class AttendService
/*      */ {
/*   37 */   public final String numberZero = "0";
/*   38 */   public final String numberOne = "1";
/*   39 */   public final String numberTwo = "2";
/*   40 */   public final String numberThree = "3";
/*   41 */   public final String numberFour = "4";
/*   42 */   public final String numberFive = "5";
/*   43 */   public final String numberSix = "6";
/*      */ 
/*      */   @Autowired
/*      */   private AttendMapper attendMapper;
/*      */ 
/*      */   @Autowired
/*      */   private AttendSetMapper attendSetMapper;
/*      */ 
/*      */   @Autowired
/*      */   private UserExtMapper userExtMapper;
/*      */ 
/*      */   @Autowired
/*      */   private UsersMapper usersMapper;
/*      */ 
/*      */   @Autowired
/*      */   private DepartmentMapper departmentMapper;
/*      */ 
/*      */   @Autowired
/*      */   private AttendEvectionMapper attendEvectionMapper;
/*      */ 
/*      */   @Autowired
/*      */   private AttendLeaveMapper attendLeaveMapper;
/*      */ 
/*      */   @Autowired
/*      */   private AttendanceOvertimeMapper attendanceOvertimeMapper;
/*      */ 
/*      */   @Autowired
/*      */   private AttendOutMapper attendOutMapper;
/* 3096 */   public static String attendDatetime = "08:00:00";
/*      */ 
/*      */   public BaseWrapper newAttend(Attend attend, HttpServletRequest req, String attendDate, String uid)
/*      */     throws ParseException
/*      */   {
/*   67 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/*   68 */     Date date = new Date();
/*   69 */     SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
/*   70 */     String str = sdf.format(date);
/*   71 */     Date date1 = sdf.parse(str);
/*   72 */     attend.setAid(Integer.valueOf(0));
/*   73 */     attend.setDate(DateFormat.DateToStr(attendDate));
/*   74 */     int a = DateFormat.getWYQTime(str).intValue();
/*   75 */     attend.setAtime(Integer.valueOf(a));
/*   76 */     Map map = new HashMap();
/*      */ 
/*   78 */     map.put("uid", uid);
/*   79 */     map.put("date", attendDate);
/*   80 */     map.put("type", attend.getType());
/*   81 */     List attendList = this.attendMapper.selectAttend(map);
/*   82 */     if ((!"0".equals(attend.getType())) && 
/*   83 */       (attendList != null) && (attendList.size() > 0)) {
/*   84 */       wrappers.setFlag(false);
/*   85 */       wrappers.setStatus(true);
/*   86 */       wrappers.setMsg("重复签到");
/*   87 */       wrappers.setCode("130050");
/*   88 */       return wrappers;
/*      */     }
/*      */ 
/*   91 */     if (StringUtils.checkNull(attend.getAddress()).booleanValue()) {
/*   92 */       wrappers.setFlag(false);
/*   93 */       wrappers.setStatus(true);
/*   94 */       wrappers.setMsg("考勤签到地址不能为空");
/*   95 */       wrappers.setCode("130060");
/*   96 */       return wrappers;
/*      */     }
/*      */ 
/*   99 */     int res = this.attendMapper.addAttend(attend);
/*  100 */     if (res == 1) {
/*  101 */       wrappers.setFlag(true);
/*  102 */       wrappers.setStatus(true);
/*  103 */       wrappers.setMsg("签到成功");
/*      */     } else {
/*  105 */       wrappers.setFlag(false);
/*  106 */       wrappers.setStatus(true);
/*  107 */       wrappers.setMsg("签到失败");
/*      */     }
/*      */ 
/*  110 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public BaseWrapper attendList(String attendDate, HttpServletRequest req, String uid, String sqlType) {
/*  114 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/*  115 */     Attend attend = new Attend();
/*  116 */     Map map = new HashMap();
/*      */ 
/*  119 */     map.put("uid", uid);
/*  120 */     map.put("date", attendDate);
/*  121 */     UserExt userExt = this.userExtMapper.queryUserExt(uid);
/*  122 */     AttendSet attendSet = this.attendSetMapper.queryAttendSetId(Integer.valueOf(userExt.getDutyType().shortValue()));
/*      */ 
/*  124 */     String[] str1 = attendSet.getAtime1Set().split("\\|");
/*  125 */     attendSet.setAtime1Setother(str1[0]);
/*  126 */     attendSet.setCommute1(str1[1]);
/*  127 */     String[] str2 = attendSet.getAtime2Set().split("\\|");
/*  128 */     attendSet.setAtime2Setother(str2[0]);
/*  129 */     attendSet.setCommute2(str2[1]);
/*      */ 
/*  131 */     String[] str3 = attendSet.getAtime3Set().split("\\|");
/*  132 */     attendSet.setAtime3Setother(str3[0]);
/*  133 */     attendSet.setCommute3(str3[1]);
/*  134 */     String[] str4 = attendSet.getAtime4Set().split("\\|");
/*  135 */     attendSet.setAtime4Setother(str4[0]);
/*  136 */     attendSet.setCommute4(str4[1]);
/*  137 */     String[] str5 = attendSet.getAtime5Set().split("\\|");
/*  138 */     attendSet.setAtime5Setother(str5[0]);
/*  139 */     attendSet.setCommute5(str5[1]);
/*  140 */     String[] str6 = attendSet.getAtime6Set().split("\\|");
/*  141 */     attendSet.setAtime6Setother(str6[0]);
/*  142 */     attendSet.setCommute6(str6[1]);
/*      */ 
/*  144 */     List<Attend> workList = new ArrayList<Attend>();
/*  145 */     List legwork = new ArrayList();
/*  146 */     if (attendSet != null) {
/*  147 */       Attend attend11 = new Attend();
/*  148 */       Attend attend22 = new Attend();
/*  149 */       Attend attend33 = new Attend();
/*  150 */       Attend attend44 = new Attend();
/*  151 */       Attend attend55 = new Attend();
/*  152 */       Attend attend66 = new Attend();
/*      */ 
/*  154 */       if ("1".equals(attendSet.getAtime1Setother())) {
/*  155 */         String status = "";
/*  156 */         int atime = 0;
/*  157 */         String remark = "";
/*  158 */         String addres = "";
/*  159 */         Attend attend1 = this.attendMapper.selectAttendAll(attendDate, uid, "1");
/*  160 */         if (attend1 != null) {
/*  161 */           if ("1".equals(attend1.getType())) {
/*  162 */             if ("1".equals(attendSet.getCommute1())) {
/*  163 */               String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/*  164 */               if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime1()).getTime())
/*  165 */                 status = "迟到";
/*      */               else
/*  167 */                 status = "正常";
/*      */             }
/*      */             else {
/*  170 */               String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/*  171 */               if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime1()).getTime())
/*  172 */                 status = "早退";
/*      */               else {
/*  174 */                 status = "正常";
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/*  179 */           atime = attend1.getAtime().intValue();
/*  180 */           remark = attend1.getRemark();
/*  181 */           addres = attend1.getAddress();
/*      */         }
/*      */         else {
/*  184 */           status = "未签到";
/*  185 */           atime = 0;
/*      */         }
/*  187 */         attend11.setNum("1");
/*  188 */         attend11.setSwi("1");
/*  189 */         attend11.setCommute(attendSet.getCommute1());
/*  190 */         attend11.setAtime(Integer.valueOf(atime));
/*  191 */         attend11.setRemark(remark);
/*  192 */         attend11.setAddress(addres);
/*  193 */         attend11.setAtimestate(status);
/*  194 */         workList.add(attend11);
/*      */       }
/*      */ 
/*  197 */       if ("1".equals(attendSet.getAtime2Setother())) {
/*  198 */         String status = "";
/*  199 */         int atime = 0;
/*  200 */         String remark = "";
/*  201 */         String addres = "";
/*  202 */         Attend attend2 = this.attendMapper.selectAttendAll(attendDate, uid, "2");
/*  203 */         if (attend2 != null)
/*      */         {
/*  205 */           if ("2".equals(attend2.getType()))
/*      */           {
/*  207 */             if ("1".equals(attendSet.getCommute2())) {
/*  208 */               int a22 = DateFormat.getWYQTime(attendSet.getAtime2()).intValue();
/*  209 */               if (attend2.getAtime().intValue() > DateFormat.getWYQTime(attendSet.getAtime2()).intValue())
/*  210 */                 status = "迟到";
/*      */               else
/*  212 */                 status = "正常";
/*      */             }
/*      */             else {
/*  215 */               String a1 = DateFormat.getwyqStrTime(attend2.getAtime());
/*  216 */               if (attend2.getAtime().intValue() < DateFormat.getWYQTime(attendSet.getAtime2()).intValue())
/*  217 */                 status = "早退";
/*      */               else {
/*  219 */                 status = "正常";
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/*  224 */           remark = attend2.getRemark();
/*  225 */           addres = attend2.getAddress();
/*  226 */           atime = attend2.getAtime().intValue();
/*      */         }
/*      */         else {
/*  229 */           status = "未签到";
/*      */         }
/*  231 */         attend22.setNum("1");
/*  232 */         attend22.setSwi("1");
/*  233 */         attend22.setCommute(attendSet.getCommute2());
/*  234 */         attend22.setAtime(Integer.valueOf(atime));
/*  235 */         attend22.setRemark(remark);
/*  236 */         attend22.setAddress(addres);
/*  237 */         attend22.setAtimestate(status);
/*  238 */         workList.add(attend22);
/*      */       }
/*      */ 
/*  242 */       if ("1".equals(attendSet.getAtime3Setother())) {
/*  243 */         String status = "";
/*  244 */         int atime = 0;
/*  245 */         String remark = "";
/*  246 */         String addres = "";
/*  247 */         Attend attend3 = this.attendMapper.selectAttendAll(attendDate, uid, "3");
/*  248 */         if (attend3 != null)
/*      */         {
/*  250 */           if ("3".equals(attend3.getType()))
/*      */           {
/*  252 */             if ("1".equals(attendSet.getCommute3())) {
/*  253 */               String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/*  254 */               if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime3()).getTime())
/*  255 */                 status = "迟到";
/*      */               else
/*  257 */                 status = "正常";
/*      */             }
/*      */             else {
/*  260 */               String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/*  261 */               if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime3()).getTime())
/*  262 */                 status = "早退";
/*      */               else {
/*  264 */                 status = "正常";
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/*  269 */           remark = attend3.getRemark();
/*  270 */           addres = attend3.getAddress();
/*  271 */           atime = attend3.getAtime().intValue();
/*      */         }
/*      */         else
/*      */         {
/*  275 */           status = "未签到";
/*      */         }
/*  277 */         attend33.setNum("1");
/*  278 */         attend33.setSwi("1");
/*  279 */         attend33.setCommute(attendSet.getCommute3());
/*  280 */         attend33.setAtime(Integer.valueOf(atime));
/*  281 */         attend33.setRemark(remark);
/*  282 */         attend33.setAddress(addres);
/*  283 */         attend33.setAtimestate(status);
/*  284 */         workList.add(attend33);
/*      */       }
/*      */ 
/*  288 */       if ("1".equals(attendSet.getAtime4Setother())) {
/*  289 */         String status = "";
/*  290 */         int atime = 0;
/*  291 */         String remark = "";
/*  292 */         String addres = "";
/*  293 */         Attend attend4 = this.attendMapper.selectAttendAll(attendDate, uid, "4");
/*  294 */         if (attend4 != null)
/*      */         {
/*  296 */           if ("4".equals(attend4.getType()))
/*      */           {
/*  298 */             if ("1".equals(attendSet.getCommute4())) {
/*  299 */               String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/*  300 */               if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime4()).getTime())
/*  301 */                 status = "迟到";
/*      */               else
/*  303 */                 status = "正常";
/*      */             }
/*      */             else {
/*  306 */               String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/*  307 */               if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime4()).getTime())
/*  308 */                 status = "早退";
/*      */               else {
/*  310 */                 status = "正常";
/*      */               }
/*      */             }
/*  313 */             remark = attend4.getRemark();
/*  314 */             addres = attend4.getAddress();
/*  315 */             atime = attend4.getAtime().intValue();
/*      */           } else {
/*  317 */             status = "未签到";
/*      */           }
/*  319 */           attend44.setNum("1");
/*  320 */           attend44.setSwi("1");
/*  321 */           attend44.setCommute(attendSet.getCommute4());
/*  322 */           attend44.setAtime(Integer.valueOf(atime));
/*  323 */           attend44.setRemark(remark);
/*  324 */           attend44.setAddress(addres);
/*  325 */           attend44.setAtimestate(status);
/*  326 */           workList.add(attend44);
/*      */         }
/*      */ 
/*      */       }
/*      */ 
/*  332 */       if ("1".equals(attendSet.getAtime5Setother())) {
/*  333 */         String status = "";
/*  334 */         int atime = 0;
/*  335 */         String remark = "";
/*  336 */         String addres = "";
/*  337 */         Attend attend5 = this.attendMapper.selectAttendAll(attendDate, uid, "5");
/*  338 */         if (attend5 != null)
/*      */         {
/*  340 */           if ("5".equals(attend5.getType()))
/*      */           {
/*  342 */             if ("1".equals(attendSet.getCommute5())) {
/*  343 */               String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/*  344 */               if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime5()).getTime())
/*  345 */                 status = "迟到";
/*      */               else
/*  347 */                 status = "正常";
/*      */             }
/*      */             else {
/*  350 */               String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/*  351 */               if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime5()).getTime())
/*  352 */                 status = "早退";
/*      */               else {
/*  354 */                 status = "正常";
/*      */               }
/*      */             }
/*  357 */             remark = attend5.getRemark();
/*  358 */             addres = attend5.getAddress();
/*  359 */             atime = attend5.getAtime().intValue();
/*      */           }
/*      */           else {
/*  362 */             status = "未签到";
/*      */           }
/*  364 */           attend55.setNum("1");
/*  365 */           attend55.setSwi("1");
/*  366 */           attend55.setAtimestate(status);
/*  367 */           attend55.setCommute(attendSet.getCommute5());
/*  368 */           attend55.setRemark(remark);
/*  369 */           attend55.setAddress(addres);
/*  370 */           attend55.setAtime(Integer.valueOf(atime));
/*  371 */           workList.add(attend55);
/*      */         }
/*      */ 
/*      */       }
/*      */ 
/*  378 */       if ("1".equals(attendSet.getAtime6Setother())) {
/*  379 */         String status = "";
/*  380 */         int atime = 0;
/*  381 */         String remark = "";
/*  382 */         String addres = "";
/*  383 */         Attend attend6 = this.attendMapper.selectAttendAll(attendDate, uid, "6");
/*  384 */         if (attend6 != null)
/*      */         {
/*  386 */           if ("6".equals(attend6.getType()))
/*      */           {
/*  388 */             if ("1".equals(attendSet.getCommute6())) {
/*  389 */               String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/*  390 */               if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime6()).getTime())
/*  391 */                 status = "迟到";
/*      */               else
/*  393 */                 status = "正常";
/*      */             }
/*      */             else {
/*  396 */               String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/*  397 */               if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime6()).getTime())
/*  398 */                 status = "早退";
/*      */               else {
/*  400 */                 status = "正常";
/*      */               }
/*      */             }
/*  403 */             remark = attend6.getRemark();
/*  404 */             addres = attend6.getAddress();
/*  405 */             atime = attend6.getAtime().intValue();
/*      */           }
/*      */           else {
/*  408 */             status = "未签到";
/*      */           }
/*  410 */           attend66.setNum("1");
/*  411 */           attend66.setSwi("1");
/*  412 */           attend66.setCommute(attendSet.getCommute6());
/*  413 */           attend66.setRemark(remark);
/*  414 */           attend66.setAddress(addres);
/*  415 */           attend66.setAtime(Integer.valueOf(atime));
/*  416 */           attend66.setAtimestate(status);
/*      */ 
/*  418 */           workList.add(attend66);
/*      */         }
/*      */ 
/*      */       }
/*      */ 
/*  424 */       if ("1".equals(attendSet.getIsOut())) {
/*  425 */         List<Attend> attend0 = this.attendMapper.selectAttend0(attendDate, uid);
/*  426 */         if (attend0 != null) {
/*  427 */           for (Attend a : attend0) {
/*  428 */             if ((!StringUtils.checkNull(a.getFileId()).booleanValue()) && (!StringUtils.checkNull(a.getFileName()).booleanValue())) {
/*  429 */               a.setAttachment(GetAttachmentListUtil.returnAttachment(a.getFileName(), a.getFileId(), sqlType, "attend"));
/*      */             }
/*      */ 
/*  432 */             legwork.add(a);
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/*      */       }
/*      */ 
/*  442 */       Date artt = DateFormat.DateToStr(attendDate);
/*  443 */       attend.setDate(artt);
/*  444 */       attend.setAttendList(workList);
/*  445 */       attend.setLegwork(legwork);
/*  446 */       wrappers.setFlag(true);
/*  447 */       wrappers.setStatus(true);
/*  448 */       wrappers.setData(attend);
/*  449 */       wrappers.setMsg("更新成功");
/*      */     }
/*      */ 
/*  458 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public BaseWrapper mycheckList(String date) {
/*  462 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/*  463 */     Map map = new HashMap();
/*  464 */     PageParams pageParams = new PageParams();
/*  465 */     pageParams.setUseFlag(Boolean.valueOf(true));
/*  466 */     pageParams.setPage(Integer.valueOf(1));
/*  467 */     pageParams.setPageSize(Integer.valueOf(10));
/*  468 */     map.put("page", pageParams);
/*  469 */     map.put("date", date);
/*  470 */     List attendList = this.attendMapper.AttendList(map);
/*  471 */     Iterator attendIterator = attendList.iterator();
/*  472 */     while (attendIterator.hasNext()) {
/*  473 */       Attend attend = (Attend)attendIterator.next();
/*      */ 
/*  475 */       Users users = this.usersMapper.getByUid(attend.getUid().intValue());
/*  476 */       attend.setSname(users.getUserName());
/*  477 */       attend.setAva(users.getAvatar());
/*      */     }
/*      */ 
/*  480 */     if (attendList != null) {
/*  481 */       wrappers.setData(attendList);
/*  482 */       wrappers.setFlag(true);
/*  483 */       wrappers.setStatus(true);
/*  484 */       wrappers.setMsg("更新成功");
/*      */     } else {
/*  486 */       wrappers.setFlag(true);
/*  487 */       wrappers.setStatus(false);
/*  488 */       wrappers.setMsg("更新失败");
/*      */     }
/*      */ 
/*  491 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public BaseWrapper myAttend(String date, String uid, String start, String end, HttpServletRequest req) throws ParseException
/*      */   {
/*  496 */     String sqlType = Constant.MYOA + (String)req.getSession().getAttribute("loginDateSouse");
/*      */ 
/*  498 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/*  499 */     Attend attend = new Attend();
/*  500 */     Map map = new HashMap();
/*  501 */     if (StringUtils.checkNull(uid).booleanValue()) {
/*  502 */       uid = ((Users)SessionUtils.getSessionInfo(req.getSession(), Users.class, new Users())).getUid().toString();
/*      */     }
/*  504 */     Users users = (Users)SessionUtils.getSessionInfo(req.getSession(), Users.class, new Users());
/*  505 */     map.put("uid", uid);
/*  506 */     map.put("date", date);
/*  507 */     UserExt userExt = this.userExtMapper.queryUserExt(uid);
/*  508 */     if (userExt != null) {
/*  509 */       AttendSet attendSet = this.attendSetMapper.queryAttendSetId(Integer.valueOf(userExt.getDutyType().shortValue()));
/*  510 */       int xqhbt = 0;
/*  511 */       String[] str1 = attendSet.getAtime1Set().split("\\|");
/*  512 */       if ("1".equals(str1[0])) {
/*  513 */         xqhbt++;
/*      */       }
/*  515 */       attendSet.setAtime1Setother(str1[0]);
/*  516 */       attendSet.setCommute1(str1[1]);
/*  517 */       String[] str2 = attendSet.getAtime2Set().split("\\|");
/*  518 */       if ("1".equals(str2[0])) {
/*  519 */         xqhbt++;
/*      */       }
/*  521 */       attendSet.setAtime2Setother(str2[0]);
/*  522 */       attendSet.setCommute2(str2[1]);
/*  523 */       String[] str3 = attendSet.getAtime3Set().split("\\|");
/*  524 */       if ("1".equals(str3[0])) {
/*  525 */         xqhbt++;
/*      */       }
/*  527 */       attendSet.setAtime3Setother(str3[0]);
/*  528 */       attendSet.setCommute3(str3[1]);
/*  529 */       String[] str4 = attendSet.getAtime4Set().split("\\|");
/*  530 */       if ("1".equals(str4[0])) {
/*  531 */         xqhbt++;
/*      */       }
/*  533 */       attendSet.setAtime4Setother(str4[0]);
/*  534 */       attendSet.setCommute4(str4[1]);
/*  535 */       String[] str5 = attendSet.getAtime5Set().split("\\|");
/*  536 */       if ("1".equals(str5[0])) {
/*  537 */         xqhbt++;
/*      */       }
/*  539 */       attendSet.setAtime5Setother(str5[0]);
/*  540 */       attendSet.setCommute5(str5[1]);
/*  541 */       String[] str6 = attendSet.getAtime6Set().split("\\|");
/*  542 */       if ("1".equals(str6[0])) {
/*  543 */         xqhbt++;
/*      */       }
/*  545 */       attendSet.setAtime6Setother(str6[0]);
/*  546 */       attendSet.setCommute6(str6[1]);
/*  547 */       if (attendSet != null) {
/*  548 */         List attendances = new ArrayList();
/*  549 */         List normals = new ArrayList();
/*  550 */         List fields = new ArrayList();
/*  551 */         List leaveEarlies = new ArrayList();
/*  552 */         List lackCards = new ArrayList();
/*  553 */         List lates = new ArrayList();
/*  554 */         List absenteeisms = new ArrayList();
/*  555 */         List unitExceptions = new ArrayList();
/*  556 */         List normalNews = new ArrayList();
/*  557 */         List absenteeismRecord = new ArrayList();
/*  558 */         List leaveEarlyRecord = new ArrayList();
/*  559 */         List lackCardRecord = new ArrayList();
/*  560 */         List lateRecord = new ArrayList();
/*  561 */         List attendOutList = new ArrayList();
/*  562 */         List attendanceOvertimeList = new ArrayList();
/*  563 */         List attendEvectionList = new ArrayList();
/*  564 */         List attendLeaveList = new ArrayList();
/*  565 */         List attendListFirst = new ArrayList();
/*      */ 
/*  568 */         List workList = new ArrayList();
/*      */ 
/*  581 */         String[] wDate = attendSet.getWorkdate().split(",");
/*      */ 
/*  585 */         List<Date> datss = new ArrayList();
/*  586 */         SimpleDateFormat df = new SimpleDateFormat("yyyy-MM");
/*  587 */         SimpleDateFormat matter2 = new SimpleDateFormat("yyyy-MM-dd");
/*  588 */         Date dt = new Date();
/*  589 */         String a11 = df.format(dt);
/*  590 */         String stratDate = "";
/*  591 */         String endDate = "";
/*  592 */         if (start.equals(a11))
/*      */         {
/*  594 */           stratDate = start + "-01";
/*  595 */           endDate = matter2.format(dt);
/*      */         }
/*      */         else {
/*  598 */           Date date1 = df.parse(start);
/*  599 */           Calendar calendar = Calendar.getInstance();
/*  600 */           calendar.setTime(date1);
/*  601 */           int first1 = calendar.getActualMinimum(5);
/*  602 */           int last1 = calendar.getActualMaximum(5);
/*  603 */           stratDate = start + "-01";
/*  604 */           endDate = start + "-" + last1;
/*      */         }
/*  606 */         List unitExceptionList = myAttendUnitException(stratDate, endDate, uid, req);
/*      */ 
/*  608 */         Date start1 = matter2.parse(stratDate);
/*  609 */         Date end1 = matter2.parse(endDate);
/*  610 */         Calendar c = Calendar.getInstance();
/*  611 */         List<Date> dates = DateCompute.getBetweenDates(start1, end1);
/*  612 */         for (Date nowdate1 : dates) {
/*  613 */           c.setTime(nowdate1);
/*  614 */           int weekInt = c.get(7);
/*  615 */           weekInt -= 1;
/*  616 */           if (weekInt == 0) {
/*  617 */             weekInt = 7;
/*      */           }
/*      */ 
/*  620 */           String week = String.valueOf(weekInt);
/*  621 */           if (attendSet.getWorkdate().contains(week)) {
/*  622 */             datss.add(nowdate1);
/*      */           }
/*      */         }
/*      */ 
/*  626 */         for (Date nowdate : datss) {
/*  627 */           List zhengchang1 = new ArrayList();
/*  628 */           Attendance attendance = new Attendance();
/*  629 */           Absenteeism absenteeism = new Absenteeism();
/*      */ 
/*  631 */           LeaveEarly leaveEarly = new LeaveEarly();
/*      */ 
/*  633 */           Normal normal = new Normal();
/*  634 */           Late late = new Late();
/*      */ 
/*  636 */           LackCard lackCard = new LackCard();
/*      */ 
/*  638 */           Normal normalNew = new Normal();
/*      */ 
/*  652 */           List attendOuts = this.attendOutMapper.queryAttendOut(users.getUserId(), DateFormat.getDatestr(nowdate));
/*  653 */           if ((attendOuts.size() > 0) && (attendOuts != null)) {
/*  654 */             Iterator attendOutIterator = attendOuts.iterator();
/*  655 */             while (attendOutIterator.hasNext()) {
/*  656 */               AttendOut attendOut = (AttendOut)attendOutIterator.next();
/*  657 */               BaseAttend attendOutNew = new BaseAttend();
/*  658 */               attendOutNew.setStrat(attendOut.getOutTime1());
/*  659 */               attendOutNew.setEnd(attendOut.getOutTime2());
/*  660 */               attendOutNew.setStr("原因:" + attendOut.getOutType());
/*  661 */               attendOutNew.setHour("1");
/*  662 */               attendOutList.add(attendOutNew);
/*      */             }
/*      */           }
/*      */ 
/*  666 */           List attendLeaves = this.attendLeaveMapper.selectAttendLeaveModify(users.getUserId(), DateFormat.getDatestr(nowdate));
/*  667 */           if ((attendLeaves.size() > 0) && (attendLeaves != null)) {
/*  668 */             Iterator attendLeavesIteratorr = attendLeaves.iterator();
/*  669 */             while (attendLeavesIteratorr.hasNext()) {
/*  670 */               AttendLeave attendLeave = (AttendLeave)attendLeavesIteratorr.next();
/*  671 */               BaseAttend attendLeaveNew = new BaseAttend();
/*  672 */               attendLeaveNew.setStrat(DateFormat.getStrDate(attendLeave.getLeaveDate1()));
/*  673 */               attendLeaveNew.setEnd(DateFormat.getStrDate(attendLeave.getLeaveDate2()));
/*  674 */               attendLeaveNew.setStr("原因:" + attendLeave.getLeaveType());
/*  675 */               attendLeaveNew.setHour("1");
/*  676 */               attendLeaveList.add(attendLeaveNew);
/*      */             }
/*      */           }
/*      */ 
/*  680 */           List attendEvections = this.attendEvectionMapper.selectAttendEvectionModify(users.getUserId(), DateFormat.getDatestr(nowdate));
/*  681 */           if ((attendEvections.size() > 0) && (attendEvections != null)) {
/*  682 */             Iterator attendEvectionIterator = attendEvections.iterator();
/*  683 */             while (attendEvectionIterator.hasNext()) {
/*  684 */               AttendEvection attendEvection = (AttendEvection)attendEvectionIterator.next();
/*  685 */               BaseAttend attendEvectionNew = new BaseAttend();
/*  686 */               attendEvectionNew.setStrat(DateFormat.getStrDate(attendEvection.getEvectionDate1()));
/*  687 */               attendEvectionNew.setEnd(DateFormat.getStrDate(attendEvection.getEvectionDate2()));
/*  688 */               attendEvectionNew.setStr("原因:" + attendEvection.getReason());
/*  689 */               attendEvectionNew.setHour("1");
/*  690 */               attendEvectionList.add(attendEvectionNew);
/*      */             }
/*      */           }
/*  693 */           List attendanceOvertimes = this.attendanceOvertimeMapper.queryAttendanceOvertime(users.getUserId(), DateFormat.getDatestr(nowdate));
/*      */ 
/*  695 */           if ((attendanceOvertimes.size() > 0) && (attendanceOvertimes != null)) {
/*  696 */             Iterator attendanceOvertimeIterator = attendanceOvertimes.iterator();
/*  697 */             while (attendanceOvertimeIterator.hasNext()) {
/*  698 */               AttendanceOvertime attendanceOvertime = (AttendanceOvertime)attendanceOvertimeIterator.next();
/*  699 */               BaseAttend attendanceOvertimeNew = new BaseAttend();
/*  700 */               attendanceOvertimeNew.setStrat(DateFormat.getStrDate(attendanceOvertime.getStartTime()));
/*  701 */               attendanceOvertimeNew.setEnd(DateFormat.getStrDate(attendanceOvertime.getEndTime()));
/*  702 */               attendanceOvertimeNew.setStr("原因:" + attendanceOvertime.getReason());
/*  703 */               attendanceOvertimeNew.setHour(attendanceOvertime.getOvertimeHours());
/*  704 */               attendanceOvertimeList.add(attendanceOvertimeNew);
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/*  709 */           Map maps = new HashMap();
/*  710 */           maps.put("uid", uid);
/*  711 */           maps.put("date", DateFormat.getDatestr(nowdate));
/*  712 */           List attendList111 = this.attendMapper.selectAttendList(maps);
/*  713 */           if (attendList111.size() > 0) {
/*  714 */             attendance.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  715 */             attendance.setDate(DateFormat.getDatestrTime(nowdate));
/*  716 */             attendances.add(attendance);
/*      */           }
/*  719 */           else if (!DateFormat.getDatestr(nowdate).equals(DateFormat.getCurrentTime2())) {
/*  720 */             List attendEvection = this.attendEvectionMapper.selectAttendEvectionModify(users.getUserId(), DateFormat.getDatestr(nowdate));
/*  721 */             List attendLeave = this.attendLeaveMapper.selectAttendLeaveModify(users.getUserId(), DateFormat.getDatestr(nowdate));
/*  722 */             if ((attendEvection.size() == 0) && (attendEvection.size() == 0)) {
/*  723 */               Absenteeism absenteeismRecords = new Absenteeism();
/*  724 */               absenteeism.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  725 */               absenteeism.setDate(DateFormat.getDatestrTime(nowdate));
/*  726 */               absenteeismRecords.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  727 */               absenteeismRecords.setDate(DateFormat.getDatestrTime(nowdate));
/*  728 */               absenteeisms.add(absenteeism);
/*  729 */               absenteeismRecord.add(absenteeismRecords);
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/*  745 */           if ("1".equals(attendSet.getIsOut())) {
/*  746 */             List attend0 = this.attendMapper.selectAttend0(DateFormat.getDatestr(nowdate), uid);
/*  747 */             if ((attend0 != null) && (attend0.size() > 0)) {
/*  748 */               Iterator attendIterator = attend0.iterator();
/*  749 */               while (attendIterator.hasNext()) {
/*  750 */                 Field field = new Field();
/*  751 */                 Attend attend1 = (Attend)attendIterator.next();
/*  752 */                 field.setDate(DateFormat.getDatestrTime(nowdate));
/*  753 */                 field.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/*  754 */                 field.setStr(attend1.getAddress());
/*  755 */                 field.setPhoneId(attend1.getPhoneId());
/*  756 */                 field.setCause(attend1.getRemark());
/*  757 */                 fields.add(field);
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/*  765 */           if ("1".equals(attendSet.getAtime1Setother())) {
/*  766 */             String status = "";
/*  767 */             Late latefirst = new Late();
/*  768 */             Normal normalfirst = new Normal();
/*  769 */             LeaveEarly leaveEarlyfirst = new LeaveEarly();
/*  770 */             LeaveEarly leaveEarlyfirstRecord = new LeaveEarly();
/*  771 */             Late latefirstRecord = new Late();
/*  772 */             Attend attend1 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid, "1");
/*  773 */             if (attend1 != null) {
/*  774 */               if ("1".equals(attend1.getType())) {
/*  775 */                 if ("1".equals(attendSet.getCommute1())) {
/*  776 */                   String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/*  777 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/*  778 */                     status = "迟到";
/*  779 */                     latefirst.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/*  780 */                     latefirst.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  781 */                     latefirst.setDate(DateFormat.getDatestrTime(nowdate));
/*      */ 
/*  783 */                     latefirst.setStr("迟到(" + DateFormat.parseMillisecone(attend1.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime1()).intValue()) + ")");
/*  784 */                     latefirst.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime1());
/*  785 */                     latefirstRecord.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/*  786 */                     latefirstRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  787 */                     latefirstRecord.setDate(DateFormat.getDatestrTime(nowdate));
/*  788 */                     latefirstRecord.setStr("迟到(" + DateFormat.parseMillisecone(attend1.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime1()).intValue()) + ")");
/*  789 */                     latefirstRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime1());
/*  790 */                     lates.add(latefirst);
/*  791 */                     lateRecord.add(latefirstRecord);
/*      */                   }
/*      */                   else
/*      */                   {
/*  795 */                     status = "正常";
/*  796 */                     normalfirst.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/*  797 */                     normalfirst.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  798 */                     normalfirst.setDate(DateFormat.getDatestrTime(nowdate));
/*  799 */                     normals.add(normalfirst);
/*      */                   }
/*      */                 }
/*      */                 else {
/*  803 */                   String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/*  804 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/*  805 */                     status = "早退";
/*  806 */                     leaveEarlyfirst.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/*  807 */                     leaveEarlyfirst.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  808 */                     leaveEarlyfirst.setDate(DateFormat.getDatestrTime(nowdate));
/*  809 */                     leaveEarlyfirst.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime1()).intValue() - attend1.getAtime().intValue()) + ")");
/*  810 */                     leaveEarlyfirst.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime1());
/*  811 */                     leaveEarlyfirstRecord.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/*  812 */                     leaveEarlyfirstRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  813 */                     leaveEarlyfirstRecord.setDate(DateFormat.getDatestrTime(nowdate));
/*  814 */                     leaveEarlyfirstRecord.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime1()).intValue() - attend1.getAtime().intValue()) + ")");
/*  815 */                     leaveEarlyfirstRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime1());
/*  816 */                     leaveEarlies.add(leaveEarlyfirst);
/*  817 */                     leaveEarlyRecord.add(leaveEarlyfirstRecord);
/*      */                   }
/*      */                   else
/*      */                   {
/*  821 */                     status = "正常";
/*  822 */                     normalfirst.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/*  823 */                     normalfirst.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  824 */                     normalfirst.setDate(DateFormat.getDatestrTime(nowdate));
/*  825 */                     normals.add(normalfirst);
/*      */                   }
/*      */                 }
/*      */               }
/*      */ 
/*      */             }
/*      */             else
/*      */             {
/*  833 */               status = "未签到";
/*  834 */               LackCard lackCardfirst = new LackCard();
/*  835 */               LackCard lackCardfirstRecord = new LackCard();
/*  836 */               lackCardfirst.setTime(attendSet.getAtime1());
/*  837 */               lackCardfirst.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  838 */               lackCardfirst.setDate(DateFormat.getDatestrTime(nowdate));
/*  839 */               lackCardfirstRecord.setTime(attendSet.getAtime1());
/*  840 */               lackCardfirstRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  841 */               lackCardfirstRecord.setDate(DateFormat.getDatestrTime(nowdate));
/*  842 */               lackCards.add(lackCardfirst);
/*  843 */               lackCardRecord.add(lackCardfirstRecord);
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/*  850 */           if ("1".equals(attendSet.getAtime2Setother())) {
/*  851 */             String status = "";
/*  852 */             Late latetwo = new Late();
/*  853 */             Normal normaltwo = new Normal();
/*  854 */             LeaveEarly leaveEarlytwo = new LeaveEarly();
/*  855 */             Late latetwoRecord = new Late();
/*  856 */             LeaveEarly leaveEarlytwoRecord = new LeaveEarly();
/*  857 */             Attend attend2 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid, "2");
/*  858 */             if (attend2 != null) {
/*  859 */               if ("2".equals(attend2.getType())) {
/*  860 */                 if ("1".equals(attendSet.getCommute2())) {
/*  861 */                   int a22 = DateFormat.getWYQTime(attendSet.getAtime2()).intValue();
/*  862 */                   if (attend2.getAtime().intValue() > DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) {
/*  863 */                     status = "迟到";
/*  864 */                     latetwo.setTime(DateFormat.getwyqStrTime(attend2.getAtime()));
/*  865 */                     latetwo.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  866 */                     latetwo.setDate(DateFormat.getDatestrTime(nowdate));
/*  867 */                     latetwo.setStr("迟到(" + DateFormat.parseMillisecone(attend2.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) + ")");
/*  868 */                     latetwo.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime2());
/*  869 */                     latetwoRecord.setTime(DateFormat.getwyqStrTime(attend2.getAtime()));
/*  870 */                     latetwoRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  871 */                     latetwoRecord.setDate(DateFormat.getDatestrTime(nowdate));
/*  872 */                     latetwoRecord.setStr("迟到(" + DateFormat.parseMillisecone(attend2.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) + ")");
/*  873 */                     latetwoRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime2());
/*  874 */                     lates.add(latetwo);
/*  875 */                     lateRecord.add(latetwoRecord);
/*      */                   }
/*      */                   else {
/*  878 */                     status = "正常";
/*  879 */                     normaltwo.setTime(DateFormat.getwyqStrTime(attend2.getAtime()));
/*  880 */                     normaltwo.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  881 */                     normaltwo.setDate(DateFormat.getDatestrTime(nowdate));
/*  882 */                     normals.add(normaltwo);
/*      */                   }
/*      */                 } else {
/*  885 */                   String a1 = DateFormat.getwyqStrTime(attend2.getAtime());
/*  886 */                   if (attend2.getAtime().intValue() < DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) {
/*  887 */                     status = "早退";
/*  888 */                     leaveEarlytwo.setTime(DateFormat.getwyqStrTime(attend2.getAtime()));
/*  889 */                     leaveEarlytwo.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  890 */                     leaveEarlytwo.setDate(DateFormat.getDatestrTime(nowdate));
/*  891 */                     leaveEarlytwo.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime2()).intValue() - attend2.getAtime().intValue()) + ")");
/*  892 */                     leaveEarlytwo.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime2());
/*  893 */                     leaveEarlytwoRecord.setTime(DateFormat.getwyqStrTime(attend2.getAtime()));
/*  894 */                     leaveEarlytwoRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  895 */                     leaveEarlytwoRecord.setDate(DateFormat.getDatestrTime(nowdate));
/*  896 */                     leaveEarlytwoRecord.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime2()).intValue() - attend2.getAtime().intValue()) + ")");
/*  897 */                     leaveEarlytwoRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime2());
/*  898 */                     leaveEarlies.add(leaveEarlytwo);
/*  899 */                     leaveEarlyRecord.add(leaveEarlytwoRecord);
/*      */                   }
/*      */                   else {
/*  902 */                     status = "正常";
/*  903 */                     normaltwo.setTime(DateFormat.getwyqStrTime(attend2.getAtime()));
/*  904 */                     normaltwo.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  905 */                     normaltwo.setDate(DateFormat.getDatestrTime(nowdate));
/*  906 */                     normals.add(normaltwo);
/*      */                   }
/*      */                 }
/*      */               }
/*      */ 
/*      */             }
/*      */             else
/*      */             {
/*  914 */               status = "未签到";
/*  915 */               LackCard lackCardtwo = new LackCard();
/*  916 */               LackCard lackCardtwoRecord = new LackCard();
/*  917 */               lackCardtwo.setTime(attendSet.getAtime2());
/*  918 */               lackCardtwo.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  919 */               lackCardtwo.setDate(DateFormat.getDatestrTime(nowdate));
/*  920 */               lackCardtwoRecord.setTime(attendSet.getAtime2());
/*  921 */               lackCardtwoRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  922 */               lackCardtwoRecord.setDate(DateFormat.getDatestrTime(nowdate));
/*  923 */               lackCards.add(lackCardtwo);
/*  924 */               lackCardRecord.add(lackCardtwoRecord);
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/*  930 */           if ("1".equals(attendSet.getAtime3Setother())) {
/*  931 */             String status = "";
/*  932 */             Late latethree = new Late();
/*  933 */             Normal normalthree = new Normal();
/*  934 */             LeaveEarly leaveEarlythree = new LeaveEarly();
/*  935 */             Late latethreeRecord = new Late();
/*  936 */             LeaveEarly leaveEarlythreeRecord = new LeaveEarly();
/*  937 */             Attend attend3 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid, "3");
/*  938 */             if (attend3 != null)
/*      */             {
/*  940 */               if ("3".equals(attend3.getType()))
/*      */               {
/*  942 */                 if ("1".equals(attendSet.getCommute2())) {
/*  943 */                   String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/*  944 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/*  945 */                     status = "迟到";
/*  946 */                     latethree.setTime(DateFormat.getwyqStrTime(attend3.getAtime()));
/*  947 */                     latethree.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  948 */                     latethree.setDate(DateFormat.getDatestrTime(nowdate));
/*  949 */                     latethree.setStr("迟到(" + DateFormat.parseMillisecone(attend3.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime3()).intValue()) + ")");
/*  950 */                     latethree.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime3());
/*  951 */                     latethreeRecord.setTime(DateFormat.getwyqStrTime(attend3.getAtime()));
/*  952 */                     latethreeRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  953 */                     latethreeRecord.setDate(DateFormat.getDatestrTime(nowdate));
/*  954 */                     latethreeRecord.setStr("迟到(" + DateFormat.parseMillisecone(attend3.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime3()).intValue()) + ")");
/*  955 */                     latethreeRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime3());
/*  956 */                     lates.add(latethree);
/*  957 */                     lateRecord.add(latethreeRecord);
/*      */                   }
/*      */                   else {
/*  960 */                     status = "正常";
/*  961 */                     normalthree.setTime(DateFormat.getwyqStrTime(attend3.getAtime()));
/*  962 */                     normalthree.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  963 */                     normalthree.setDate(DateFormat.getDatestrTime(nowdate));
/*  964 */                     normals.add(normalthree);
/*      */                   }
/*      */                 } else {
/*  967 */                   String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/*  968 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/*  969 */                     status = "早退";
/*  970 */                     leaveEarlythree.setTime(DateFormat.getwyqStrTime(attend3.getAtime()));
/*  971 */                     leaveEarlythree.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  972 */                     leaveEarlythree.setDate(DateFormat.getDatestrTime(nowdate));
/*  973 */                     leaveEarlythree.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime3()).intValue() - attend3.getAtime().intValue()) + ")");
/*  974 */                     leaveEarlythree.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime3());
/*  975 */                     leaveEarlythreeRecord.setTime(DateFormat.getwyqStrTime(attend3.getAtime()));
/*  976 */                     leaveEarlythreeRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  977 */                     leaveEarlythreeRecord.setDate(DateFormat.getDatestrTime(nowdate));
/*  978 */                     leaveEarlythreeRecord.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime3()).intValue() - attend3.getAtime().intValue()) + ")");
/*  979 */                     leaveEarlythreeRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime3());
/*  980 */                     leaveEarlies.add(leaveEarlythree);
/*  981 */                     leaveEarlyRecord.add(leaveEarlythreeRecord);
/*      */                   }
/*      */                   else {
/*  984 */                     status = "正常";
/*  985 */                     normalthree.setTime(DateFormat.getwyqStrTime(attend3.getAtime()));
/*  986 */                     normalthree.setWeek(DateCompute.getWeekOfDate(nowdate));
/*  987 */                     normalthree.setDate(DateFormat.getDatestrTime(nowdate));
/*  988 */                     normals.add(normalthree);
/*      */                   }
/*      */                 }
/*      */               }
/*      */ 
/*      */             }
/*      */             else
/*      */             {
/*  996 */               status = "未签到";
/*  997 */               LackCard lackCardthree = new LackCard();
/*  998 */               LackCard lackCardthreeRecord = new LackCard();
/*  999 */               lackCardthree.setTime(attendSet.getAtime3());
/* 1000 */               lackCardthree.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1001 */               lackCardthree.setDate(DateFormat.getDatestrTime(nowdate));
/* 1002 */               lackCardthreeRecord.setTime(attendSet.getAtime3());
/* 1003 */               lackCardthreeRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1004 */               lackCardthreeRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1005 */               lackCards.add(lackCardthree);
/* 1006 */               lackCardRecord.add(lackCardthreeRecord);
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 1012 */           if ("1".equals(attendSet.getAtime4Setother())) {
/* 1013 */             String status = "";
/* 1014 */             Late latefour = new Late();
/* 1015 */             Normal normalfour = new Normal();
/* 1016 */             LeaveEarly leaveEarlyfour = new LeaveEarly();
/* 1017 */             LeaveEarly leaveEarlyfourRecord = new LeaveEarly();
/* 1018 */             Late latefourRecord = new Late();
/* 1019 */             Attend attend4 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid, "4");
/* 1020 */             if (attend4 != null)
/*      */             {
/* 1022 */               if ("4".equals(attend4.getType()))
/*      */               {
/* 1024 */                 if ("1".equals(attendSet.getCommute4())) {
/* 1025 */                   String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 1026 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 1027 */                     status = "迟到";
/* 1028 */                     latefour.setTime(DateFormat.getwyqStrTime(attend4.getAtime()));
/* 1029 */                     latefour.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1030 */                     latefour.setDate(DateFormat.getDatestrTime(nowdate));
/* 1031 */                     latefour.setStr("迟到(" + DateFormat.parseMillisecone(attend4.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime4()).intValue()) + ")");
/* 1032 */                     latefour.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime4());
/* 1033 */                     latefourRecord.setTime(DateFormat.getwyqStrTime(attend4.getAtime()));
/* 1034 */                     latefourRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1035 */                     latefourRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1036 */                     latefourRecord.setStr("迟到(" + DateFormat.parseMillisecone(attend4.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime4()).intValue()) + ")");
/* 1037 */                     latefourRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime4());
/* 1038 */                     lates.add(latefour);
/* 1039 */                     lateRecord.add(latefourRecord);
/*      */                   }
/*      */                   else {
/* 1042 */                     status = "正常";
/* 1043 */                     normalfour.setTime(DateFormat.getwyqStrTime(attend4.getAtime()));
/* 1044 */                     normalfour.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1045 */                     normalfour.setDate(DateFormat.getDatestrTime(nowdate));
/* 1046 */                     normals.add(normalfour);
/*      */                   }
/*      */                 } else {
/* 1049 */                   String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 1050 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 1051 */                     status = "早退";
/* 1052 */                     leaveEarlyfour.setTime(DateFormat.getwyqStrTime(attend4.getAtime()));
/* 1053 */                     leaveEarlyfour.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1054 */                     leaveEarlyfour.setDate(DateFormat.getDatestrTime(nowdate));
/* 1055 */                     leaveEarlyfour.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime4()).intValue() - attend4.getAtime().intValue()) + ")");
/* 1056 */                     leaveEarlyfour.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime4());
/* 1057 */                     leaveEarlyfourRecord.setTime(DateFormat.getwyqStrTime(attend4.getAtime()));
/* 1058 */                     leaveEarlyfourRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1059 */                     leaveEarlyfourRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1060 */                     leaveEarlyfourRecord.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime4()).intValue() - attend4.getAtime().intValue()) + ")");
/* 1061 */                     leaveEarlyfourRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime4());
/* 1062 */                     leaveEarlies.add(leaveEarlyfour);
/* 1063 */                     leaveEarlyRecord.add(leaveEarlyfourRecord);
/*      */                   }
/*      */                   else
/*      */                   {
/* 1068 */                     status = "正常";
/* 1069 */                     normalfour.setTime(DateFormat.getwyqStrTime(attend4.getAtime()));
/* 1070 */                     normalfour.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1071 */                     normalfour.setDate(DateFormat.getDatestrTime(nowdate));
/* 1072 */                     normals.add(normalfour);
/*      */                   }
/*      */                 }
/*      */               }
/*      */               else {
/* 1077 */                 status = "未签到";
/* 1078 */                 LackCard lackCardfour = new LackCard();
/* 1079 */                 LackCard lackCardfourRecord = new LackCard();
/* 1080 */                 lackCardfour.setTime(attendSet.getAtime4());
/* 1081 */                 lackCardfour.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1082 */                 lackCardfour.setDate(DateFormat.getDatestrTime(nowdate));
/* 1083 */                 lackCardfourRecord.setTime(attendSet.getAtime4());
/* 1084 */                 lackCardfourRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1085 */                 lackCardfourRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1086 */                 lackCards.add(lackCardfour);
/* 1087 */                 lackCardRecord.add(lackCardfourRecord);
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 1096 */           if ("1".equals(attendSet.getAtime5Setother())) {
/* 1097 */             String status = "";
/* 1098 */             Late latefive = new Late();
/* 1099 */             Late latefiveRecord = new Late();
/* 1100 */             Normal normalfour = new Normal();
/* 1101 */             LeaveEarly leaveEarlyfive = new LeaveEarly();
/* 1102 */             LeaveEarly leaveEarlyfiveRecord = new LeaveEarly();
/* 1103 */             Attend attend5 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid, "5");
/* 1104 */             if (attend5 != null)
/*      */             {
/* 1106 */               if ("5".equals(attend5.getType()))
/*      */               {
/* 1108 */                 if ("1".equals(attendSet.getCommute5())) {
/* 1109 */                   String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 1110 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 1111 */                     status = "迟到";
/* 1112 */                     latefive.setTime(DateFormat.getwyqStrTime(attend5.getAtime()));
/* 1113 */                     latefive.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1114 */                     latefive.setDate(DateFormat.getDatestrTime(nowdate));
/* 1115 */                     latefive.setStr("迟到(" + DateFormat.parseMillisecone(attend5.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime5()).intValue()) + ")");
/* 1116 */                     latefive.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime5());
/* 1117 */                     latefiveRecord.setTime(DateFormat.getwyqStrTime(attend5.getAtime()));
/* 1118 */                     latefiveRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1119 */                     latefiveRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1120 */                     latefiveRecord.setStr("迟到(" + DateFormat.parseMillisecone(attend5.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime5()).intValue()) + ")");
/* 1121 */                     latefiveRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime5());
/* 1122 */                     lates.add(latefive);
/* 1123 */                     lateRecord.add(latefiveRecord);
/*      */                   }
/*      */                   else {
/* 1126 */                     status = "正常";
/* 1127 */                     normalfour.setTime(DateFormat.getwyqStrTime(attend5.getAtime()));
/* 1128 */                     normalfour.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1129 */                     normalfour.setDate(DateFormat.getDatestrTime(nowdate));
/* 1130 */                     normals.add(normalfour);
/*      */                   }
/*      */                 } else {
/* 1133 */                   String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 1134 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 1135 */                     status = "早退";
/* 1136 */                     leaveEarlyfive.setTime(DateFormat.getwyqStrTime(attend5.getAtime()));
/* 1137 */                     leaveEarlyfive.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1138 */                     leaveEarlyfive.setDate(DateFormat.getDatestrTime(nowdate));
/* 1139 */                     leaveEarlyfive.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime5()).intValue() - attend5.getAtime().intValue()) + ")");
/* 1140 */                     leaveEarlyfive.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime5());
/* 1141 */                     leaveEarlyfiveRecord.setTime(DateFormat.getwyqStrTime(attend5.getAtime()));
/* 1142 */                     leaveEarlyfiveRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1143 */                     leaveEarlyfiveRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1144 */                     leaveEarlyfiveRecord.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime5()).intValue() - attend5.getAtime().intValue()) + ")");
/* 1145 */                     leaveEarlyfiveRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime5());
/* 1146 */                     leaveEarlies.add(leaveEarlyfive);
/* 1147 */                     leaveEarlyRecord.add(leaveEarlyfiveRecord);
/*      */                   }
/*      */                   else {
/* 1150 */                     status = "正常";
/* 1151 */                     normalfour.setTime(DateFormat.getwyqStrTime(attend5.getAtime()));
/* 1152 */                     normalfour.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1153 */                     normalfour.setDate(DateFormat.getDatestrTime(nowdate));
/* 1154 */                     normals.add(normalfour);
/*      */                   }
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 1160 */                 status = "未签到";
/* 1161 */                 LackCard lackCardfive = new LackCard();
/* 1162 */                 LackCard lackCardfiveRecord = new LackCard();
/* 1163 */                 lackCardfive.setTime(attendSet.getAtime5());
/* 1164 */                 lackCardfive.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1165 */                 lackCardfive.setDate(DateFormat.getDatestrTime(nowdate));
/* 1166 */                 lackCardfiveRecord.setTime(attendSet.getAtime5());
/* 1167 */                 lackCardfiveRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1168 */                 lackCardfiveRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1169 */                 lackCards.add(lackCardfive);
/* 1170 */                 lackCardRecord.add(lackCardfiveRecord);
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 1179 */           if ("1".equals(attendSet.getAtime6Setother())) {
/* 1180 */             String status = "";
/* 1181 */             Late latesix = new Late();
/* 1182 */             Late latesixRecord = new Late();
/* 1183 */             Normal normalsix = new Normal();
/* 1184 */             LeaveEarly leaveEarlysix = new LeaveEarly();
/* 1185 */             LeaveEarly leaveEarlysixRecord = new LeaveEarly();
/* 1186 */             Attend attend6 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid, "6");
/* 1187 */             if (attend6 != null)
/*      */             {
/* 1189 */               if ("6".equals(attend6.getType()))
/*      */               {
/* 1191 */                 if ("1".equals(attendSet.getCommute6())) {
/* 1192 */                   String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 1193 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 1194 */                     status = "迟到";
/* 1195 */                     latesix.setTime(DateFormat.getwyqStrTime(attend6.getAtime()));
/* 1196 */                     latesix.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1197 */                     latesix.setDate(DateFormat.getDatestrTime(nowdate));
/* 1198 */                     latesix.setStr("迟到(" + DateFormat.parseMillisecone(attend6.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime6()).intValue()) + ")");
/* 1199 */                     latesix.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime6());
/* 1200 */                     latesixRecord.setTime(DateFormat.getwyqStrTime(attend6.getAtime()));
/* 1201 */                     latesixRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1202 */                     latesixRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1203 */                     latesixRecord.setStr("迟到(" + DateFormat.parseMillisecone(attend6.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime6()).intValue()) + ")");
/* 1204 */                     latesixRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime6());
/* 1205 */                     lates.add(latesix);
/* 1206 */                     lateRecord.add(latesixRecord);
/*      */                   }
/*      */                   else {
/* 1209 */                     status = "正常";
/* 1210 */                     normalsix.setTime(DateFormat.getwyqStrTime(attend6.getAtime()));
/* 1211 */                     normalsix.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1212 */                     normalsix.setDate(DateFormat.getDatestrTime(nowdate));
/* 1213 */                     normals.add(normalsix);
/*      */                   }
/*      */                 } else {
/* 1216 */                   String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 1217 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 1218 */                     status = "早退";
/* 1219 */                     leaveEarlysix.setTime(DateFormat.getwyqStrTime(attend6.getAtime()));
/* 1220 */                     leaveEarlysix.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1221 */                     leaveEarlysix.setDate(DateFormat.getDatestrTime(nowdate));
/* 1222 */                     leaveEarlysix.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime6()).intValue() - attend6.getAtime().intValue()) + ")");
/* 1223 */                     leaveEarlysix.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime6());
/* 1224 */                     leaveEarlysixRecord.setTime(DateFormat.getwyqStrTime(attend6.getAtime()));
/* 1225 */                     leaveEarlysixRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1226 */                     leaveEarlysixRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1227 */                     leaveEarlysixRecord.setStr("早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime6()).intValue() - attend6.getAtime().intValue()) + ")");
/* 1228 */                     leaveEarlysixRecord.setAtime(DateFormat.getDatestr(nowdate) + "  " + attendSet.getAtime6());
/* 1229 */                     leaveEarlies.add(leaveEarlysix);
/* 1230 */                     leaveEarlyRecord.add(leaveEarlysixRecord);
/*      */                   }
/*      */                   else {
/* 1233 */                     status = "正常";
/* 1234 */                     normalsix.setTime(DateFormat.getwyqStrTime(attend6.getAtime()));
/* 1235 */                     normalsix.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1236 */                     normalsix.setDate(DateFormat.getDatestrTime(nowdate));
/* 1237 */                     normals.add(normalsix);
/*      */                   }
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 1243 */                 status = "未签到";
/* 1244 */                 LackCard lackCardsix = new LackCard();
/* 1245 */                 LackCard lackCardsixRecord = new LackCard();
/* 1246 */                 lackCardsix.setTime(attendSet.getAtime6());
/* 1247 */                 lackCardsix.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1248 */                 lackCardsix.setDate(DateFormat.getDatestrTime(nowdate));
/* 1249 */                 lackCardsixRecord.setTime(attendSet.getAtime6());
/* 1250 */                 lackCardsixRecord.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1251 */                 lackCardsixRecord.setDate(DateFormat.getDatestrTime(nowdate));
/* 1252 */                 lackCards.add(lackCardsix);
/* 1253 */                 lackCardRecord.add(lackCardsixRecord);
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 1261 */           if (normals.size() >= xqhbt) {
/* 1262 */             normalNew.setWeek(DateCompute.getWeekOfDate(nowdate));
/* 1263 */             normalNew.setDate(DateFormat.getDatestrTime(nowdate));
/* 1264 */             normalNews.add(normalNew);
/*      */           }
/*      */ 
/* 1267 */           normals.clear();
/*      */         }
/*      */ 
/* 1271 */         List attendList = new ArrayList();
/* 1272 */         Attend attendfirst = new Attend();
/* 1273 */         attendfirst.setSname("迟到记录");
/* 1274 */         attendfirst.setRemarksList(lateRecord);
/*      */ 
/* 1277 */         Attend attendtwo = new Attend();
/* 1278 */         attendtwo.setSname("早退记录");
/* 1279 */         attendtwo.setRemarksList(leaveEarlyRecord);
/* 1280 */         Attend attendthree = new Attend();
/* 1281 */         attendthree.setSname("缺卡记录");
/* 1282 */         attendthree.setRemarksList(lackCardRecord);
/* 1283 */         Attend attendfour = new Attend();
/* 1284 */         attendfour.setSname("旷工记录");
/* 1285 */         attendfour.setRemarksList(absenteeismRecord);
/* 1286 */         attendList.add(attendfirst);
/* 1287 */         attendList.add(attendtwo);
/* 1288 */         attendList.add(attendthree);
/* 1289 */         attendList.add(attendfour);
/* 1290 */         Attend attend1 = new Attend();
/* 1291 */         attend1.setSname("出勤天数");
/* 1292 */         if (attendances.size() > 0) {
/* 1293 */           attend1.setNum(attendances.size() + "");
/* 1294 */           attend1.setState("1");
/*      */         } else {
/* 1296 */           attend1.setNum("0");
/* 1297 */           attend1.setState("0");
/*      */         }
/* 1299 */         attend1.setType("天");
/* 1300 */         attend1.setRemarksList(attendances);
/*      */ 
/* 1302 */         Attend attend2 = new Attend();
/* 1303 */         attend2.setSname("正常打卡");
/* 1304 */         if (normalNews.size() > 0) {
/* 1305 */           attend2.setNum(normalNews.size() + "");
/* 1306 */           attend2.setState("1");
/*      */         } else {
/* 1308 */           attend2.setNum("0");
/* 1309 */           attend2.setState("0");
/*      */         }
/* 1311 */         attend2.setType("天");
/* 1312 */         attend2.setRemarksList(normalNews);
/* 1313 */         Attend attend3 = new Attend();
/* 1314 */         attend3.setSname("外勤打卡");
/* 1315 */         if (fields.size() > 0) {
/* 1316 */           attend3.setNum(fields.size() + "");
/* 1317 */           attend3.setState("1");
/*      */         } else {
/* 1319 */           attend3.setNum("0");
/* 1320 */           attend3.setState("0");
/*      */         }
/* 1322 */         attend3.setType("次");
/* 1323 */         attend3.setRemarksList(fields);
/* 1324 */         Attend attend4 = new Attend();
/* 1325 */         attend4.setSname("早退");
/* 1326 */         if (leaveEarlies.size() > 0) {
/* 1327 */           attend4.setNum(leaveEarlies.size() + "");
/* 1328 */           attend4.setState("1");
/*      */         } else {
/* 1330 */           attend4.setNum("0");
/* 1331 */           attend4.setState("0");
/*      */         }
/* 1333 */         attend4.setType("次");
/* 1334 */         attend4.setRemarksList(leaveEarlies);
/* 1335 */         Attend attend5 = new Attend();
/* 1336 */         attend5.setSname("缺卡");
/* 1337 */         if (lackCards.size() > 0) {
/* 1338 */           attend5.setNum(lackCards.size() + "");
/* 1339 */           attend5.setState("1");
/*      */         } else {
/* 1341 */           attend5.setNum("0");
/* 1342 */           attend5.setState("0");
/*      */         }
/* 1344 */         attend5.setType("次");
/* 1345 */         attend5.setRemarksList(lackCards);
/* 1346 */         Attend attend6 = new Attend();
/* 1347 */         attend6.setSname("迟到");
/* 1348 */         if (lates.size() > 0) {
/* 1349 */           attend6.setNum(lates.size() + "");
/* 1350 */           attend6.setState("1");
/*      */         } else {
/* 1352 */           attend6.setNum("0");
/* 1353 */           attend6.setState("0");
/*      */         }
/* 1355 */         attend6.setType("次");
/* 1356 */         attend6.setRemarksList(lates);
/* 1357 */         Attend attend7 = new Attend();
/* 1358 */         attend7.setSname("旷工");
/* 1359 */         if (absenteeisms.size() > 0) {
/* 1360 */           attend7.setNum(absenteeisms.size() + "");
/* 1361 */           attend7.setState("1");
/*      */         } else {
/* 1363 */           attend7.setNum("0");
/* 1364 */           attend7.setState("0");
/*      */         }
/* 1366 */         attend7.setType("天");
/* 1367 */         attend7.setRemarksList(absenteeisms);
/* 1368 */         Attend attend8 = new Attend();
/* 1369 */         attend8.setSname("设备异常");
/* 1370 */         if (unitExceptionList.size() > 0) {
/* 1371 */           attend8.setNum(unitExceptionList.size() + "");
/* 1372 */           attend8.setState("1");
/*      */         } else {
/* 1374 */           attend8.setNum("0");
/* 1375 */           attend8.setState("0");
/*      */         }
/* 1377 */         attend8.setType("次");
/* 1378 */         attend8.setRemarksList(unitExceptionList);
/* 1379 */         Attend leave = new Attend();
/* 1380 */         leave.setSname("请假");
/* 1381 */         if (attendLeaveList.size() > 0) {
/* 1382 */           leave.setNum(attendLeaveList.size() + "");
/* 1383 */           leave.setState("1");
/*      */         } else {
/* 1385 */           leave.setNum("0");
/* 1386 */           leave.setState("0");
/*      */         }
/* 1388 */         leave.setType("次");
/* 1389 */         leave.setRemarksList(attendLeaveList);
/* 1390 */         Attend overtime = new Attend();
/* 1391 */         overtime.setSname("加班");
/* 1392 */         if (attendanceOvertimeList.size() > 0) {
/* 1393 */           overtime.setNum(attendanceOvertimeList.size() + "");
/* 1394 */           overtime.setState("1");
/*      */         } else {
/* 1396 */           overtime.setNum("0");
/* 1397 */           overtime.setState("0");
/*      */         }
/* 1399 */         overtime.setType("次");
/* 1400 */         overtime.setRemarksList(attendanceOvertimeList);
/*      */ 
/* 1402 */         Attend goOut = new Attend();
/* 1403 */         goOut.setSname("外出");
/* 1404 */         if (attendOutList.size() > 0) {
/* 1405 */           goOut.setNum(attendOutList.size() + "");
/* 1406 */           goOut.setState("1");
/*      */         } else {
/* 1408 */           goOut.setNum("0");
/* 1409 */           goOut.setState("0");
/*      */         }
/* 1411 */         goOut.setType("次");
/* 1412 */         goOut.setRemarksList(attendOutList);
/* 1413 */         Attend evection = new Attend();
/* 1414 */         evection.setSname("出差");
/* 1415 */         if (attendEvectionList.size() > 0) {
/* 1416 */           evection.setNum(attendEvectionList.size() + "");
/* 1417 */           evection.setState("1");
/*      */         } else {
/* 1419 */           evection.setNum("0");
/* 1420 */           evection.setState("0");
/*      */         }
/* 1422 */         evection.setType("次");
/* 1423 */         evection.setRemarksList(attendEvectionList);
/*      */ 
/* 1425 */         workList.add(attend1);
/* 1426 */         workList.add(attend2);
/* 1427 */         workList.add(attend3);
/* 1428 */         workList.add(attend4);
/* 1429 */         workList.add(attend5);
/* 1430 */         workList.add(attend6);
/* 1431 */         workList.add(attend7);
/* 1432 */         workList.add(attend8);
/* 1433 */         workList.add(leave);
/* 1434 */         workList.add(overtime);
/* 1435 */         workList.add(goOut);
/* 1436 */         workList.add(evection);
/* 1437 */         attend.setAttendList(workList);
/* 1438 */         attend.setList(attendList);
/* 1439 */         attend.setType(attendSet.getTitle());
/* 1440 */         wrappers.setFlag(true);
/* 1441 */         wrappers.setStatus(true);
/* 1442 */         wrappers.setData(attend);
/* 1443 */         wrappers.setMsg("更新成功");
/*      */       }
/*      */       else {
/* 1446 */         wrappers.setFlag(false);
/* 1447 */         wrappers.setStatus(true);
/* 1448 */         wrappers.setMsg("更新失败");
/*      */       }
/*      */     }
/*      */     else {
/* 1452 */       wrappers.setFlag(false);
/* 1453 */       wrappers.setStatus(true);
/* 1454 */       wrappers.setMsg("更新失败");
/*      */     }
/*      */ 
/* 1458 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public List<BaseAttend> myAttendUnitException(String start, String end, String uid, HttpServletRequest request) {
/* 1462 */     Users users = (Users)SessionUtils.getSessionInfo(request.getSession(), Users.class, new Users());
/*      */ 
/* 1464 */     Map map = new HashMap();
/* 1465 */     map.put("strat", start);
/* 1466 */     map.put("end", end);
/* 1467 */     map.put("uid", uid);
/* 1468 */     List<Attend> attendList = this.attendMapper.queryCountPhone(map);
/* 1469 */     List<Integer> attendList1 = new ArrayList<Integer>();
/* 1470 */     List<Attend> attendList3 = new ArrayList<Attend>();
/* 1471 */     List unitExceptionList = new ArrayList();
/*      */ 
/* 1473 */     Attend attendNew = new Attend();
/*      */     Integer a1;
/* 1477 */     for (Attend attend1 : attendList) {
/* 1478 */       attendList1.add(attend1.getCount());
/* 1479 */       a1 = attend1.getCount();
/*      */     } 
/*      */     double b;
              String phone;
/* 1482 */     if ((attendList1 != null) && (attendList1.size() > 0))
/*      */     {
/* 1485 */       Integer integer = (Integer)Collections.max(attendList1);
/* 1486 */       int i = integer.intValue();
/* 1487 */       b = i * 0.3D;
/* 1488 */       for (Attend attend1 : attendList)
/* 1489 */         if (b >= attend1.getCount().intValue())
/*      */         {
/* 1493 */           phone = attend1.getPhoneId();
/* 1494 */           Map maps = new HashMap();
/* 1495 */           maps.put("phone", phone);
/* 1496 */           maps.put("strat", start);
/* 1497 */           maps.put("end", end);
/* 1498 */           List<Attend> attendList2 = this.attendMapper.queryAttendPhone(maps);
/* 1499 */           for (Attend attend11 : attendList2) {
/* 1500 */             UnitException unitException = new UnitException();
/* 1501 */             unitException.setDate(DateFormat.getDatestrTime(attend11.getDate()));
/* 1502 */             unitException.setTime(DateFormat.getwyqStrTime(attend11.getAtime()));
/* 1503 */             unitException.setPhoneId(attend11.getPhoneId());
/* 1504 */             unitException.setAtime(DateFormat.getDatestrTime(attend11.getDate()) + "    " + DateFormat.getwyqStrTime(attend11.getAtime()));
/* 1505 */             Map map1 = new HashMap();
/*      */ 
/* 1509 */             String msg = "";
/* 1510 */             if (!users.getUid().equals(attend11.getUid())) {
/* 1511 */               String name = this.usersMapper.getUsernameById(attend11.getUid().intValue());
/* 1512 */               msg = "疑似" + name + "代签";
/*      */             } else {
/* 1514 */               msg = "新设备" + phone;
/*      */             }
/* 1516 */             unitException.setStr(msg);
/* 1517 */             unitExceptionList.add(unitException);
/*      */           }
/*      */         }
/*      */     }
/*      */     
/* 1524 */     return unitExceptionList;
/*      */   }
/*      */ 
/*      */   public String companyAttendanceException(String date, String uid, String type)
/*      */     throws ParseException
/*      */   {
/* 1530 */     String[] date1 = date.split("-");
/* 1531 */     String start = date1[0] + "-" + date1[1];
/* 1532 */     SimpleDateFormat df = new SimpleDateFormat("yyyy-MM");
/* 1533 */     SimpleDateFormat matter2 = new SimpleDateFormat("yyyy-MM-dd");
/* 1534 */     Date dt = new Date();
/* 1535 */     String a11 = df.format(dt);
/* 1536 */     String stratDate = "";
/* 1537 */     String endDate = "";
/* 1538 */     if (start.equals(a11)) {
/* 1539 */       stratDate = date + "-01";
/* 1540 */       endDate = matter2.format(dt);
/*      */     } else {
/* 1542 */       Date date2 = df.parse(start);
/* 1543 */       Calendar calendar = Calendar.getInstance();
/* 1544 */       calendar.setTime(date2);
/* 1545 */       int first1 = calendar.getActualMinimum(5);
/* 1546 */       int last1 = calendar.getActualMaximum(5);
/* 1547 */       stratDate = start + "-01";
/* 1548 */       endDate = start + "-" + last1;
/*      */     }
/*      */ 
/* 1551 */     Map map = new HashMap();
/* 1552 */     map.put("strat", stratDate);
/* 1553 */     map.put("end", endDate);
/* 1554 */     map.put("uid", uid);
/* 1555 */     List<Attend> attendList = this.attendMapper.queryCountPhone(map);
/* 1556 */     List attendList1 = new ArrayList();
/*      */ 
/* 1558 */     List unitExceptionList = new ArrayList();
/*      */ 
/* 1560 */     Attend attendNew = new Attend();
/*      */     Integer a1;
/* 1562 */     for (Attend attend1 : attendList) {
/* 1563 */       attendList1.add(attend1.getCount());
/* 1564 */       a1 = attend1.getCount();
/*      */     }
/*      */     
/*      */     double b;
/* 1566 */     if ((attendList1 != null) && (attendList1.size() > 0)) {
/* 1567 */       Integer integer = (Integer)Collections.max(attendList1);
/* 1568 */       int i = integer.intValue();
/* 1569 */       b = i * 0.3D;
/* 1570 */       for (Attend attend1 : attendList) {
/* 1571 */         if (b >= attend1.getCount().intValue())
/*      */         {
/* 1575 */           String phone = attend1.getPhoneId();
/* 1576 */           Map maps = new HashMap();
/* 1577 */           maps.put("phone", phone);
/* 1578 */           maps.put("date", date);
/* 1579 */           maps.put("type", type);
/*      */ 
/* 1581 */           List attendListNew = this.attendMapper.queryAttendPhoneId(maps);
/* 1582 */           Iterator attendIterator = attendListNew.iterator();
/* 1583 */           if (attendIterator.hasNext()) {
/* 1584 */             Attend attend = (Attend)attendIterator.next();
/* 1585 */             if (attend != null) {
/* 1586 */               String msg = "";
/* 1587 */               if (!uid.equals(attend.getUid().toString())) {
/* 1588 */                 String name = this.usersMapper.getUsernameById(attend.getUid().intValue());
/* 1589 */                 msg = "疑似" + name + "代签";
/*      */               } else {
/* 1591 */                 msg = "新设备" + phone;
/*      */               }
/*      */ 
/* 1594 */               return msg;
/*      */             }
/* 1596 */             return null;
/*      */           }
/*      */         }
/*      */       }
/*      */ 
/*      */     }
/*      */ 
/* 1603 */     return null;
/*      */   }
/*      */ 
/*      */   public BaseWrapper companyAttendance(String date)
/*      */   {
/* 1609 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/*      */     try {
/* 1611 */       Map maps = new HashMap();
/* 1612 */       List usersList = this.usersMapper.getAlluser(maps);
/* 1613 */       Iterator usersIterator = usersList.iterator();
/* 1614 */       List normal = new ArrayList();
/* 1615 */       List normalyichang = new ArrayList();
/* 1616 */       List closed = new ArrayList();
/* 1617 */       List closedyichang = new ArrayList();
/* 1618 */       List notSign = new ArrayList();
/* 1619 */       List notOut = new ArrayList();
/* 1620 */       List leaveEarly = new ArrayList();
/* 1621 */       List late = new ArrayList();
/* 1622 */       List filds = new ArrayList();
/* 1623 */       List notSignNumbers = new ArrayList();
/* 1624 */       List notOutNumbers = new ArrayList();
/* 1625 */       List leaveEarlyNumbers = new ArrayList();
/* 1626 */       List lateNumbers = new ArrayList();
/*      */ 
/* 1628 */       List leaves = new ArrayList();
/* 1629 */       List waichu = new ArrayList();
/* 1630 */       List chucha = new ArrayList();
/*      */ 
/* 1632 */       int chuqinRenshu = 0;
/* 1633 */       while (usersIterator.hasNext()) {
/* 1634 */         Users users = (Users)usersIterator.next();
/* 1635 */         BaseSupplement normalB = new BaseSupplement();
/* 1636 */         BaseSupplement normalyichangB = new BaseSupplement();
/* 1637 */         BaseSupplement closedB = new BaseSupplement();
/* 1638 */         BaseSupplement closedyichangB = new BaseSupplement();
/* 1639 */         BaseSupplement lateNumber = new BaseSupplement();
/* 1640 */         BaseSupplement leaveEarlyNumber = new BaseSupplement();
/* 1641 */         BaseSupplement notSignNumber = new BaseSupplement();
/* 1642 */         BaseSupplement notOutNumber = new BaseSupplement();
/*      */ 
/* 1644 */         Integer uid = users.getUid();
/* 1645 */         Map mapss = new HashMap();
/* 1646 */         mapss.put("uid", uid);
/* 1647 */         mapss.put("date", date);
/* 1648 */         UserExt userExt = this.userExtMapper.queryUserExt(uid.toString());
/* 1649 */         if (userExt != null) {
/* 1650 */           Date dateTime = new Date();
/* 1651 */           SimpleDateFormat format = new SimpleDateFormat("HH:mm:ss");
/* 1652 */           String time = format.format(dateTime);
/* 1653 */           Date dateTime1 = new Date();
/* 1654 */           SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
/* 1655 */           String time1 = format1.format(dateTime1);
/* 1656 */           AttendSet attendSet = this.attendSetMapper.queryAttendSetId(Integer.valueOf(userExt.getDutyType().shortValue()));
/* 1657 */           if (attendSet != null) {
/* 1658 */             String[] str1 = attendSet.getAtime1Set().split("\\|");
/* 1659 */             attendSet.setAtime1Setother(str1[0]);
/* 1660 */             attendSet.setCommute1(str1[1]);
/* 1661 */             String[] str2 = attendSet.getAtime2Set().split("\\|");
/* 1662 */             attendSet.setAtime2Setother(str2[0]);
/* 1663 */             attendSet.setCommute2(str2[1]);
/* 1664 */             String[] str3 = attendSet.getAtime3Set().split("\\|");
/* 1665 */             attendSet.setAtime3Setother(str3[0]);
/* 1666 */             attendSet.setCommute3(str3[1]);
/* 1667 */             String[] str4 = attendSet.getAtime4Set().split("\\|");
/* 1668 */             attendSet.setAtime4Setother(str4[0]);
/* 1669 */             attendSet.setCommute4(str4[1]);
/* 1670 */             String[] str5 = attendSet.getAtime5Set().split("\\|");
/* 1671 */             attendSet.setAtime5Setother(str5[0]);
/* 1672 */             attendSet.setCommute5(str5[1]);
/* 1673 */             String[] str6 = attendSet.getAtime6Set().split("\\|");
/* 1674 */             attendSet.setAtime6Setother(str6[0]);
/* 1675 */             attendSet.setCommute6(str6[1]);
/*      */ 
/* 1677 */             if ("1".equals(attendSet.getIsOut())) {
/* 1678 */               List attendList = new ArrayList();
/* 1679 */               List attend0 = this.attendMapper.selectAttend0(date, uid.toString());
/* 1680 */               if ((attend0 != null) && (attend0.size() > 0)) {
/* 1681 */                 BaseSupplement fild = new BaseSupplement();
/* 1682 */                 fild.setUid(uid.toString());
/* 1683 */                 fild.setName(users.getName());
/* 1684 */                 fild.setAvatar(users.getAvatar());
/* 1685 */                 if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1686 */                   Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 1688 */                   fild.setDept(department.getDeptName());
/*      */                 } else {
/* 1690 */                   fild.setDept("未指定部门");
/*      */                 }
/*      */ 
/* 1694 */                 fild.setStr(attend0.size() + "次外勤记录");
/* 1695 */                 Iterator attendIterator = attend0.iterator();
/* 1696 */                 while (attendIterator.hasNext()) {
/* 1697 */                   Attend attend = (Attend)attendIterator.next();
/* 1698 */                   Attend attendwaiqin = new Attend();
/* 1699 */                   attendwaiqin.setTime(DateFormat.getwyqStrTime(attend.getAtime()));
/* 1700 */                   String[] a2 = attend.getAddress().split(",");
/* 1701 */                   attendwaiqin.setAddress(a2[(a2.length - 1)]);
/* 1702 */                   attendList.add(attendwaiqin);
/*      */                 }
/* 1704 */                 fild.setCishu(attendList);
/* 1705 */                 filds.add(fild);
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/* 1710 */             List attendLeaveList = this.attendLeaveMapper.selectAttendLeaveModify(users.getUserId(), date);
/* 1711 */             if ((attendLeaveList.size() > 0) && (attendLeaveList != null)) {
/* 1712 */               Iterator attendIterator = attendLeaveList.iterator();
/* 1713 */               while (attendIterator.hasNext()) {
/* 1714 */                 AttendLeave attendLeave = (AttendLeave)attendIterator.next();
/* 1715 */                 BaseSupplement attendLeaveqingjia = new BaseSupplement();
/* 1716 */                 attendLeaveqingjia.setUid(uid.toString());
/* 1717 */                 attendLeaveqingjia.setName(users.getName());
/* 1718 */                 attendLeaveqingjia.setAvatar(users.getAvatar());
/* 1719 */                 if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1720 */                   Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 1722 */                   attendLeaveqingjia.setDept(department.getDeptName());
/*      */                 } else {
/* 1724 */                   attendLeaveqingjia.setDept("未指定部门");
/*      */                 }
/*      */ 
/* 1727 */                 attendLeaveqingjia.setStr(DateFormat.getStrDate(attendLeave.getLeaveDate1()) + "至" + DateFormat.getStrDate(attendLeave.getLeaveDate2()));
/* 1728 */                 attendLeaveqingjia.setContent("原因:" + attendLeave.getLeaveType());
/* 1729 */                 attendLeaveqingjia.setFlag(attendLeave.getLeaveType2());
/* 1730 */                 leaves.add(attendLeaveqingjia);
/*      */               }
/*      */             }
/* 1733 */             List attendOutList = this.attendOutMapper.queryAttendOut(users.getUserId(), date);
/* 1734 */             if ((attendOutList.size() > 0) && (attendOutList != null)) {
/* 1735 */               Iterator attendOutIterator = attendOutList.iterator();
/* 1736 */               while (attendOutIterator.hasNext()) {
/* 1737 */                 AttendOut attendOut = (AttendOut)attendOutIterator.next();
/* 1738 */                 BaseSupplement attendOutwaichu = new BaseSupplement();
/* 1739 */                 attendOutwaichu.setUid(uid.toString());
/* 1740 */                 attendOutwaichu.setName(users.getName());
/* 1741 */                 attendOutwaichu.setAvatar(users.getAvatar());
/* 1742 */                 if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1743 */                   Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 1745 */                   attendOutwaichu.setDept(department.getDeptName());
/*      */                 } else {
/* 1747 */                   attendOutwaichu.setDept("未指定部门");
/*      */                 }
/*      */ 
/* 1750 */                 attendOutwaichu.setStr(attendOut.getOutTime1() + "至" + attendOut.getOutTime2());
/* 1751 */                 attendOutwaichu.setContent("原因:" + attendOut.getOutType());
/* 1752 */                 attendOutwaichu.setFlag(attendOut.getStatus());
/*      */ 
/* 1754 */                 waichu.add(attendOutwaichu);
/*      */               }
/*      */             }
/* 1757 */             List attendEvections = this.attendEvectionMapper.selectAttendEvectionModify(users.getUserId(), date);
/* 1758 */             if ((attendEvections.size() > 0) && (attendEvections != null)) {
/* 1759 */               Iterator attendEvectionIterator = attendEvections.iterator();
/*      */ 
/* 1761 */               while (attendEvectionIterator.hasNext()) {
/* 1762 */                 AttendEvection attendEvection = (AttendEvection)attendEvectionIterator.next();
/* 1763 */                 BaseSupplement attendEvectionchucha = new BaseSupplement();
/* 1764 */                 attendEvectionchucha.setUid(uid.toString());
/* 1765 */                 attendEvectionchucha.setName(users.getName());
/* 1766 */                 attendEvectionchucha.setAvatar(users.getAvatar());
/* 1767 */                 if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1768 */                   Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 1770 */                   attendEvectionchucha.setDept(department.getDeptName());
/*      */                 } else {
/* 1772 */                   attendEvectionchucha.setDept("未指定部门");
/*      */                 }
/*      */ 
/* 1776 */                 attendEvectionchucha.setStr(DateFormat.getStrDate(attendEvection.getEvectionDate1()) + "至" + DateFormat.getStrDate(attendEvection.getEvectionDate2()));
/* 1777 */                 attendEvectionchucha.setContent("原因:" + attendEvection.getReason() + "地点" + attendEvection.getEvectionDest());
/* 1778 */                 attendEvectionchucha.setFlag(attendEvection.getStatus());
/* 1779 */                 chucha.add(attendEvectionchucha);
/*      */               }
/*      */             }
/*      */ 
/* 1783 */             Map chuqinmap = new HashMap();
/* 1784 */             chuqinmap.put("uid", uid);
/* 1785 */             chuqinmap.put("date", date);
/* 1786 */             List attendList111 = this.attendMapper.selectAttendList(chuqinmap);
/* 1787 */             if ((attendList111 != null) && (attendList111.size() > 0)) {
/* 1788 */               chuqinRenshu++;
/*      */             }
/*      */ 
/* 1792 */             if (("1".equals(attendSet.getAtime1Setother())) && (
/* 1793 */               (DateFormat.getDateTimes(attendSet.getAtime1()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))) {
/* 1794 */               String status = "";
/* 1795 */               if ("1".equals(attendSet.getCommute1())) {
/* 1796 */                 Attend attend1 = this.attendMapper.selectAttendAll(date, uid.toString(), "1");
/* 1797 */                 if (attend1 != null) {
/* 1798 */                   String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/* 1799 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/* 1800 */                     status = "迟到";
/* 1801 */                     BaseSupplement latefirst = new BaseSupplement();
/* 1802 */                     latefirst.setUid(uid.toString());
/* 1803 */                     latefirst.setName(users.getName());
/* 1804 */                     latefirst.setAvatar(users.getAvatar());
/* 1805 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1806 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 1807 */                       latefirst.setDept(department.getDeptName());
/*      */                     } else {
/* 1809 */                       latefirst.setDept("未指定部门");
/*      */                     }
/*      */ 
/* 1816 */                     latefirst.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend1.getAtime()) + "迟到(" + DateFormat.parseMillisecone(attend1.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime1()).intValue()) + ")");
/*      */ 
/* 1818 */                     lateNumber.setStr("签到时间为：" + attendSet.getAtime1() + DateFormat.getwyqStrTime(attend1.getAtime()) + DateFormat.getwyqStrTime(Integer.valueOf(attend1.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime1()).intValue())));
/*      */ 
/* 1820 */                     late.add(latefirst);
/*      */                   }
/*      */                   else {
/* 1823 */                     status = "正常";
/* 1824 */                     String msg = companyAttendanceException(date, uid.toString(), "1");
/* 1825 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 1826 */                       normalyichangB.setUid(uid.toString());
/* 1827 */                       normalyichangB.setName(users.getName());
/* 1828 */                       normalyichangB.setAvatar(users.getAvatar());
/* 1829 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1830 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 1831 */                         normalyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 1833 */                         normalyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 1836 */                       normalyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 1839 */                       normalB.setUid(uid.toString());
/* 1840 */                       normalB.setName(users.getName());
/* 1841 */                       normalB.setAvatar(users.getAvatar());
/* 1842 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1843 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 1844 */                         normalB.setDept(department.getDeptName());
/*      */                       } else {
/* 1846 */                         normalB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 1851 */                       normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend1.getAtime()));
/*      */                     }
/*      */                   }
/*      */ 
/*      */                 }
/*      */                 else
/*      */                 {
/* 1858 */                   status = "未签到";
/* 1859 */                   BaseSupplement notSignfirst = new BaseSupplement();
/* 1860 */                   notSignfirst.setUid(uid.toString());
/* 1861 */                   notSignfirst.setName(users.getName());
/* 1862 */                   notSignfirst.setAvatar(users.getAvatar());
/* 1863 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1864 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 1866 */                     notSignfirst.setDept(department.getDeptName());
/*      */                   } else {
/* 1868 */                     notSignfirst.setDept("未指定部门");
/*      */                   }
/* 1870 */                   notSignfirst.setStr("未签到(规定签到时间为：" + attendSet.getAtime1() + ")");
/* 1871 */                   notSignNumber.setStr("签到时间为：" + attendSet.getAtime1());
/*      */ 
/* 1873 */                   notSign.add(notSignfirst);
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 1878 */                 Attend attend1 = this.attendMapper.selectAttendAll(date, uid.toString(), "1");
/* 1879 */                 if (attend1 != null) {
/* 1880 */                   String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/* 1881 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/* 1882 */                     status = "早退";
/* 1883 */                     BaseSupplement leaveEarlyfirst = new BaseSupplement();
/* 1884 */                     leaveEarlyfirst.setUid(uid.toString());
/* 1885 */                     leaveEarlyfirst.setName(users.getName());
/* 1886 */                     leaveEarlyfirst.setAvatar(users.getAvatar());
/* 1887 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1888 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 1890 */                       leaveEarlyfirst.setDept(department.getDeptName());
/*      */                     } else {
/* 1892 */                       leaveEarlyfirst.setDept("未指定部门");
/*      */                     }
/*      */ 
/* 1897 */                     leaveEarlyfirst.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend1.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime1()).intValue() - attend1.getAtime().intValue()) + ")");
/* 1898 */                     leaveEarlyNumber.setStr("签到时间为：" + attendSet.getAtime1());
/*      */ 
/* 1900 */                     leaveEarly.add(leaveEarlyfirst);
/*      */                   }
/*      */                   else {
/* 1903 */                     String msg = companyAttendanceException(date, uid.toString(), "1");
/* 1904 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 1905 */                       closedyichangB.setUid(uid.toString());
/* 1906 */                       closedyichangB.setName(users.getName());
/* 1907 */                       closedyichangB.setAvatar(users.getAvatar());
/* 1908 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1909 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 1910 */                         closedyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 1912 */                         closedyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 1915 */                       closedyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 1918 */                       closedB.setUid(uid.toString());
/* 1919 */                       closedB.setName(users.getName());
/* 1920 */                       closedB.setAvatar(users.getAvatar());
/* 1921 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1922 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 1923 */                         closedB.setDept(department.getDeptName());
/*      */                       } else {
/* 1925 */                         closedB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 1929 */                       closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend1.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else {
/* 1934 */                   status = "未签到";
/* 1935 */                   BaseSupplement notOutfirst = new BaseSupplement();
/* 1936 */                   notOutfirst.setUid(uid.toString());
/* 1937 */                   notOutfirst.setName(users.getName());
/* 1938 */                   notOutfirst.setAvatar(users.getAvatar());
/* 1939 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1940 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 1942 */                     notOutfirst.setDept(department.getDeptName());
/*      */                   } else {
/* 1944 */                     notOutfirst.setDept("未指定部门");
/*      */                   }
/*      */ 
/* 1949 */                   notOutfirst.setStr("未签退(规定签到时间为：" + attendSet.getAtime1() + ")");
/* 1950 */                   notOutNumber.setStr("签到时间为：" + attendSet.getAtime1());
/*      */ 
/* 1952 */                   notOut.add(notOutfirst);
/*      */                 }
/*      */ 
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/* 1959 */             if (("1".equals(attendSet.getAtime2Setother())) && (
/* 1960 */               (DateFormat.getDateTimes(attendSet.getAtime2()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))) {
/* 1961 */               String status = "";
/* 1962 */               if ("1".equals(attendSet.getCommute2())) {
/* 1963 */                 Attend attend2 = this.attendMapper.selectAttendAll(date, uid.toString(), "2");
/* 1964 */                 if (attend2 != null) {
/* 1965 */                   int a22 = DateFormat.getWYQTime(attendSet.getAtime2()).intValue();
/* 1966 */                   if (attend2.getAtime().intValue() > DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) {
/* 1967 */                     status = "迟到";
/* 1968 */                     BaseSupplement latetwo = new BaseSupplement();
/* 1969 */                     latetwo.setUid(uid.toString());
/* 1970 */                     latetwo.setName(users.getName());
/* 1971 */                     latetwo.setAvatar(users.getAvatar());
/* 1972 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1973 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 1975 */                       latetwo.setDept(department.getDeptName());
/*      */                     } else {
/* 1977 */                       latetwo.setDept("未指定部门");
/*      */                     }
/* 1979 */                     latetwo.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend2.getAtime()) + "迟到(" + DateFormat.parseMillisecone(attend2.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) + ")");
/* 1980 */                     lateNumber.setStr("签到时间为：" + attendSet.getAtime2());
/*      */ 
/* 1982 */                     late.add(latetwo);
/*      */                   } else {
/* 1984 */                     status = "正常";
/* 1985 */                     String msg = companyAttendanceException(date, uid.toString(), "2");
/* 1986 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 1987 */                       normalyichangB.setUid(uid.toString());
/* 1988 */                       normalyichangB.setName(users.getName());
/* 1989 */                       normalyichangB.setAvatar(users.getAvatar());
/* 1990 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 1991 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 1992 */                         normalyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 1994 */                         normalyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 1997 */                       normalyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 2000 */                       normalB.setUid(uid.toString());
/* 2001 */                       normalB.setName(users.getName());
/* 2002 */                       normalB.setAvatar(users.getAvatar());
/* 2003 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2004 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2005 */                         normalB.setDept(department.getDeptName());
/*      */                       } else {
/* 2007 */                         normalB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2011 */                       normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend2.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else {
/* 2016 */                   status = "未签到";
/* 2017 */                   BaseSupplement notSigntwo = new BaseSupplement();
/* 2018 */                   notSigntwo.setUid(uid.toString());
/* 2019 */                   notSigntwo.setName(users.getName());
/* 2020 */                   notSigntwo.setAvatar(users.getAvatar());
/* 2021 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2022 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2024 */                     notSigntwo.setDept(department.getDeptName());
/*      */                   } else {
/* 2026 */                     notSigntwo.setDept("未指定部门");
/*      */                   }
/* 2028 */                   notSigntwo.setStr("未签到(规定签到时间为：" + attendSet.getAtime1() + ")");
/* 2029 */                   notSignNumber.setStr("签到时间为：" + attendSet.getAtime2());
/*      */ 
/* 2031 */                   notSign.add(notSigntwo);
/*      */                 }
/*      */               } else {
/* 2034 */                 Attend attend2 = this.attendMapper.selectAttendAll(date, uid.toString(), "2");
/* 2035 */                 if (attend2 != null)
/*      */                 {
/* 2038 */                   String a1 = DateFormat.getwyqStrTime(attend2.getAtime());
/* 2039 */                   if (attend2.getAtime().intValue() < DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) {
/* 2040 */                     status = "早退";
/* 2041 */                     BaseSupplement leaveEarlytwo = new BaseSupplement();
/* 2042 */                     leaveEarlytwo.setUid(uid.toString());
/* 2043 */                     leaveEarlytwo.setName(users.getName());
/* 2044 */                     leaveEarlytwo.setAvatar(users.getAvatar());
/* 2045 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2046 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2048 */                       leaveEarlytwo.setDept(department.getDeptName());
/*      */                     } else {
/* 2050 */                       leaveEarlytwo.setDept("未指定部门");
/*      */                     }
/*      */ 
/* 2055 */                     leaveEarlytwo.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend2.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime2()).intValue() - attend2.getAtime().intValue()) + ")");
/* 2056 */                     leaveEarlyNumber.setStr("签到时间为：" + attendSet.getAtime2());
/*      */ 
/* 2058 */                     leaveEarly.add(leaveEarlytwo);
/*      */                   } else {
/* 2060 */                     status = "正常";
/* 2061 */                     String msg = companyAttendanceException(date, uid.toString(), "2");
/* 2062 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2063 */                       closedyichangB.setUid(uid.toString());
/* 2064 */                       closedyichangB.setName(users.getName());
/* 2065 */                       closedyichangB.setAvatar(users.getAvatar());
/* 2066 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2067 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2068 */                         closedyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 2070 */                         closedyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2073 */                       closedyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 2076 */                       closedB.setUid(uid.toString());
/* 2077 */                       closedB.setName(users.getName());
/* 2078 */                       closedB.setAvatar(users.getAvatar());
/* 2079 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2080 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2081 */                         closedB.setDept(department.getDeptName());
/*      */                       } else {
/* 2083 */                         closedB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2087 */                       closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend2.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else {
/* 2092 */                   status = "未签到";
/* 2093 */                   BaseSupplement notOuttwo = new BaseSupplement();
/* 2094 */                   notOuttwo.setUid(uid.toString());
/* 2095 */                   notOuttwo.setName(users.getName());
/* 2096 */                   notOuttwo.setAvatar(users.getAvatar());
/* 2097 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2098 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2100 */                     notOuttwo.setDept(department.getDeptName());
/*      */                   } else {
/* 2102 */                     notOuttwo.setDept("未指定部门");
/*      */                   }
/*      */ 
/* 2107 */                   notOuttwo.setStr("未签退(规定签到时间为：" + attendSet.getAtime2() + ")");
/* 2108 */                   notOutNumber.setStr("签到时间为：" + attendSet.getAtime2());
/*      */ 
/* 2110 */                   notOut.add(notOuttwo);
/*      */                 }
/*      */ 
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/* 2118 */             if (("1".equals(attendSet.getAtime3Setother())) && (
/* 2119 */               (DateFormat.getDateTimes(attendSet.getAtime3()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))) {
/* 2120 */               String status = "";
/* 2121 */               if ("1".equals(attendSet.getCommute3())) {
/* 2122 */                 Attend attend3 = this.attendMapper.selectAttendAll(date, uid.toString(), "3");
/* 2123 */                 if (attend3 != null) {
/* 2124 */                   String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/* 2125 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/* 2126 */                     status = "迟到";
/* 2127 */                     BaseSupplement latethree = new BaseSupplement();
/* 2128 */                     latethree.setUid(uid.toString());
/* 2129 */                     latethree.setName(users.getName());
/* 2130 */                     latethree.setAvatar(users.getAvatar());
/* 2131 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2132 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2134 */                       latethree.setDept(department.getDeptName());
/*      */                     } else {
/* 2136 */                       latethree.setDept("未指定部门");
/*      */                     }
/* 2138 */                     latethree.setStr("签到时间为：" + attendSet.getAtime3() + "迟到(" + DateFormat.parseMillisecone(attend3.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime3()).intValue()) + ")");
/* 2139 */                     lateNumber.setStr("签到时间为：" + attendSet.getAtime3());
/*      */ 
/* 2141 */                     late.add(latethree);
/*      */                   } else {
/* 2143 */                     status = "正常";
/* 2144 */                     String msg = companyAttendanceException(date, uid.toString(), "3");
/* 2145 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2146 */                       normalyichangB.setUid(uid.toString());
/* 2147 */                       normalyichangB.setName(users.getName());
/* 2148 */                       normalyichangB.setAvatar(users.getAvatar());
/* 2149 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2150 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2151 */                         normalyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 2153 */                         normalyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2156 */                       normalyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 2159 */                       normalB.setUid(uid.toString());
/* 2160 */                       normalB.setName(users.getName());
/* 2161 */                       normalB.setAvatar(users.getAvatar());
/* 2162 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2163 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2164 */                         normalB.setDept(department.getDeptName());
/*      */                       } else {
/* 2166 */                         normalB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2170 */                       normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend3.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else {
/* 2175 */                   status = "weiqiandao";
/* 2176 */                   BaseSupplement notSignthree = new BaseSupplement();
/* 2177 */                   notSignthree.setUid(uid.toString());
/* 2178 */                   notSignthree.setName(users.getName());
/* 2179 */                   notSignthree.setAvatar(users.getAvatar());
/* 2180 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2181 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2183 */                     notSignthree.setDept(department.getDeptName());
/*      */                   } else {
/* 2185 */                     notSignthree.setDept("未指定部门");
/*      */                   }
/* 2187 */                   notSignthree.setStr("未签到(规定签到时间为：" + attendSet.getAtime3() + ")");
/* 2188 */                   notSignNumber.setStr("签到时间为：" + attendSet.getAtime3());
/*      */ 
/* 2190 */                   notSign.add(notSignthree);
/*      */                 }
/*      */               } else {
/* 2193 */                 Attend attend3 = this.attendMapper.selectAttendAll(date, uid.toString(), "3");
/* 2194 */                 if (attend3 != null) {
/* 2195 */                   String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/* 2196 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/* 2197 */                     status = "早退";
/* 2198 */                     BaseSupplement leaveEarlythree = new BaseSupplement();
/* 2199 */                     leaveEarlythree.setUid(uid.toString());
/* 2200 */                     leaveEarlythree.setName(users.getName());
/* 2201 */                     leaveEarlythree.setAvatar(users.getAvatar());
/* 2202 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2203 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2205 */                       leaveEarlythree.setDept(department.getDeptName());
/*      */                     } else {
/* 2207 */                       leaveEarlythree.setDept("未指定部门");
/*      */                     }
/*      */ 
/* 2212 */                     leaveEarlythree.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend3.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime3()).intValue() - attend3.getAtime().intValue()) + ")");
/* 2213 */                     leaveEarlyNumber.setStr("签到时间为：" + attendSet.getAtime3());
/*      */ 
/* 2215 */                     leaveEarly.add(leaveEarlythree);
/*      */                   } else {
/* 2217 */                     status = "正常";
/* 2218 */                     String msg = companyAttendanceException(date, uid.toString(), "3");
/* 2219 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2220 */                       closedyichangB.setUid(uid.toString());
/* 2221 */                       closedyichangB.setName(users.getName());
/* 2222 */                       closedyichangB.setAvatar(users.getAvatar());
/* 2223 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2224 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2225 */                         closedyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 2227 */                         closedyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2230 */                       closedyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 2233 */                       closedB.setUid(uid.toString());
/* 2234 */                       closedB.setName(users.getName());
/* 2235 */                       closedB.setAvatar(users.getAvatar());
/* 2236 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2237 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2238 */                         closedB.setDept(department.getDeptName());
/*      */                       } else {
/* 2240 */                         closedB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2244 */                       closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend3.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else {
/* 2249 */                   status = "weiqiandao";
/* 2250 */                   BaseSupplement notOutthree = new BaseSupplement();
/* 2251 */                   notOutthree.setUid(uid.toString());
/* 2252 */                   notOutthree.setName(users.getName());
/* 2253 */                   notOutthree.setAvatar(users.getAvatar());
/* 2254 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2255 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2256 */                     if (department != null)
/* 2257 */                       notOutthree.setDept(department.getDeptName());
/*      */                     else
/* 2259 */                       notOutthree.setDept("未指定部门");
/*      */                   }
/*      */                   else
/*      */                   {
/* 2263 */                     notOutthree.setDept("未指定部门");
/*      */                   }
/*      */ 
/* 2269 */                   notOutthree.setStr("未签退(规定签到时间为：" + attendSet.getAtime3() + ")");
/* 2270 */                   notOutNumber.setStr("签到时间为：" + attendSet.getAtime3());
/*      */ 
/* 2272 */                   notOut.add(notOutthree);
/*      */                 }
/*      */               }
/*      */             }
/*      */ 
/* 2277 */             if (("1".equals(attendSet.getAtime4Setother())) && (
/* 2278 */               (DateFormat.getDateTimes(attendSet.getAtime4()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))) {
/* 2279 */               String status = "";
/* 2280 */               if ("1".equals(attendSet.getCommute4())) {
/* 2281 */                 Attend attend4 = this.attendMapper.selectAttendAll(date, uid.toString(), "4");
/* 2282 */                 if (attend4 != null)
/*      */                 {
/* 2284 */                   String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 2285 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 2286 */                     status = "迟到";
/* 2287 */                     BaseSupplement latefour = new BaseSupplement();
/* 2288 */                     latefour.setUid(uid.toString());
/* 2289 */                     latefour.setName(users.getName());
/* 2290 */                     latefour.setAvatar(users.getAvatar());
/* 2291 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2292 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2294 */                       latefour.setDept(department.getDeptName());
/*      */                     } else {
/* 2296 */                       latefour.setDept("未指定部门");
/*      */                     }
/*      */ 
/* 2299 */                     latefour.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend4.getAtime()) + "迟到(" + DateFormat.returnTime(Integer.valueOf(attend4.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime4()).intValue())) + ")");
/* 2300 */                     lateNumber.setStr("签到时间为：" + attendSet.getAtime4());
/*      */ 
/* 2302 */                     late.add(latefour);
/*      */                   } else {
/* 2304 */                     status = "正常";
/* 2305 */                     String msg = companyAttendanceException(date, uid.toString(), "4");
/* 2306 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2307 */                       normalyichangB.setUid(uid.toString());
/* 2308 */                       normalyichangB.setName(users.getName());
/* 2309 */                       normalyichangB.setAvatar(users.getAvatar());
/* 2310 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2311 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2312 */                         normalyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 2314 */                         normalyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2317 */                       normalyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 2320 */                       normalB.setUid(uid.toString());
/* 2321 */                       normalB.setName(users.getName());
/* 2322 */                       normalB.setAvatar(users.getAvatar());
/* 2323 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2324 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2325 */                         normalB.setDept(department.getDeptName());
/*      */                       } else {
/* 2327 */                         normalB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2331 */                       normalB.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend4.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 2337 */                   status = "weiqiandao";
/* 2338 */                   BaseSupplement notSignfour = new BaseSupplement();
/* 2339 */                   notSignfour.setUid(uid.toString());
/* 2340 */                   notSignfour.setName(users.getName());
/* 2341 */                   notSignfour.setAvatar(users.getAvatar());
/* 2342 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2343 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2345 */                     notSignfour.setDept(department.getDeptName());
/*      */                   } else {
/* 2347 */                     notSignfour.setDept("未指定部门");
/*      */                   }
/* 2349 */                   notSignfour.setStr("未签到(规定签到时间为：" + attendSet.getAtime4() + ")");
/* 2350 */                   notSignNumber.setStr("签到时间为：" + attendSet.getAtime4());
/*      */ 
/* 2352 */                   notSign.add(notSignfour);
/*      */                 }
/*      */               } else {
/* 2355 */                 Attend attend4 = this.attendMapper.selectAttendAll(date, uid.toString(), "4");
/* 2356 */                 if (attend4 != null)
/*      */                 {
/* 2358 */                   String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 2359 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 2360 */                     status = "早退";
/* 2361 */                     BaseSupplement leaveEarlyfour = new BaseSupplement();
/* 2362 */                     leaveEarlyfour.setUid(uid.toString());
/* 2363 */                     leaveEarlyfour.setName(users.getName());
/* 2364 */                     leaveEarlyfour.setAvatar(users.getAvatar());
/* 2365 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2366 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2368 */                       leaveEarlyfour.setDept(department.getDeptName());
/*      */                     } else {
/* 2370 */                       leaveEarlyfour.setDept("未指定部门");
/*      */                     }
/*      */ 
/* 2375 */                     leaveEarlyfour.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend4.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime4()).intValue() - attend4.getAtime().intValue()) + ")");
/* 2376 */                     leaveEarlyNumber.setStr("签到时间为：" + attendSet.getAtime4());
/*      */ 
/* 2378 */                     leaveEarly.add(leaveEarlyfour);
/*      */                   } else {
/* 2380 */                     status = "正常";
/* 2381 */                     String msg = companyAttendanceException(date, uid.toString(), "4");
/* 2382 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2383 */                       closedyichangB.setUid(uid.toString());
/* 2384 */                       closedyichangB.setName(users.getName());
/* 2385 */                       closedyichangB.setAvatar(users.getAvatar());
/* 2386 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2387 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2388 */                         closedyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 2390 */                         closedyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2393 */                       closedyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 2396 */                       closedB.setUid(uid.toString());
/* 2397 */                       closedB.setName(users.getName());
/* 2398 */                       closedB.setAvatar(users.getAvatar());
/* 2399 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2400 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2401 */                         closedB.setDept(department.getDeptName());
/*      */                       } else {
/* 2403 */                         closedB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2407 */                       closedB.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend4.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 2413 */                   status = "weiqiandao";
/* 2414 */                   BaseSupplement notOutfour = new BaseSupplement();
/* 2415 */                   notOutfour.setUid(uid.toString());
/* 2416 */                   notOutfour.setName(users.getName());
/* 2417 */                   notOutfour.setAvatar(users.getAvatar());
/* 2418 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2419 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2421 */                     notOutfour.setDept(department.getDeptName());
/*      */                   } else {
/* 2423 */                     notOutfour.setDept("未指定部门");
/*      */                   }
/*      */ 
/* 2428 */                   notOutfour.setStr("未签退(规定签到时间为：" + attendSet.getAtime4() + ")");
/* 2429 */                   notOutNumber.setStr("签到时间为：" + attendSet.getAtime4());
/*      */ 
/* 2431 */                   notOut.add(notOutfour);
/*      */                 }
/*      */ 
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/* 2439 */             if ("1".equals(attendSet.getAtime5Setother()))
/*      */             {
/* 2441 */               if ((DateFormat.getDateTimes(attendSet.getAtime5()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */               {
/* 2443 */                 String status = "";
/* 2444 */                 if ("1".equals(attendSet.getCommute5())) {
/* 2445 */                   Attend attend5 = this.attendMapper.selectAttendAll(date, uid.toString(), "5");
/* 2446 */                   if (attend5 != null)
/*      */                   {
/* 2448 */                     String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 2449 */                     if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 2450 */                       status = "迟到";
/* 2451 */                       BaseSupplement latefive = new BaseSupplement();
/* 2452 */                       latefive.setUid(uid.toString());
/* 2453 */                       latefive.setName(users.getName());
/* 2454 */                       latefive.setAvatar(users.getAvatar());
/* 2455 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2456 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2458 */                         latefive.setDept(department.getDeptName());
/*      */                       } else {
/* 2460 */                         latefive.setDept("未指定部门");
/*      */                       }
/* 2462 */                       latefive.setStr("签到时间为：" + attendSet.getAtime5() + "迟到(" + DateFormat.parseMillisecone(attend5.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime5()).intValue()) + ")");
/* 2463 */                       lateNumber.setStr("签到时间为：" + attendSet.getAtime5());
/*      */ 
/* 2465 */                       late.add(latefive);
/*      */                     } else {
/* 2467 */                       status = "正常";
/* 2468 */                       String msg = companyAttendanceException(date, uid.toString(), "5");
/* 2469 */                       if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2470 */                         normalyichangB.setUid(uid.toString());
/* 2471 */                         normalyichangB.setName(users.getName());
/* 2472 */                         normalyichangB.setAvatar(users.getAvatar());
/* 2473 */                         if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2474 */                           Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2475 */                           normalyichangB.setDept(department.getDeptName());
/*      */                         } else {
/* 2477 */                           normalyichangB.setDept("未指定部门");
/*      */                         }
/*      */ 
/* 2480 */                         normalyichangB.setStr(msg);
/*      */                       }
/*      */                       else {
/* 2483 */                         normalB.setUid(uid.toString());
/* 2484 */                         normalB.setName(users.getName());
/* 2485 */                         normalB.setAvatar(users.getAvatar());
/* 2486 */                         if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2487 */                           Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2488 */                           normalB.setDept(department.getDeptName());
/*      */                         } else {
/* 2490 */                           normalB.setDept("未指定部门");
/*      */                         }
/*      */ 
/* 2494 */                         normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend5.getAtime()));
/*      */                       }
/*      */                     }
/*      */                   }
/*      */                   else
/*      */                   {
/* 2500 */                     status = "weiqiandao";
/* 2501 */                     BaseSupplement notSignfive = new BaseSupplement();
/* 2502 */                     notSignfive.setUid(uid.toString());
/* 2503 */                     notSignfive.setName(users.getName());
/* 2504 */                     notSignfive.setAvatar(users.getAvatar());
/* 2505 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2506 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2508 */                       notSignfive.setDept(department.getDeptName());
/*      */                     } else {
/* 2510 */                       notSignfive.setDept("未指定部门");
/*      */                     }
/* 2512 */                     notSignfive.setStr("未签到(规定签到时间为：" + attendSet.getAtime5() + ")");
/* 2513 */                     notSignNumber.setStr("签到时间为：" + attendSet.getAtime5());
/*      */ 
/* 2515 */                     notSign.add(notSignfive);
/*      */                   }
/*      */                 } else {
/* 2518 */                   Attend attend5 = this.attendMapper.selectAttendAll(date, uid.toString(), "5");
/* 2519 */                   if (attend5 != null)
/*      */                   {
/* 2521 */                     String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 2522 */                     if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 2523 */                       status = "早退";
/* 2524 */                       BaseSupplement leaveEarlyfive = new BaseSupplement();
/* 2525 */                       leaveEarlyfive.setUid(uid.toString());
/* 2526 */                       leaveEarlyfive.setName(users.getName());
/* 2527 */                       leaveEarlyfive.setAvatar(users.getAvatar());
/* 2528 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2529 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2531 */                         leaveEarlyfive.setDept(department.getDeptName());
/*      */                       } else {
/* 2533 */                         leaveEarlyfive.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2538 */                       leaveEarlyfive.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend5.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime5()).intValue() - attend5.getAtime().intValue()) + ")");
/* 2539 */                       leaveEarlyNumber.setStr("签到时间为：" + attendSet.getAtime5());
/*      */ 
/* 2541 */                       leaveEarly.add(leaveEarlyfive);
/*      */                     } else {
/* 2543 */                       status = "正常";
/* 2544 */                       String msg = companyAttendanceException(date, uid.toString(), "5");
/* 2545 */                       if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2546 */                         closedyichangB.setUid(uid.toString());
/* 2547 */                         closedyichangB.setName(users.getName());
/* 2548 */                         closedyichangB.setAvatar(users.getAvatar());
/* 2549 */                         if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2550 */                           Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2551 */                           closedyichangB.setDept(department.getDeptName());
/*      */                         } else {
/* 2553 */                           closedyichangB.setDept("未指定部门");
/*      */                         }
/*      */ 
/* 2556 */                         closedyichangB.setStr(msg);
/*      */                       }
/*      */                       else {
/* 2559 */                         closedB.setUid(uid.toString());
/* 2560 */                         closedB.setName(users.getName());
/* 2561 */                         closedB.setAvatar(users.getAvatar());
/* 2562 */                         if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2563 */                           Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2564 */                           closedB.setDept(department.getDeptName());
/*      */                         } else {
/* 2566 */                           closedB.setDept("未指定部门");
/*      */                         }
/*      */ 
/* 2570 */                         closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend5.getAtime()));
/*      */                       }
/*      */                     }
/*      */ 
/*      */                   }
/*      */                   else
/*      */                   {
/* 2577 */                     status = "weiqiandao";
/* 2578 */                     BaseSupplement notOutfive = new BaseSupplement();
/* 2579 */                     notOutfive.setUid(uid.toString());
/* 2580 */                     notOutfive.setName(users.getName());
/* 2581 */                     notOutfive.setAvatar(users.getAvatar());
/* 2582 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2583 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2585 */                       notOutfive.setDept(department.getDeptName());
/*      */                     } else {
/* 2587 */                       notOutfive.setDept("未指定部门");
/*      */                     }
/*      */ 
/* 2592 */                     notOutfive.setStr("未签退(规定签到时间为：" + attendSet.getAtime1() + ")");
/* 2593 */                     notOutNumber.setStr("签到时间为：" + attendSet.getAtime5());
/*      */ 
/* 2595 */                     notOut.add(notOutfive);
/*      */                   }
/*      */                 }
/*      */ 
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/* 2603 */             if (("1".equals(attendSet.getAtime6Setother())) && (
/* 2604 */               (DateFormat.getDateTimes(attendSet.getAtime6()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))) {
/* 2605 */               String status = "";
/* 2606 */               if ("1".equals(attendSet.getCommute6())) {
/* 2607 */                 Attend attend6 = this.attendMapper.selectAttendAll(date, uid.toString(), "6");
/* 2608 */                 if (attend6 != null)
/*      */                 {
/* 2610 */                   String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 2611 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 2612 */                     status = "迟到";
/* 2613 */                     BaseSupplement latesix = new BaseSupplement();
/* 2614 */                     latesix.setUid(uid.toString());
/* 2615 */                     latesix.setName(users.getName());
/* 2616 */                     latesix.setAvatar(users.getAvatar());
/* 2617 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2618 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2620 */                       latesix.setDept(department.getDeptName());
/*      */                     } else {
/* 2622 */                       latesix.setDept("未指定部门");
/*      */                     }
/* 2624 */                     latesix.setStr("签到时间为：" + attendSet.getAtime6() + "迟到(" + DateFormat.parseMillisecone(attend6.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime6()).intValue()) + ")");
/* 2625 */                     lateNumber.setStr("签到时间为：" + attendSet.getAtime6());
/*      */ 
/* 2627 */                     late.add(latesix);
/*      */                   } else {
/* 2629 */                     status = "正常";
/* 2630 */                     String msg = companyAttendanceException(date, uid.toString(), "6");
/* 2631 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2632 */                       normalyichangB.setUid(uid.toString());
/* 2633 */                       normalyichangB.setName(users.getName());
/* 2634 */                       normalyichangB.setAvatar(users.getAvatar());
/* 2635 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2636 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2637 */                         normalyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 2639 */                         normalyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2642 */                       normalyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 2645 */                       normalB.setUid(uid.toString());
/* 2646 */                       normalB.setName(users.getName());
/* 2647 */                       normalB.setAvatar(users.getAvatar());
/* 2648 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2649 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2650 */                         normalB.setDept(department.getDeptName());
/*      */                       } else {
/* 2652 */                         normalB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2656 */                       normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend6.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else {
/* 2661 */                   status = "weiqiandao";
/* 2662 */                   BaseSupplement notSignsix = new BaseSupplement();
/* 2663 */                   notSignsix.setUid(uid.toString());
/* 2664 */                   notSignsix.setName(users.getName());
/* 2665 */                   notSignsix.setAvatar(users.getAvatar());
/* 2666 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2667 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2669 */                     notSignsix.setDept(department.getDeptName());
/*      */                   } else {
/* 2671 */                     notSignsix.setDept("未指定部门");
/*      */                   }
/* 2673 */                   notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime6() + ")");
/* 2674 */                   notSignNumber.setStr("签到时间为：" + attendSet.getAtime6());
/*      */ 
/* 2676 */                   notSign.add(notSignsix);
/*      */                 }
/*      */               } else {
/* 2679 */                 Attend attend6 = this.attendMapper.selectAttendAll(date, uid.toString(), "6");
/* 2680 */                 if (attend6 != null)
/*      */                 {
/* 2682 */                   String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 2683 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 2684 */                     status = "早退";
/* 2685 */                     BaseSupplement leaveEarlysix = new BaseSupplement();
/* 2686 */                     leaveEarlysix.setUid(uid.toString());
/* 2687 */                     leaveEarlysix.setName(users.getName());
/* 2688 */                     leaveEarlysix.setAvatar(users.getAvatar());
/* 2689 */                     if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2690 */                       Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2692 */                       leaveEarlysix.setDept(department.getDeptName());
/*      */                     } else {
/* 2694 */                       leaveEarlysix.setDept("未指定部门");
/*      */                     }
/*      */ 
/* 2699 */                     leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend6.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime6()).intValue() - attend6.getAtime().intValue()) + ")");
/* 2700 */                     leaveEarlyNumber.setStr("签到时间为：" + attendSet.getAtime6());
/*      */ 
/* 2702 */                     leaveEarly.add(leaveEarlysix);
/*      */                   } else {
/* 2704 */                     status = "正常";
/* 2705 */                     String msg = companyAttendanceException(date, uid.toString(), "6");
/* 2706 */                     if (!StringUtils.checkNull(msg).booleanValue()) {
/* 2707 */                       closedyichangB.setUid(uid.toString());
/* 2708 */                       closedyichangB.setName(users.getName());
/* 2709 */                       closedyichangB.setAvatar(users.getAvatar());
/* 2710 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2711 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2712 */                         closedyichangB.setDept(department.getDeptName());
/*      */                       } else {
/* 2714 */                         closedyichangB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2717 */                       closedyichangB.setStr(msg);
/*      */                     }
/*      */                     else {
/* 2720 */                       closedB.setUid(uid.toString());
/* 2721 */                       closedB.setName(users.getName());
/* 2722 */                       closedB.setAvatar(users.getAvatar());
/* 2723 */                       if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2724 */                         Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/* 2725 */                         closedB.setDept(department.getDeptName());
/*      */                       } else {
/* 2727 */                         closedB.setDept("未指定部门");
/*      */                       }
/*      */ 
/* 2731 */                       closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend6.getAtime()));
/*      */                     }
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 2737 */                   status = "weiqiandao";
/* 2738 */                   BaseSupplement notOutsix = new BaseSupplement();
/* 2739 */                   notOutsix.setUid(uid.toString());
/* 2740 */                   notOutsix.setName(users.getName());
/* 2741 */                   notOutsix.setAvatar(users.getAvatar());
/* 2742 */                   if ((users.getDeptId() != null) && (users.getDeptId().intValue() != 0)) {
/* 2743 */                     Department department = this.departmentMapper.getDeptById(users.getDeptId().intValue());
/*      */ 
/* 2745 */                     notOutsix.setDept(department.getDeptName());
/*      */                   } else {
/* 2747 */                     notOutsix.setDept("未指定部门");
/*      */                   }
/*      */ 
/* 2752 */                   notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime6() + ")");
/* 2753 */                   notOutNumber.setStr("签到时间为：" + attendSet.getAtime6());
/*      */ 
/* 2755 */                   notOut.add(notOutsix);
/*      */                 }
/*      */ 
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 2765 */           if (!StringUtils.checkNull(lateNumber.getStr()).booleanValue()) {
/* 2766 */             lateNumbers.add(lateNumber);
/*      */           }
/* 2768 */           if (!StringUtils.checkNull(notOutNumber.getStr()).booleanValue()) {
/* 2769 */             notOutNumbers.add(notOutNumber);
/*      */           }
/* 2771 */           if (!StringUtils.checkNull(leaveEarlyNumber.getStr()).booleanValue()) {
/* 2772 */             leaveEarlyNumbers.add(leaveEarlyNumber);
/*      */           }
/* 2774 */           if (!StringUtils.checkNull(notSignNumber.getStr()).booleanValue()) {
/* 2775 */             notSignNumbers.add(notSignNumber);
/*      */           }
/* 2777 */           if (!StringUtils.checkNull(normalB.getUid()).booleanValue()) {
/* 2778 */             normal.add(normalB);
/*      */           }
/*      */ 
/* 2781 */           if (!StringUtils.checkNull(normalyichangB.getUid()).booleanValue()) {
/* 2782 */             normalyichang.add(normalyichangB);
/*      */           }
/* 2784 */           if (!StringUtils.checkNull(closedB.getUid()).booleanValue()) {
/* 2785 */             closed.add(closedB);
/*      */           }
/* 2787 */           if (!StringUtils.checkNull(closedyichangB.getUid()).booleanValue()) {
/* 2788 */             closedyichang.add(closedyichangB);
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/*      */       }
/*      */ 
/* 2796 */       Attend normalAttend = new Attend();
/* 2797 */       normalAttend.setSname("上班正常");
/* 2798 */       if (normal.size() > 0) {
/* 2799 */         normalAttend.setNum(normal.size() + "人");
/* 2800 */         normalAttend.setState("1");
/*      */       } else {
/* 2802 */         normalAttend.setNum("0");
/* 2803 */         normalAttend.setState("0");
/*      */       }
/* 2805 */       normalAttend.setType("天");
/* 2806 */       normalAttend.setBaseSupplements(normal);
/* 2807 */       Attend normalyichangAttend = new Attend();
/* 2808 */       normalyichangAttend.setSname("上班异常");
/* 2809 */       if (normalyichang.size() > 0) {
/* 2810 */         normalyichangAttend.setNum(normalyichang.size() + "人");
/* 2811 */         normalyichangAttend.setState("1");
/*      */       } else {
/* 2813 */         normalyichangAttend.setNum("0");
/* 2814 */         normalyichangAttend.setState("0");
/*      */       }
/* 2816 */       normalyichangAttend.setType("天");
/* 2817 */       normalyichangAttend.setBaseSupplements(normalyichang);
/* 2818 */       Attend closedAttend = new Attend();
/* 2819 */       closedAttend.setSname("下班正常");
/* 2820 */       if (closed.size() > 0) {
/* 2821 */         closedAttend.setNum(closed.size() + "人");
/* 2822 */         closedAttend.setState("1");
/*      */       } else {
/* 2824 */         closedAttend.setNum("0");
/* 2825 */         closedAttend.setState("0");
/*      */       }
/* 2827 */       closedAttend.setType("天");
/* 2828 */       closedAttend.setBaseSupplements(closed);
/*      */ 
/* 2830 */       Attend closedyichangAttend = new Attend();
/* 2831 */       closedyichangAttend.setSname("下班异常");
/* 2832 */       if (closedyichang.size() > 0) {
/* 2833 */         closedyichangAttend.setNum(closedyichang.size() + "人");
/* 2834 */         closedyichangAttend.setState("1");
/*      */       } else {
/* 2836 */         closedyichangAttend.setNum("0");
/* 2837 */         closedyichangAttend.setState("0");
/*      */       }
/* 2839 */       closedyichangAttend.setType("天");
/* 2840 */       closedyichangAttend.setBaseSupplements(closedyichang);
/* 2841 */       Attend notSignAttend = new Attend();
/* 2842 */       notSignAttend.setSname("未签到");
/* 2843 */       if (notSign.size() > 0) {
/* 2844 */         notSignAttend.setNum(notSignNumbers.size() + "人");
/* 2845 */         notSignAttend.setState("1");
/*      */       } else {
/* 2847 */         notSignAttend.setNum("0");
/* 2848 */         notSignAttend.setState("0");
/*      */       }
/* 2850 */       notSignAttend.setType("次");
/* 2851 */       notSignAttend.setBaseSupplements(notSign);
/* 2852 */       Attend notOutAttend = new Attend();
/* 2853 */       notOutAttend.setSname("未签退");
/* 2854 */       if (notOut.size() > 0) {
/* 2855 */         notOutAttend.setNum(notOutNumbers.size() + "人");
/* 2856 */         notOutAttend.setState("1");
/*      */       } else {
/* 2858 */         notOutAttend.setNum("0");
/* 2859 */         notOutAttend.setState("0");
/*      */       }
/* 2861 */       notOutAttend.setType("次");
/* 2862 */       notOutAttend.setBaseSupplements(notOut);
/* 2863 */       Attend lateAttend = new Attend();
/* 2864 */       lateAttend.setSname("迟到");
/* 2865 */       if (late.size() > 0) {
/* 2866 */         lateAttend.setNum(lateNumbers.size() + "人");
/* 2867 */         lateAttend.setState("1");
/*      */       } else {
/* 2869 */         lateAttend.setNum("0");
/* 2870 */         lateAttend.setState("0");
/*      */       }
/* 2872 */       lateAttend.setType("次");
/* 2873 */       lateAttend.setBaseSupplements(late);
/*      */ 
/* 2875 */       Attend leaveEarlyAttend = new Attend();
/* 2876 */       leaveEarlyAttend.setSname("早退");
/* 2877 */       if (leaveEarly.size() > 0) {
/* 2878 */         leaveEarlyAttend.setNum(leaveEarlyNumbers.size() + "人");
/* 2879 */         leaveEarlyAttend.setState("1");
/*      */       } else {
/* 2881 */         leaveEarlyAttend.setNum("0");
/* 2882 */         leaveEarlyAttend.setState("0");
/*      */       }
/* 2884 */       leaveEarlyAttend.setType("次");
/* 2885 */       leaveEarlyAttend.setBaseSupplements(leaveEarly);
/*      */ 
/* 2887 */       Attend fileAttend = new Attend();
/* 2888 */       fileAttend.setSname("外勤");
/* 2889 */       if (filds.size() > 0) {
/* 2890 */         fileAttend.setNum(filds.size() + "人");
/* 2891 */         fileAttend.setState("1");
/*      */       } else {
/* 2893 */         fileAttend.setNum("0");
/* 2894 */         fileAttend.setState("0");
/*      */       }
/* 2896 */       fileAttend.setType("次");
/* 2897 */       fileAttend.setBaseSupplements(filds);
/*      */ 
/* 2899 */       Attend qingjiaAttend = new Attend();
/* 2900 */       qingjiaAttend.setSname("请假");
/* 2901 */       if (leaves.size() > 0) {
/* 2902 */         qingjiaAttend.setNum(leaves.size() + "人");
/* 2903 */         qingjiaAttend.setState("1");
/*      */       } else {
/* 2905 */         qingjiaAttend.setNum("0");
/* 2906 */         qingjiaAttend.setState("0");
/*      */       }
/* 2908 */       qingjiaAttend.setType("次");
/* 2909 */       qingjiaAttend.setBaseSupplements(leaves);
/*      */ 
/* 2911 */       Attend waichuAttend = new Attend();
/* 2912 */       waichuAttend.setSname("外出");
/* 2913 */       if (waichu.size() > 0) {
/* 2914 */         waichuAttend.setNum(waichu.size() + "人");
/* 2915 */         waichuAttend.setState("1");
/*      */       } else {
/* 2917 */         waichuAttend.setNum("0");
/* 2918 */         waichuAttend.setState("0");
/*      */       }
/* 2920 */       waichuAttend.setType("次");
/* 2921 */       waichuAttend.setBaseSupplements(waichu);
/*      */ 
/* 2923 */       Attend chuchaAttend = new Attend();
/* 2924 */       chuchaAttend.setSname("出差");
/* 2925 */       if (chucha.size() > 0) {
/* 2926 */         chuchaAttend.setNum(chucha.size() + "人");
/* 2927 */         chuchaAttend.setState("1");
/*      */       } else {
/* 2929 */         chuchaAttend.setNum("0");
/* 2930 */         chuchaAttend.setState("0");
/*      */       }
/* 2932 */       chuchaAttend.setType("次");
/* 2933 */       chuchaAttend.setBaseSupplements(chucha);
/*      */ 
/* 2936 */       Attend attend = new Attend();
/* 2937 */       attend.setUserAll(Integer.valueOf(usersList.size()));
/* 2938 */       attend.setUserSize(Integer.valueOf(chuqinRenshu));
/*      */ 
/* 2940 */       List attendList = new ArrayList();
/* 2941 */       attendList.add(normalyichangAttend);
/* 2942 */       attendList.add(normalAttend);
/* 2943 */       attendList.add(closedyichangAttend);
/* 2944 */       attendList.add(closedAttend);
/* 2945 */       attendList.add(notSignAttend);
/* 2946 */       attendList.add(notOutAttend);
/* 2947 */       attendList.add(lateAttend);
/* 2948 */       attendList.add(leaveEarlyAttend);
/* 2949 */       attendList.add(fileAttend);
/* 2950 */       attendList.add(chuchaAttend);
/* 2951 */       attendList.add(qingjiaAttend);
/* 2952 */       attendList.add(waichuAttend);
/* 2953 */       attend.setList(attendList);
/* 2954 */       wrappers.setFlag(true);
/* 2955 */       wrappers.setStatus(true);
/* 2956 */       wrappers.setData(attend);
/* 2957 */       wrappers.setMsg("更新成功");
/*      */     } catch (Exception e) {
/* 2959 */       e.printStackTrace();
/* 2960 */       wrappers.setFlag(false);
/* 2961 */       wrappers.setStatus(true);
/* 2962 */       wrappers.setMsg("更新失败");
/*      */     }
/*      */ 
/* 2966 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public BaseWrapper normalCondition(String year, String month, HttpServletRequest request) throws ParseException {
/* 2970 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/* 2971 */     Attend attend = new Attend();
/*      */ 
/* 2973 */     String date = year + "-" + month;
/* 2974 */     Users users = (Users)SessionUtils.getSessionInfo(request.getSession(), Users.class, new Users());
/*      */ 
/* 2976 */     UserExt userExt = this.userExtMapper.queryUserExt(users.getUid().toString());
/* 2977 */     if (userExt != null) {
/* 2978 */       AttendSet attendSet = this.attendSetMapper.queryAttendSetId(Integer.valueOf(userExt.getDutyType().shortValue()));
/* 2979 */       int xqhbt = 0;
/* 2980 */       String[] str1 = attendSet.getAtime1Set().split("\\|");
/* 2981 */       if ("1".equals(str1[0])) {
/* 2982 */         xqhbt++;
/*      */       }
/* 2984 */       attendSet.setAtime1Setother(str1[0]);
/* 2985 */       attendSet.setCommute1(str1[1]);
/* 2986 */       String[] str2 = attendSet.getAtime2Set().split("\\|");
/* 2987 */       if ("1".equals(str2[0])) {
/* 2988 */         xqhbt++;
/*      */       }
/* 2990 */       attendSet.setAtime2Setother(str2[0]);
/* 2991 */       attendSet.setCommute2(str2[1]);
/* 2992 */       String[] str3 = attendSet.getAtime3Set().split("\\|");
/* 2993 */       if ("1".equals(str3[0])) {
/* 2994 */         xqhbt++;
/*      */       }
/* 2996 */       attendSet.setAtime3Setother(str3[0]);
/* 2997 */       attendSet.setCommute3(str3[1]);
/* 2998 */       String[] str4 = attendSet.getAtime4Set().split("\\|");
/* 2999 */       if ("1".equals(str4[0])) {
/* 3000 */         xqhbt++;
/*      */       }
/* 3002 */       attendSet.setAtime4Setother(str4[0]);
/* 3003 */       attendSet.setCommute4(str4[1]);
/* 3004 */       String[] str5 = attendSet.getAtime5Set().split("\\|");
/* 3005 */       if ("1".equals(str5[0])) {
/* 3006 */         xqhbt++;
/*      */       }
/* 3008 */       attendSet.setAtime5Setother(str5[0]);
/* 3009 */       attendSet.setCommute5(str5[1]);
/* 3010 */       String[] str6 = attendSet.getAtime6Set().split("\\|");
/* 3011 */       if ("1".equals(str6[0])) {
/* 3012 */         xqhbt++;
/*      */       }
/* 3014 */       attendSet.setAtime6Setother(str6[0]);
/* 3015 */       attendSet.setCommute6(str6[1]);
/*      */ 
/* 3017 */       List baseAttends = new ArrayList();
/* 3018 */       String[] wDate = attendSet.getWorkdate().split(",");
/*      */ 
/* 3022 */       List<Date> datss = new ArrayList();
/* 3023 */       SimpleDateFormat df = new SimpleDateFormat("yyyy-MM");
/* 3024 */       SimpleDateFormat matter2 = new SimpleDateFormat("yyyy-MM-dd");
/* 3025 */       Date dt = new Date();
/* 3026 */       String a11 = df.format(dt);
/* 3027 */       String stratDate = "";
/* 3028 */       String endDate = "";
/* 3029 */       if (date.equals(a11))
/*      */       {
/* 3031 */         stratDate = date + "-01";
/* 3032 */         endDate = matter2.format(dt);
/*      */       }
/*      */       else {
/* 3035 */         Date date1 = df.parse(date);
/* 3036 */         Calendar calendar = Calendar.getInstance();
/* 3037 */         calendar.setTime(date1);
/* 3038 */         int first1 = calendar.getActualMinimum(5);
/* 3039 */         int last1 = calendar.getActualMaximum(5);
/* 3040 */         stratDate = date + "-01";
/* 3041 */         endDate = date + "-" + last1;
/*      */       }
/* 3043 */       Date start1 = matter2.parse(stratDate);
/* 3044 */       Date end1 = matter2.parse(endDate);
/* 3045 */       Calendar c = Calendar.getInstance();
/* 3046 */       List<Date> dates = DateCompute.getBetweenDates(start1, end1);
/* 3047 */       for (Date nowdate1 : dates) {
/* 3048 */         c.setTime(nowdate1);
/* 3049 */         int weekInt = c.get(7);
/* 3050 */         weekInt -= 1;
/* 3051 */         if (weekInt == 0) {
/* 3052 */           weekInt = 7;
/*      */         }
/*      */ 
/* 3055 */         String week = String.valueOf(weekInt);
/* 3056 */         if (attendSet.getWorkdate().contains(week)) {
/* 3057 */           datss.add(nowdate1);
/*      */         }
/*      */ 
/*      */       }
/*      */ 
/* 3062 */       for (Date nowdate : datss) {
/* 3063 */         Map map = new HashMap();
/* 3064 */         map.put("uid", users.getUid());
/* 3065 */         map.put("date", DateFormat.getDatestr(nowdate));
/* 3066 */         List attendListzhengchang = this.attendMapper.selectAttendList(map);
/* 3067 */         BaseAttend baseAttend = new BaseAttend();
/* 3068 */         baseAttend.setAtime(DateFormat.getDatestr(nowdate));
/* 3069 */         if ((attendListzhengchang != null) && (attendListzhengchang.size() == xqhbt))
/* 3070 */           baseAttend.setStr("1");
/*      */         else {
/* 3072 */           baseAttend.setStr("0");
/*      */         }
/* 3074 */         baseAttends.add(baseAttend);
/*      */       }
/*      */ 
/* 3078 */       Attend attendzhengchang = new Attend();
/* 3079 */       attendzhengchang.setRemarksList(baseAttends);
/* 3080 */       wrappers.setFlag(true);
/* 3081 */       wrappers.setStatus(true);
/* 3082 */       wrappers.setData(attendzhengchang);
/* 3083 */       wrappers.setMsg("更新成功");
/* 3084 */       return wrappers;
/*      */     }
/* 3086 */     wrappers.setFlag(false);
/* 3087 */     wrappers.setStatus(true);
/*      */ 
/* 3089 */     wrappers.setMsg("更新失败");
/* 3090 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public BaseWrapper PersonalAttendance(String attendDate, HttpServletRequest req)
/*      */     throws ParseException {
/* 3099 */     String sqlType = Constant.MYOA + (String)req.getSession().getAttribute("loginDateSouse");
/*      */ 
/* 3101 */     Integer uid = ((Users)SessionUtils.getSessionInfo(req.getSession(), Users.class, new Users())).getUid();
/* 3102 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/* 3103 */     Attend attend = new Attend();
/* 3104 */     Map map = new HashMap();
/* 3105 */     map.put("uid", uid);
/* 3106 */     map.put("date", attendDate);
/* 3107 */     UserExt userExt = this.userExtMapper.queryUserExt(uid.toString());
/* 3108 */     if (userExt != null) {
/* 3109 */       AttendSet attendSet = this.attendSetMapper.queryAttendSetId(Integer.valueOf(userExt.getDutyType().shortValue()));
/*      */ 
/* 3111 */       String[] str1 = attendSet.getAtime1Set().split("\\|");
/* 3112 */       attendSet.setAtime1Setother(str1[0]);
/* 3113 */       attendSet.setCommute1(str1[1]);
/* 3114 */       String[] str2 = attendSet.getAtime2Set().split("\\|");
/* 3115 */       attendSet.setAtime2Setother(str2[0]);
/* 3116 */       attendSet.setCommute2(str2[1]);
/*      */ 
/* 3118 */       String[] str3 = attendSet.getAtime3Set().split("\\|");
/* 3119 */       attendSet.setAtime3Setother(str3[0]);
/* 3120 */       attendSet.setCommute3(str3[1]);
/* 3121 */       String[] str4 = attendSet.getAtime4Set().split("\\|");
/* 3122 */       attendSet.setAtime4Setother(str4[0]);
/* 3123 */       attendSet.setCommute4(str4[1]);
/* 3124 */       String[] str5 = attendSet.getAtime5Set().split("\\|");
/* 3125 */       attendSet.setAtime5Setother(str5[0]);
/* 3126 */       attendSet.setCommute5(str5[1]);
/* 3127 */       String[] str6 = attendSet.getAtime6Set().split("\\|");
/* 3128 */       attendSet.setAtime6Setother(str6[0]);
/* 3129 */       attendSet.setCommute6(str6[1]);
/* 3130 */       List attendlist = new ArrayList();
/*      */ 
/* 3132 */       if (attendSet != null)
/*      */       {
/* 3134 */         List<Date> datss = new ArrayList();
/* 3135 */         SimpleDateFormat df = new SimpleDateFormat("yyyy-MM");
/* 3136 */         SimpleDateFormat matter2 = new SimpleDateFormat("yyyy-MM-dd");
/* 3137 */         Date dt = new Date();
/* 3138 */         String a11 = df.format(dt);
/* 3139 */         String stratDate = "";
/* 3140 */         String endDate = "";
/* 3141 */         if (attendDate.equals(a11))
/*      */         {
/* 3143 */           stratDate = attendDate + "-01";
/* 3144 */           endDate = matter2.format(dt);
/*      */         }
/*      */         else {
/* 3147 */           Date date1 = df.parse(attendDate);
/* 3148 */           Calendar calendar = Calendar.getInstance();
/* 3149 */           calendar.setTime(date1);
/* 3150 */           int first1 = calendar.getActualMinimum(5);
/* 3151 */           int last1 = calendar.getActualMaximum(5);
/* 3152 */           stratDate = attendDate + "-01";
/* 3153 */           endDate = attendDate + "-" + last1;
/*      */         }
/* 3155 */         Date start1 = matter2.parse(stratDate);
/* 3156 */         Date end1 = matter2.parse(endDate);
/* 3157 */         Calendar c = Calendar.getInstance();
/* 3158 */         List<Date> dates = DateCompute.getBetweenDates(start1, end1);
/* 3159 */         for (Date nowdate1 : dates) {
/* 3160 */           c.setTime(nowdate1);
/* 3161 */           int weekInt = c.get(7);
/* 3162 */           weekInt -= 1;
/* 3163 */           if (weekInt == 0) {
/* 3164 */             weekInt = 7;
/*      */           }
/*      */ 
/* 3167 */           String week = String.valueOf(weekInt);
/* 3168 */           if (attendSet.getWorkdate().contains(week)) {
/* 3169 */             datss.add(nowdate1);
/*      */           }
/*      */         }
/* 3172 */         for (Date nowdate : datss) {
/* 3173 */           List workList = new ArrayList();
/* 3174 */           List legwork = new ArrayList();
/*      */ 
/* 3176 */           if ("1".equals(attendSet.getAtime1Setother())) {
/* 3177 */             String attendStatus = "0";
/* 3178 */             String status = "";
/* 3179 */             int atime = 0;
/* 3180 */             String remark = "";
/* 3181 */             String addres = "";
/* 3182 */             Attend attend1 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "1");
/* 3183 */             if (attend1 != null) {
/* 3184 */               if ("1".equals(attend1.getType())) {
/* 3185 */                 if ("1".equals(attendSet.getCommute1())) {
/* 3186 */                   String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/* 3187 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/* 3188 */                     status = "上班迟到";
/* 3189 */                     attendStatus = "1";
/*      */                   } else {
/* 3191 */                     status = "上班正常";
/* 3192 */                     attendStatus = "0";
/*      */                   }
/*      */                 } else {
/* 3195 */                   String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/* 3196 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/* 3197 */                     status = "下班早退";
/* 3198 */                     attendStatus = "-1";
/*      */                   } else {
/* 3200 */                     status = "下班正常";
/* 3201 */                     attendStatus = "0";
/*      */                   }
/*      */                 }
/*      */               }
/*      */ 
/* 3206 */               atime = attend1.getAtime().intValue();
/* 3207 */               remark = attend1.getRemark();
/* 3208 */               addres = attend1.getAddress();
/*      */             }
/*      */             else {
/* 3211 */               status = "未签到";
/* 3212 */               atime = 0;
/*      */             }
/* 3214 */             Attend attend11 = new Attend();
/* 3215 */             attend11.setAttendStatus(attendStatus);
/* 3216 */             attend11.setNum("1");
/* 3217 */             attend11.setSwi("1");
/* 3218 */             attend11.setCommute(attendSet.getCommute1());
/* 3219 */             attend11.setAtime(Integer.valueOf(atime));
/* 3220 */             attend11.setRemark(remark);
/* 3221 */             attend11.setAddress(addres);
/* 3222 */             attend11.setAtimestate(status);
/* 3223 */             if (DateFormat.getwyqStrTime(Integer.valueOf(atime)).equals(attendDate))
/* 3224 */               attend11.setTime("");
/*      */             else {
/* 3226 */               attend11.setTime(DateFormat.getwyqStrTime(Integer.valueOf(atime)));
/*      */             }
/*      */ 
/* 3229 */             attend11.setDateName(DateFormat.getDatestr(nowdate));
/* 3230 */             workList.add(attend11);
/*      */           }
/*      */ 
/* 3233 */           if ("1".equals(attendSet.getAtime2Setother())) {
/* 3234 */             String attendStatus = "0";
/* 3235 */             String status = "";
/* 3236 */             int atime = 0;
/* 3237 */             String remark = "";
/* 3238 */             String addres = "";
/* 3239 */             Attend attend2 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "2");
/* 3240 */             if (attend2 != null)
/*      */             {
/* 3242 */               if ("2".equals(attend2.getType()))
/*      */               {
/* 3244 */                 if ("1".equals(attendSet.getCommute2())) {
/* 3245 */                   int a22 = DateFormat.getWYQTime(attendSet.getAtime2()).intValue();
/* 3246 */                   if (attend2.getAtime().intValue() > DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) {
/* 3247 */                     status = "上班迟到";
/* 3248 */                     attendStatus = "1";
/*      */                   } else {
/* 3250 */                     status = "上班正常";
/* 3251 */                     attendStatus = "0";
/*      */                   }
/*      */                 } else {
/* 3254 */                   String a1 = DateFormat.getwyqStrTime(attend2.getAtime());
/* 3255 */                   if (attend2.getAtime().intValue() < DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) {
/* 3256 */                     status = "下班早退";
/* 3257 */                     attendStatus = "-1";
/*      */                   } else {
/* 3259 */                     status = "下班正常";
/* 3260 */                     attendStatus = "0";
/*      */                   }
/*      */                 }
/*      */               }
/*      */ 
/* 3265 */               remark = attend2.getRemark();
/* 3266 */               addres = attend2.getAddress();
/* 3267 */               atime = attend2.getAtime().intValue();
/*      */             }
/*      */             else {
/* 3270 */               status = "未签到";
/*      */             }
/* 3272 */             Attend attend22 = new Attend();
/* 3273 */             attend22.setAttendStatus(attendStatus);
/* 3274 */             attend22.setNum("1");
/* 3275 */             attend22.setSwi("1");
/* 3276 */             attend22.setCommute(attendSet.getCommute2());
/* 3277 */             attend22.setAtime(Integer.valueOf(atime));
/* 3278 */             attend22.setRemark(remark);
/* 3279 */             attend22.setAddress(addres);
/* 3280 */             attend22.setAtimestate(status);
/* 3281 */             if (DateFormat.getwyqStrTime(Integer.valueOf(atime)).equals(attendDate))
/* 3282 */               attend22.setTime("");
/*      */             else {
/* 3284 */               attend22.setTime(DateFormat.getwyqStrTime(Integer.valueOf(atime)));
/*      */             }
/*      */ 
/* 3287 */             attend22.setDateName(DateFormat.getDatestr(nowdate));
/* 3288 */             workList.add(attend22);
/*      */           }
/*      */ 
/* 3292 */           if ("1".equals(attendSet.getAtime3Setother())) {
/* 3293 */             String attendStatus = "0";
/* 3294 */             String status = "";
/* 3295 */             int atime = 0;
/* 3296 */             String remark = "";
/* 3297 */             String addres = "";
/* 3298 */             Attend attend3 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "3");
/* 3299 */             if (attend3 != null)
/*      */             {
/* 3301 */               if ("3".equals(attend3.getType()))
/*      */               {
/* 3303 */                 if ("1".equals(attendSet.getCommute3())) {
/* 3304 */                   String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/* 3305 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/* 3306 */                     status = "上班迟到";
/* 3307 */                     attendStatus = "1";
/*      */                   } else {
/* 3309 */                     status = "上班正常";
/* 3310 */                     attendStatus = "0";
/*      */                   }
/*      */                 } else {
/* 3313 */                   String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/* 3314 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/* 3315 */                     status = "下班早退";
/* 3316 */                     attendStatus = "-1";
/*      */                   } else {
/* 3318 */                     status = "下班正常";
/* 3319 */                     attendStatus = "0";
/*      */                   }
/*      */                 }
/*      */               }
/*      */ 
/* 3324 */               remark = attend3.getRemark();
/* 3325 */               addres = attend3.getAddress();
/* 3326 */               atime = attend3.getAtime().intValue();
/*      */             }
/*      */             else
/*      */             {
/* 3330 */               status = "未签到";
/*      */             }
/* 3332 */             Attend attend33 = new Attend();
/* 3333 */             attend33.setAttendStatus(attendStatus);
/* 3334 */             attend33.setNum("1");
/* 3335 */             attend33.setSwi("1");
/* 3336 */             attend33.setCommute(attendSet.getCommute3());
/* 3337 */             attend33.setAtime(Integer.valueOf(atime));
/* 3338 */             attend33.setRemark(remark);
/* 3339 */             attend33.setAddress(addres);
/* 3340 */             attend33.setAtimestate(status);
/* 3341 */             if (DateFormat.getwyqStrTime(Integer.valueOf(atime)).equals(attendDate))
/* 3342 */               attend33.setTime("");
/*      */             else {
/* 3344 */               attend33.setTime(DateFormat.getwyqStrTime(Integer.valueOf(atime)));
/*      */             }
/*      */ 
/* 3347 */             attend33.setDateName(DateFormat.getDatestr(nowdate));
/* 3348 */             workList.add(attend33);
/*      */           }
/*      */ 
/* 3352 */           if ("1".equals(attendSet.getAtime4Setother())) {
/* 3353 */             String attendStatus = "0";
/* 3354 */             String status = "";
/* 3355 */             int atime = 0;
/* 3356 */             String remark = "";
/* 3357 */             String addres = "";
/* 3358 */             Attend attend4 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "4");
/* 3359 */             if (attend4 != null)
/*      */             {
/* 3361 */               if ("4".equals(attend4.getType()))
/*      */               {
/* 3363 */                 if ("1".equals(attendSet.getCommute4())) {
/* 3364 */                   String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 3365 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 3366 */                     status = "上班迟到";
/* 3367 */                     attendStatus = "1";
/*      */                   } else {
/* 3369 */                     status = "上班正常";
/* 3370 */                     attendStatus = "0";
/*      */                   }
/*      */                 } else {
/* 3373 */                   String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 3374 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 3375 */                     status = "下班早退";
/* 3376 */                     attendStatus = "-1";
/*      */                   } else {
/* 3378 */                     status = "下班正常";
/* 3379 */                     attendStatus = "0";
/*      */                   }
/*      */                 }
/* 3382 */                 remark = attend4.getRemark();
/* 3383 */                 addres = attend4.getAddress();
/* 3384 */                 atime = attend4.getAtime().intValue();
/*      */               } else {
/* 3386 */                 status = "未签到";
/*      */               }
/* 3388 */               Attend attend44 = new Attend();
/* 3389 */               attend44.setAttendStatus(attendStatus);
/* 3390 */               attend44.setNum("1");
/* 3391 */               attend44.setSwi("1");
/* 3392 */               attend44.setCommute(attendSet.getCommute4());
/* 3393 */               attend44.setAtime(Integer.valueOf(atime));
/* 3394 */               attend44.setRemark(remark);
/* 3395 */               attend44.setAddress(addres);
/* 3396 */               attend44.setAtimestate(status);
/* 3397 */               if (DateFormat.getwyqStrTime(Integer.valueOf(atime)).equals(attendDate))
/* 3398 */                 attend44.setTime("");
/*      */               else {
/* 3400 */                 attend44.setTime(DateFormat.getwyqStrTime(Integer.valueOf(atime)));
/*      */               }
/*      */ 
/* 3403 */               attend44.setDateName(DateFormat.getDatestr(nowdate));
/* 3404 */               workList.add(attend44);
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 3410 */           if ("1".equals(attendSet.getAtime5Setother())) {
/* 3411 */             String attendStatus = "0";
/* 3412 */             String status = "";
/* 3413 */             int atime = 0;
/* 3414 */             String remark = "";
/* 3415 */             String addres = "";
/* 3416 */             Attend attend5 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "5");
/* 3417 */             if (attend5 != null)
/*      */             {
/* 3419 */               if ("5".equals(attend5.getType()))
/*      */               {
/* 3421 */                 if ("1".equals(attendSet.getCommute5())) {
/* 3422 */                   String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 3423 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 3424 */                     status = "上班迟到";
/* 3425 */                     attendStatus = "1";
/*      */                   } else {
/* 3427 */                     status = "上班正常";
/* 3428 */                     attendStatus = "0";
/*      */                   }
/*      */                 } else {
/* 3431 */                   String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 3432 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 3433 */                     status = "下班早退";
/* 3434 */                     attendStatus = "-1";
/*      */                   } else {
/* 3436 */                     status = "下班正常";
/* 3437 */                     attendStatus = "0";
/*      */                   }
/*      */                 }
/* 3440 */                 remark = attend5.getRemark();
/* 3441 */                 addres = attend5.getAddress();
/* 3442 */                 atime = attend5.getAtime().intValue();
/*      */               }
/*      */               else {
/* 3445 */                 status = "未签到";
/*      */               }
/* 3447 */               Attend attend55 = new Attend();
/* 3448 */               attend55.setAttendStatus(attendStatus);
/* 3449 */               attend55.setNum("1");
/* 3450 */               attend55.setSwi("1");
/* 3451 */               attend55.setAtimestate(status);
/* 3452 */               attend55.setCommute(attendSet.getCommute5());
/* 3453 */               attend55.setRemark(remark);
/* 3454 */               attend55.setAddress(addres);
/* 3455 */               attend55.setAtime(Integer.valueOf(atime));
/* 3456 */               if (DateFormat.getwyqStrTime(Integer.valueOf(atime)).equals(attendDate))
/* 3457 */                 attend55.setTime("");
/*      */               else {
/* 3459 */                 attend55.setTime(DateFormat.getwyqStrTime(Integer.valueOf(atime)));
/*      */               }
/*      */ 
/* 3462 */               attend55.setDateName(DateFormat.getDatestr(nowdate));
/* 3463 */               workList.add(attend55);
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 3470 */           if ("1".equals(attendSet.getAtime6Setother())) {
/* 3471 */             String attendStatus = "0";
/* 3472 */             String status = "";
/* 3473 */             int atime = 0;
/* 3474 */             String remark = "";
/* 3475 */             String addres = "";
/* 3476 */             Attend attend6 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "6");
/* 3477 */             if (attend6 != null)
/*      */             {
/* 3479 */               if ("6".equals(attend6.getType()))
/*      */               {
/* 3481 */                 if ("1".equals(attendSet.getCommute6())) {
/* 3482 */                   String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 3483 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 3484 */                     status = "上班迟到";
/* 3485 */                     attendStatus = "1";
/*      */                   } else {
/* 3487 */                     status = "上班正常";
/* 3488 */                     attendStatus = "0";
/*      */                   }
/*      */                 } else {
/* 3491 */                   String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 3492 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 3493 */                     status = "下班早退";
/* 3494 */                     attendStatus = "-1";
/*      */                   } else {
/* 3496 */                     status = "下班正常";
/* 3497 */                     attendStatus = "0";
/*      */                   }
/*      */                 }
/* 3500 */                 remark = attend6.getRemark();
/* 3501 */                 addres = attend6.getAddress();
/* 3502 */                 atime = attend6.getAtime().intValue();
/*      */               }
/*      */               else {
/* 3505 */                 status = "未签到";
/*      */               }
/* 3507 */               Attend attend66 = new Attend();
/* 3508 */               attend66.setAttendStatus(attendStatus);
/* 3509 */               attend66.setNum("1");
/* 3510 */               attend66.setSwi("1");
/* 3511 */               attend66.setCommute(attendSet.getCommute6());
/* 3512 */               attend66.setRemark(remark);
/* 3513 */               attend66.setAddress(addres);
/* 3514 */               attend66.setAtime(Integer.valueOf(atime));
/* 3515 */               if (DateFormat.getwyqStrTime(Integer.valueOf(atime)).equals(attendDate))
/* 3516 */                 attend66.setTime("");
/*      */               else {
/* 3518 */                 attend66.setTime(DateFormat.getwyqStrTime(Integer.valueOf(atime)));
/*      */               }
/*      */ 
/* 3521 */               attend66.setAtimestate(status);
/* 3522 */               attend66.setDateName(DateFormat.getDatestr(nowdate));
/*      */ 
/* 3524 */               workList.add(attend66);
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 3530 */           if ("1".equals(attendSet.getIsOut())) {
/* 3531 */             List<Attend> attend0 = this.attendMapper.selectAttend0(DateFormat.getDatestr(nowdate), uid.toString());
/* 3532 */             if ((attend0 != null) && (attend0.size() > 0)) {
/* 3533 */               for (Attend a : attend0) {
/* 3534 */                 if ((StringUtils.checkNull(a.getFileId()).booleanValue()) && (StringUtils.checkNull(a.getFileName()).booleanValue())) {
/* 3535 */                   a.setAttachment(GetAttachmentListUtil.returnAttachment(a.getFileName(), a.getFileName(), sqlType, "attend"));
/*      */                 }
/*      */ 
/* 3538 */                 legwork.add(a);
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 3545 */           Attend attend1 = new Attend();
/* 3546 */           attend1.setAttendList(workList);
/* 3547 */           attend1.setLegwork(legwork);
/* 3548 */           attendlist.add(attend1);
/*      */         }
/*      */ 
/*      */       }
/*      */ 
/* 3557 */       attend.setList(attendlist);
/* 3558 */       wrappers.setFlag(true);
/* 3559 */       wrappers.setStatus(true);
/* 3560 */       wrappers.setData(attend);
/* 3561 */       wrappers.setMsg("更新成功");
/*      */     }
/*      */ 
/* 3570 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public BaseWrapper PersonalTodayAttendance(String attendDate, HttpServletRequest req)
/*      */     throws ParseException
/*      */   {
/* 3581 */     String sqlType = Constant.MYOA + (String)req.getSession().getAttribute("loginDateSouse");
/*      */ 
/* 3583 */     Integer uid = ((Users)SessionUtils.getSessionInfo(req.getSession(), Users.class, new Users())).getUid();
/* 3584 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/* 3585 */     List workList = new ArrayList();
/* 3586 */     UserExt userExt = this.userExtMapper.queryUserExt(uid.toString());
/* 3587 */     if (userExt != null) {
/* 3588 */       for (int i = 1; i <= 6; i++) {
/* 3589 */         Attend attend = this.attendMapper.selectAttendAll(attendDate, uid.toString(), i + "");
/* 3590 */         if (attend != null) {
/* 3591 */           String time = DateFormat.getwyqStrTime(attend.getAtime());
/* 3592 */           attend.setTime(time);
/* 3593 */           workList.add(attend);
/*      */         }
/*      */       }
/*      */ 
/* 3597 */       wrappers.setFlag(true);
/* 3598 */       wrappers.setStatus(true);
/* 3599 */       wrappers.setData(workList);
/* 3600 */       wrappers.setMsg("更新成功");
/*      */     }
/* 3602 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public AttendSetWrappers AttendanceStatistics(String beginDate, String endDate, HttpServletRequest req)
/*      */   {
/* 3612 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/*      */ 
/* 3614 */     Date dateTime = new Date();
/* 3615 */     SimpleDateFormat format = new SimpleDateFormat("HH:mm:ss");
/* 3616 */     String time = format.format(dateTime);
/* 3617 */     Date dateTime1 = new Date();
/* 3618 */     SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
/* 3619 */     String time1 = format1.format(dateTime1);
/* 3620 */     Integer uid = ((Users)SessionUtils.getSessionInfo(req.getSession(), Users.class, new Users())).getUid();
/* 3621 */     AttendStatistics attendStatistics = new AttendStatistics();
/* 3622 */     List<Date> date = new ArrayList<Date>();
/* 3623 */     UserExt userExt = this.userExtMapper.queryUserExt(String.valueOf(uid));
/* 3624 */     if (userExt != null) {
/* 3625 */       List normal = new ArrayList();
/* 3626 */       List normalyichang = new ArrayList();
/* 3627 */       List closed = new ArrayList();
/* 3628 */       List notSign = new ArrayList();
/* 3629 */       List notOut = new ArrayList();
/* 3630 */       List leaveEarly = new ArrayList();
/* 3631 */       List late = new ArrayList();
/* 3632 */       List fields = new ArrayList();
/*      */ 
/* 3635 */       AttendSet attendSet = this.attendSetMapper.queryAttendSetId(Integer.valueOf(userExt.getDutyType().shortValue()));
/* 3636 */       int xqhbt = 0;
/* 3637 */       String[] str1 = attendSet.getAtime1Set().split("\\|");
/* 3638 */       if ("1".equals(str1[0])) {
/* 3639 */         xqhbt++;
/*      */       }
/* 3641 */       attendSet.setAtime1Setother(str1[0]);
/* 3642 */       attendSet.setCommute1(str1[1]);
/* 3643 */       String[] str2 = attendSet.getAtime2Set().split("\\|");
/* 3644 */       if ("1".equals(str2[0])) {
/* 3645 */         xqhbt++;
/*      */       }
/* 3647 */       attendSet.setAtime2Setother(str2[0]);
/* 3648 */       attendSet.setCommute2(str2[1]);
/* 3649 */       String[] str3 = attendSet.getAtime3Set().split("\\|");
/* 3650 */       if ("1".equals(str3[0])) {
/* 3651 */         xqhbt++;
/*      */       }
/* 3653 */       attendSet.setAtime3Setother(str3[0]);
/* 3654 */       attendSet.setCommute3(str3[1]);
/* 3655 */       String[] str4 = attendSet.getAtime4Set().split("\\|");
/* 3656 */       if ("1".equals(str4[0])) {
/* 3657 */         xqhbt++;
/*      */       }
/* 3659 */       attendSet.setAtime4Setother(str4[0]);
/* 3660 */       attendSet.setCommute4(str4[1]);
/* 3661 */       String[] str5 = attendSet.getAtime5Set().split("\\|");
/* 3662 */       if ("1".equals(str5[0])) {
/* 3663 */         xqhbt++;
/*      */       }
/* 3665 */       attendSet.setAtime5Setother(str5[0]);
/* 3666 */       attendSet.setCommute5(str5[1]);
/* 3667 */       String[] str6 = attendSet.getAtime6Set().split("\\|");
/* 3668 */       if ("1".equals(str6[0])) {
/* 3669 */         xqhbt++;
/*      */       }
/*      */ 
/* 3672 */       Calendar c = Calendar.getInstance();
/* 3673 */       List<Date> dates = DateCompute.getBetweenDates(DateFormat.DateToStr(beginDate), DateFormat.DateToStr(endDate));
/* 3674 */       for (Date nowdate1 : dates) {
/* 3675 */         c.setTime(nowdate1);
/* 3676 */         int weekInt = c.get(7);
/* 3677 */         weekInt -= 1;
/* 3678 */         if (weekInt == 0) {
/* 3679 */           weekInt = 7;
/*      */         }
/*      */ 
/* 3682 */         String week = String.valueOf(weekInt);
/* 3683 */         if (attendSet.getWorkdate().contains(week)) {
/* 3684 */           date.add(nowdate1);
/*      */         }
/*      */       }
/* 3687 */       normalyichang = myAttendUnitException(beginDate, endDate, uid.toString(), req);
/* 3688 */       for (Date nowdate : date) {
/* 3689 */         if ("1".equals(attendSet.getIsOut())) {
/* 3690 */           List attend0 = this.attendMapper.selectAttend0(DateFormat.getDatestr(nowdate), uid.toString());
/* 3691 */           if ((attend0 != null) && (attend0.size() > 0)) {
/* 3692 */             Iterator attendIterator = attend0.iterator();
/* 3693 */             while (attendIterator.hasNext()) {
/* 3694 */               Field field = new Field();
/* 3695 */               Attend attend1 = (Attend)attendIterator.next();
/* 3696 */               field.setDate(DateFormat.getDatestrTime(nowdate));
/* 3697 */               field.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/* 3698 */               field.setStr(attend1.getAddress());
/* 3699 */               field.setPhoneId(attend1.getPhoneId());
/* 3700 */               field.setCause(attend1.getRemark());
/* 3701 */               fields.add(field);
/*      */             }
/*      */           }
/*      */         }
/*      */ 
/* 3706 */         if ("1".equals(attendSet.getAtime1Setother())) {
/* 3707 */           String status = "";
/* 3708 */           if ((DateFormat.getDateTimes(attendSet.getAtime1()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */           {
/* 3710 */             if ("1".equals(attendSet.getCommute1())) {
/* 3711 */               Attend attend1 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "1");
/* 3712 */               if (attend1 != null)
/*      */               {
/* 3714 */                 String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/* 3715 */                 if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/* 3716 */                   status = "迟到";
/* 3717 */                   BaseAttend latesix = new BaseAttend();
/*      */ 
/* 3719 */                   latesix.setStr("签到时间为：" + attendSet.getAtime1() + "迟到(" + DateFormat.parseMillisecone(attend1.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime1()).intValue()) + ")");
/*      */ 
/* 3722 */                   late.add(latesix);
/*      */                 } else {
/* 3724 */                   status = "正常";
/* 3725 */                   BaseAttend normalB = new BaseAttend();
/* 3726 */                   normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend1.getAtime()));
/* 3727 */                   normal.add(normalB);
/*      */                 }
/*      */               } else {
/* 3730 */                 status = "未签到";
/* 3731 */                 BaseAttend notSignsix = new BaseAttend();
/* 3732 */                 notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime1() + ")");
/* 3733 */                 notSign.add(notSignsix);
/*      */               }
/*      */             }
/*      */             else {
/* 3737 */               Attend attend1 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "1");
/* 3738 */               if (attend1 != null)
/*      */               {
/* 3740 */                 String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/* 3741 */                 if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/* 3742 */                   status = "早退";
/* 3743 */                   BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 3748 */                   leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend1.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime1()).intValue() - attend1.getAtime().intValue()) + ")");
/*      */ 
/* 3750 */                   leaveEarly.add(leaveEarlysix);
/*      */                 } else {
/* 3752 */                   status = "正常";
/* 3753 */                   BaseAttend closedB = new BaseAttend();
/* 3754 */                   closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend1.getAtime()));
/* 3755 */                   closed.add(closedB);
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 3760 */                 status = "未签到";
/* 3761 */                 BaseAttend notOutsix = new BaseAttend();
/* 3762 */                 notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime1() + ")");
/* 3763 */                 notOut.add(notOutsix);
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/* 3770 */         if ("1".equals(attendSet.getAtime2Setother())) {
/* 3771 */           String status = "";
/* 3772 */           if ((DateFormat.getDateTimes(attendSet.getAtime2()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */           {
/* 3774 */             if ("1".equals(attendSet.getCommute2())) {
/* 3775 */               Attend attend2 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "2");
/* 3776 */               if (attend2 != null)
/*      */               {
/* 3778 */                 String a1 = DateFormat.getwyqStrTime(attend2.getAtime());
/* 3779 */                 if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime2()).getTime()) {
/* 3780 */                   status = "迟到";
/* 3781 */                   BaseAttend latesix = new BaseAttend();
/*      */ 
/* 3783 */                   latesix.setStr("签到时间为：" + attendSet.getAtime2() + "迟到(" + DateFormat.parseMillisecone(attend2.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) + ")");
/*      */ 
/* 3786 */                   late.add(latesix);
/*      */                 } else {
/* 3788 */                   status = "正常";
/* 3789 */                   BaseAttend normalB = new BaseAttend();
/* 3790 */                   normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend2.getAtime()));
/* 3791 */                   normal.add(normalB);
/*      */                 }
/*      */               } else {
/* 3794 */                 status = "未签到";
/* 3795 */                 BaseAttend notSignsix = new BaseAttend();
/* 3796 */                 notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime2() + ")");
/* 3797 */                 notSign.add(notSignsix);
/*      */               }
/*      */             }
/*      */             else {
/* 3801 */               Attend attend2 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "2");
/* 3802 */               if (attend2 != null)
/*      */               {
/* 3804 */                 String a1 = DateFormat.getwyqStrTime(attend2.getAtime());
/* 3805 */                 if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime2()).getTime()) {
/* 3806 */                   status = "早退";
/* 3807 */                   BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 3812 */                   leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend2.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime2()).intValue() - attend2.getAtime().intValue()) + ")");
/*      */ 
/* 3814 */                   leaveEarly.add(leaveEarlysix);
/*      */                 } else {
/* 3816 */                   status = "正常";
/* 3817 */                   BaseAttend closedB = new BaseAttend();
/* 3818 */                   closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend2.getAtime()));
/* 3819 */                   closed.add(closedB);
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 3824 */                 status = "未签到";
/* 3825 */                 BaseAttend notOutsix = new BaseAttend();
/* 3826 */                 notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime2() + ")");
/* 3827 */                 notOut.add(notOutsix);
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/* 3834 */         if ("1".equals(attendSet.getAtime3Setother())) {
/* 3835 */           String status = "";
/* 3836 */           if ((DateFormat.getDateTimes(attendSet.getAtime3()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */           {
/* 3838 */             if ("1".equals(attendSet.getCommute3())) {
/* 3839 */               Attend attend3 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "3");
/* 3840 */               if (attend3 != null)
/*      */               {
/* 3842 */                 String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/* 3843 */                 if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/* 3844 */                   status = "迟到";
/* 3845 */                   BaseAttend latesix = new BaseAttend();
/*      */ 
/* 3847 */                   latesix.setStr("签到时间为：" + attendSet.getAtime3() + "迟到(" + DateFormat.parseMillisecone(attend3.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime3()).intValue()) + ")");
/*      */ 
/* 3850 */                   late.add(latesix);
/*      */                 } else {
/* 3852 */                   status = "正常";
/* 3853 */                   BaseAttend normalB = new BaseAttend();
/* 3854 */                   normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend3.getAtime()));
/* 3855 */                   normal.add(normalB);
/*      */                 }
/*      */               } else {
/* 3858 */                 status = "未签到";
/* 3859 */                 BaseAttend notSignsix = new BaseAttend();
/* 3860 */                 notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime3() + ")");
/* 3861 */                 notSign.add(notSignsix);
/*      */               }
/*      */             }
/*      */             else {
/* 3865 */               Attend attend3 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "3");
/* 3866 */               if (attend3 != null)
/*      */               {
/* 3868 */                 String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/* 3869 */                 if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/* 3870 */                   status = "早退";
/* 3871 */                   BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 3876 */                   leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend3.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime3()).intValue() - attend3.getAtime().intValue()) + ")");
/*      */ 
/* 3878 */                   leaveEarly.add(leaveEarlysix);
/*      */                 } else {
/* 3880 */                   status = "正常";
/* 3881 */                   BaseAttend closedB = new BaseAttend();
/* 3882 */                   closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend3.getAtime()));
/* 3883 */                   closed.add(closedB);
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 3888 */                 status = "未签到";
/* 3889 */                 BaseAttend notOutsix = new BaseAttend();
/* 3890 */                 notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime3() + ")");
/* 3891 */                 notOut.add(notOutsix);
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/* 3898 */         if ("1".equals(attendSet.getAtime4Setother())) {
/* 3899 */           String status = "";
/* 3900 */           if ((DateFormat.getDateTimes(attendSet.getAtime4()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */           {
/* 3902 */             if ("1".equals(attendSet.getCommute4())) {
/* 3903 */               Attend attend4 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "4");
/* 3904 */               if (attend4 != null)
/*      */               {
/* 3906 */                 String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 3907 */                 if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 3908 */                   status = "迟到";
/* 3909 */                   BaseAttend latesix = new BaseAttend();
/*      */ 
/* 3911 */                   latesix.setStr("签到时间为：" + attendSet.getAtime4() + "迟到(" + DateFormat.parseMillisecone(attend4.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime4()).intValue()) + ")");
/*      */ 
/* 3914 */                   late.add(latesix);
/*      */                 } else {
/* 3916 */                   status = "正常";
/* 3917 */                   BaseAttend normalB = new BaseAttend();
/* 3918 */                   normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend4.getAtime()));
/* 3919 */                   normal.add(normalB);
/*      */                 }
/*      */               } else {
/* 3922 */                 status = "未签到";
/* 3923 */                 BaseAttend notSignsix = new BaseAttend();
/* 3924 */                 notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime4() + ")");
/* 3925 */                 notSign.add(notSignsix);
/*      */               }
/*      */             }
/*      */             else {
/* 3929 */               Attend attend4 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "4");
/* 3930 */               if (attend4 != null)
/*      */               {
/* 3932 */                 String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 3933 */                 if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 3934 */                   status = "早退";
/* 3935 */                   BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 3940 */                   leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend4.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime4()).intValue() - attend4.getAtime().intValue()) + ")");
/*      */ 
/* 3942 */                   leaveEarly.add(leaveEarlysix);
/*      */                 } else {
/* 3944 */                   status = "正常";
/* 3945 */                   BaseAttend closedB = new BaseAttend();
/* 3946 */                   closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend4.getAtime()));
/* 3947 */                   closed.add(closedB);
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 3952 */                 status = "未签到";
/* 3953 */                 BaseAttend notOutsix = new BaseAttend();
/* 3954 */                 notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime4() + ")");
/* 3955 */                 notOut.add(notOutsix);
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/* 3962 */         if ("1".equals(attendSet.getAtime5Setother())) {
/* 3963 */           String status = "";
/* 3964 */           if ((DateFormat.getDateTimes(attendSet.getAtime5()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */           {
/* 3966 */             if ("1".equals(attendSet.getCommute5())) {
/* 3967 */               Attend attend5 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "5");
/* 3968 */               if (attend5 != null)
/*      */               {
/* 3970 */                 String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 3971 */                 if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 3972 */                   status = "迟到";
/* 3973 */                   BaseAttend latesix = new BaseAttend();
/*      */ 
/* 3975 */                   latesix.setStr("签到时间为：" + attendSet.getAtime5() + "迟到(" + DateFormat.parseMillisecone(attend5.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime5()).intValue()) + ")");
/*      */ 
/* 3978 */                   late.add(latesix);
/*      */                 } else {
/* 3980 */                   status = "正常";
/* 3981 */                   BaseAttend normalB = new BaseAttend();
/* 3982 */                   normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend5.getAtime()));
/* 3983 */                   normal.add(normalB);
/*      */                 }
/*      */               } else {
/* 3986 */                 status = "未签到";
/* 3987 */                 BaseAttend notSignsix = new BaseAttend();
/* 3988 */                 notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime5() + ")");
/* 3989 */                 notSign.add(notSignsix);
/*      */               }
/*      */             }
/*      */             else {
/* 3993 */               Attend attend5 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "5");
/* 3994 */               if (attend5 != null)
/*      */               {
/* 3996 */                 String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 3997 */                 if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 3998 */                   status = "早退";
/* 3999 */                   BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 4004 */                   leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend5.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime5()).intValue() - attend5.getAtime().intValue()) + ")");
/*      */ 
/* 4006 */                   leaveEarly.add(leaveEarlysix);
/*      */                 } else {
/* 4008 */                   status = "正常";
/* 4009 */                   BaseAttend closedB = new BaseAttend();
/* 4010 */                   closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend5.getAtime()));
/* 4011 */                   closed.add(closedB);
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 4016 */                 status = "未签到";
/* 4017 */                 BaseAttend notOutsix = new BaseAttend();
/* 4018 */                 notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime5() + ")");
/* 4019 */                 notOut.add(notOutsix);
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/* 4026 */         if ("1".equals(attendSet.getAtime6Setother())) {
/* 4027 */           String status = "";
/* 4028 */           if ((DateFormat.getDateTimes(attendSet.getAtime6()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */           {
/* 4030 */             if ("1".equals(attendSet.getCommute6())) {
/* 4031 */               Attend attend6 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "6");
/* 4032 */               if (attend6 != null)
/*      */               {
/* 4034 */                 String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 4035 */                 if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 4036 */                   status = "迟到";
/* 4037 */                   BaseAttend latesix = new BaseAttend();
/*      */ 
/* 4039 */                   latesix.setStr("签到时间为：" + attendSet.getAtime6() + "迟到(" + DateFormat.parseMillisecone(attend6.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime6()).intValue()) + ")");
/*      */ 
/* 4042 */                   late.add(latesix);
/*      */                 } else {
/* 4044 */                   status = "正常";
/* 4045 */                   BaseAttend normalB = new BaseAttend();
/* 4046 */                   normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend6.getAtime()));
/* 4047 */                   normal.add(normalB);
/*      */                 }
/*      */               } else {
/* 4050 */                 status = "未签到";
/* 4051 */                 BaseAttend notSignsix = new BaseAttend();
/* 4052 */                 notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime6() + ")");
/* 4053 */                 notSign.add(notSignsix);
/*      */               }
/*      */             }
/*      */             else {
/* 4057 */               Attend attend6 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "6");
/* 4058 */               if (attend6 != null)
/*      */               {
/* 4060 */                 String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 4061 */                 if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 4062 */                   status = "早退";
/* 4063 */                   BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 4068 */                   leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend6.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime6()).intValue() - attend6.getAtime().intValue()) + ")");
/*      */ 
/* 4070 */                   leaveEarly.add(leaveEarlysix);
/*      */                 } else {
/* 4072 */                   status = "正常";
/* 4073 */                   BaseAttend closedB = new BaseAttend();
/* 4074 */                   closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend6.getAtime()));
/* 4075 */                   closed.add(closedB);
/*      */                 }
/*      */               }
/*      */               else
/*      */               {
/* 4080 */                 status = "weiqiandao";
/* 4081 */                 BaseAttend notOutsix = new BaseAttend();
/* 4082 */                 notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime6() + ")");
/* 4083 */                 notOut.add(notOutsix);
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/*      */       }
/*      */ 
/* 4094 */       attendStatistics.setCount1(Integer.valueOf(normal.size()));
/* 4095 */       attendStatistics.setCount1List(normal);
/*      */ 
/* 4097 */       attendStatistics.setCount2(Integer.valueOf(closed.size()));
/* 4098 */       attendStatistics.setCount2List(closed);
/*      */ 
/* 4100 */       attendStatistics.setCount3(Integer.valueOf(notSign.size()));
/* 4101 */       attendStatistics.setCount3List(notSign);
/*      */ 
/* 4103 */       attendStatistics.setCount4(Integer.valueOf(notOut.size()));
/* 4104 */       attendStatistics.setCount4List(notOut);
/*      */ 
/* 4106 */       attendStatistics.setCount5(Integer.valueOf(late.size()));
/* 4107 */       attendStatistics.setCount5List(late);
/*      */ 
/* 4109 */       attendStatistics.setCount6(Integer.valueOf(leaveEarly.size()));
/* 4110 */       attendStatistics.setCount6List(leaveEarly);
/*      */ 
/* 4112 */       attendStatistics.setCount7(Integer.valueOf(normalyichang.size()));
/* 4113 */       attendStatistics.setCount7List(normalyichang);
/*      */ 
/* 4115 */       attendStatistics.setCount8(Integer.valueOf(fields.size()));
/* 4116 */       attendStatistics.setCount8List(fields);
/*      */     }
/*      */ 
/* 4123 */     if (attendStatistics != null) {
/* 4124 */       wrappers.setFlag(true);
/* 4125 */       wrappers.setStatus(true);
/* 4126 */       wrappers.setData(attendStatistics);
/* 4127 */       wrappers.setMsg("更新成功");
/*      */     } else {
/* 4129 */       wrappers.setFlag(false);
/* 4130 */       wrappers.setStatus(true);
/* 4131 */       wrappers.setMsg("更新失敗");
/*      */     }
/* 4133 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public AttendSetWrappers pcAttendanceStatistics(String beiginDate, String endDate, String deptId, String dutyType, String uids, HttpServletRequest req)
/*      */   {
/* 4140 */     AttendSetWrappers wrappers = new AttendSetWrappers();
/* 4141 */     Map objectMap = new HashMap();
/*      */ 
/* 4143 */     objectMap.put("deptId", deptId);
/*      */ 
/* 4145 */     objectMap.put("dutyType", dutyType);
/*      */ 
/* 4147 */     objectMap.put("uid", uids);
/*      */ 
/* 4149 */     List usersList = this.usersMapper.getUsersByMaps(objectMap);
/* 4150 */     Iterator usersIterator = usersList.iterator();
/* 4151 */     Date dateTime = new Date();
/* 4152 */     SimpleDateFormat format = new SimpleDateFormat("HH:mm:ss");
/* 4153 */     String time = format.format(dateTime);
/* 4154 */     Date dateTime1 = new Date();
/* 4155 */     SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
/* 4156 */     String time1 = format1.format(dateTime1);
/*      */ 
/* 4158 */     List attendStatisticAll = new ArrayList();
/* 4159 */     while (usersIterator.hasNext()) {
/* 4160 */       List<Date> date = new ArrayList();
/* 4161 */       Users users = (Users)usersIterator.next();
/*      */ 
/* 4163 */       Integer uid = users.getUid();
/*      */ 
/* 4165 */       String deptName = users.getDeptName();
/* 4166 */       UserExt userExt = this.userExtMapper.queryUserExt(String.valueOf(users.getUid()));
/* 4167 */       if (userExt != null) {
/* 4168 */         List normal = new ArrayList();
/* 4169 */         List normalyichang = new ArrayList();
/* 4170 */         List closed = new ArrayList();
/* 4171 */         List notSign = new ArrayList();
/* 4172 */         List notOut = new ArrayList();
/* 4173 */         List leaveEarly = new ArrayList();
/* 4174 */         List late = new ArrayList();
/* 4175 */         List fields = new ArrayList();
/* 4176 */         List attendance = new ArrayList();
/* 4177 */         List evection = new ArrayList();
/* 4178 */         List leave = new ArrayList();
/* 4179 */         List out = new ArrayList();
/*      */ 
/* 4183 */         AttendSet attendSet = this.attendSetMapper.queryAttendSetId(Integer.valueOf(userExt.getDutyType().shortValue()));
/* 4184 */         int xqhbt = 0;
/*      */ 
/* 4186 */         String[] str1 = attendSet.getAtime1Set().split("\\|");
/*      */ 
/* 4192 */         if ("1".equals(str1[0])) {
/* 4193 */           xqhbt++;
/*      */         }
/*      */ 
/* 4196 */         attendSet.setAtime1Setother(str1[0]);
/*      */ 
/* 4198 */         attendSet.setCommute1(str1[1]);
/* 4199 */         String[] str2 = attendSet.getAtime2Set().split("\\|");
/* 4200 */         if ("1".equals(str2[0])) {
/* 4201 */           xqhbt++;
/*      */         }
/* 4203 */         attendSet.setAtime2Setother(str2[0]);
/* 4204 */         attendSet.setCommute2(str2[1]);
/* 4205 */         String[] str3 = attendSet.getAtime3Set().split("\\|");
/* 4206 */         if ("1".equals(str3[0])) {
/* 4207 */           xqhbt++;
/*      */         }
/* 4209 */         attendSet.setAtime3Setother(str3[0]);
/* 4210 */         attendSet.setCommute3(str3[1]);
/* 4211 */         String[] str4 = attendSet.getAtime4Set().split("\\|");
/* 4212 */         if ("1".equals(str4[0])) {
/* 4213 */           xqhbt++;
/*      */         }
/* 4215 */         attendSet.setAtime4Setother(str4[0]);
/* 4216 */         attendSet.setCommute4(str4[1]);
/* 4217 */         String[] str5 = attendSet.getAtime5Set().split("\\|");
/* 4218 */         if ("1".equals(str5[0])) {
/* 4219 */           xqhbt++;
/*      */         }
/* 4221 */         attendSet.setAtime5Setother(str5[0]);
/* 4222 */         attendSet.setCommute5(str5[1]);
/* 4223 */         String[] str6 = attendSet.getAtime6Set().split("\\|");
/* 4224 */         if ("1".equals(str6[0])) {
/* 4225 */           xqhbt++;
/*      */         }
/*      */ 
/* 4228 */         Calendar c = Calendar.getInstance();
/* 4229 */         List<Date> dates = DateCompute.getBetweenDates(DateFormat.DateToStr(beiginDate), DateFormat.DateToStr(endDate));
/* 4230 */         for (Date nowdate1 : dates) {
/* 4231 */           c.setTime(nowdate1);
/* 4232 */           int weekInt = c.get(7);
/* 4233 */           weekInt -= 1;
/* 4234 */           if (weekInt == 0) {
/* 4235 */             weekInt = 7;
/*      */           }
/*      */ 
/* 4238 */           String week = String.valueOf(weekInt);
/* 4239 */           if (attendSet.getWorkdate().contains(week)) {
/* 4240 */             date.add(nowdate1);
/*      */           }
/*      */         }
/* 4243 */         normalyichang = myAttendUnitException(beiginDate, endDate, uid.toString(), req);
/* 4244 */         for (Date nowdate : date) {
/* 4245 */           if ("1".equals(attendSet.getIsOut())) {
/* 4246 */             List attend0 = this.attendMapper.selectAttend0(DateFormat.getDatestr(nowdate), uid.toString());
/* 4247 */             if ((attend0 != null) && (attend0.size() > 0)) {
/* 4248 */               Iterator attendIterator = attend0.iterator();
/* 4249 */               while (attendIterator.hasNext()) {
/* 4250 */                 Field field = new Field();
/* 4251 */                 Attend attend1 = (Attend)attendIterator.next();
/* 4252 */                 field.setDate(DateFormat.getDatestrTime(nowdate));
/* 4253 */                 field.setTime(DateFormat.getwyqStrTime(attend1.getAtime()));
/* 4254 */                 field.setStr(attend1.getAddress());
/* 4255 */                 field.setPhoneId(attend1.getPhoneId());
/* 4256 */                 field.setCause(attend1.getRemark());
/* 4257 */                 fields.add(field);
/*      */               }
/*      */             }
/*      */           }
/*      */ 
/* 4262 */           if ("1".equals(attendSet.getAtime1Setother())) {
/* 4263 */             String status = "";
/* 4264 */             if ((DateFormat.getDateTimes(attendSet.getAtime1()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */             {
/* 4266 */               if ("1".equals(attendSet.getCommute1())) {
/* 4267 */                 Attend attend1 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "1");
/* 4268 */                 if (attend1 != null)
/*      */                 {
/* 4270 */                   String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/* 4271 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/* 4272 */                     status = "迟到";
/* 4273 */                     BaseAttend latesix = new BaseAttend();
/*      */ 
/* 4275 */                     latesix.setStr("签到时间为：" + attendSet.getAtime1() + "迟到(" + DateFormat.parseMillisecone(attend1.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime1()).intValue()) + ")");
/*      */ 
/* 4278 */                     late.add(latesix);
/*      */                   } else {
/* 4280 */                     status = "正常";
/* 4281 */                     BaseAttend normalB = new BaseAttend();
/* 4282 */                     normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend1.getAtime()));
/* 4283 */                     normal.add(normalB);
/*      */                   }
/*      */                 } else {
/* 4286 */                   status = "未签到";
/* 4287 */                   BaseAttend notSignsix = new BaseAttend();
/* 4288 */                   notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime1() + ")");
/* 4289 */                   notSign.add(notSignsix);
/*      */                 }
/*      */               }
/*      */               else {
/* 4293 */                 Attend attend1 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "1");
/* 4294 */                 if (attend1 != null)
/*      */                 {
/* 4296 */                   String a1 = DateFormat.getwyqStrTime(attend1.getAtime());
/* 4297 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime1()).getTime()) {
/* 4298 */                     status = "早退";
/* 4299 */                     BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 4304 */                     leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend1.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime1()).intValue() - attend1.getAtime().intValue()) + ")");
/*      */ 
/* 4306 */                     leaveEarly.add(leaveEarlysix);
/*      */                   } else {
/* 4308 */                     status = "正常";
/* 4309 */                     BaseAttend closedB = new BaseAttend();
/* 4310 */                     closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend1.getAtime()));
/* 4311 */                     closed.add(closedB);
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 4316 */                   status = "未签到";
/* 4317 */                   BaseAttend notOutsix = new BaseAttend();
/* 4318 */                   notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime1() + ")");
/* 4319 */                   notOut.add(notOutsix);
/*      */                 }
/*      */               }
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 4326 */           if ("1".equals(attendSet.getAtime2Setother())) {
/* 4327 */             String status = "";
/* 4328 */             if ((DateFormat.getDateTimes(attendSet.getAtime2()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */             {
/* 4330 */               if ("1".equals(attendSet.getCommute2())) {
/* 4331 */                 Attend attend2 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "2");
/* 4332 */                 if (attend2 != null)
/*      */                 {
/* 4334 */                   String a1 = DateFormat.getwyqStrTime(attend2.getAtime());
/* 4335 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime2()).getTime()) {
/* 4336 */                     status = "迟到";
/* 4337 */                     BaseAttend latesix = new BaseAttend();
/*      */ 
/* 4339 */                     latesix.setStr("签到时间为：" + attendSet.getAtime2() + "迟到(" + DateFormat.parseMillisecone(attend2.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime2()).intValue()) + ")");
/*      */ 
/* 4342 */                     late.add(latesix);
/*      */                   } else {
/* 4344 */                     status = "正常";
/* 4345 */                     BaseAttend normalB = new BaseAttend();
/* 4346 */                     normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend2.getAtime()));
/* 4347 */                     normal.add(normalB);
/*      */                   }
/*      */                 } else {
/* 4350 */                   status = "未签到";
/* 4351 */                   BaseAttend notSignsix = new BaseAttend();
/* 4352 */                   notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime2() + ")");
/* 4353 */                   notSign.add(notSignsix);
/*      */                 }
/*      */               }
/*      */               else {
/* 4357 */                 Attend attend2 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "2");
/* 4358 */                 if (attend2 != null)
/*      */                 {
/* 4360 */                   String a1 = DateFormat.getwyqStrTime(attend2.getAtime());
/* 4361 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime2()).getTime()) {
/* 4362 */                     status = "早退";
/* 4363 */                     BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 4368 */                     leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend2.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime2()).intValue() - attend2.getAtime().intValue()) + ")");
/*      */ 
/* 4370 */                     leaveEarly.add(leaveEarlysix);
/*      */                   } else {
/* 4372 */                     status = "正常";
/* 4373 */                     BaseAttend closedB = new BaseAttend();
/* 4374 */                     closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend2.getAtime()));
/* 4375 */                     closed.add(closedB);
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 4380 */                   status = "未签到";
/* 4381 */                   BaseAttend notOutsix = new BaseAttend();
/* 4382 */                   notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime2() + ")");
/* 4383 */                   notOut.add(notOutsix);
/*      */                 }
/*      */               }
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 4390 */           if ("1".equals(attendSet.getAtime3Setother())) {
/* 4391 */             String status = "";
/* 4392 */             if ((DateFormat.getDateTimes(attendSet.getAtime3()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */             {
/* 4394 */               if ("1".equals(attendSet.getCommute3())) {
/* 4395 */                 Attend attend3 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "3");
/* 4396 */                 if (attend3 != null)
/*      */                 {
/* 4398 */                   String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/* 4399 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/* 4400 */                     status = "迟到";
/* 4401 */                     BaseAttend latesix = new BaseAttend();
/*      */ 
/* 4403 */                     latesix.setStr("签到时间为：" + attendSet.getAtime3() + "迟到(" + DateFormat.parseMillisecone(attend3.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime3()).intValue()) + ")");
/*      */ 
/* 4406 */                     late.add(latesix);
/*      */                   } else {
/* 4408 */                     status = "正常";
/* 4409 */                     BaseAttend normalB = new BaseAttend();
/* 4410 */                     normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend3.getAtime()));
/* 4411 */                     normal.add(normalB);
/*      */                   }
/*      */                 } else {
/* 4414 */                   status = "未签到";
/* 4415 */                   BaseAttend notSignsix = new BaseAttend();
/* 4416 */                   notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime3() + ")");
/* 4417 */                   notSign.add(notSignsix);
/*      */                 }
/*      */               }
/*      */               else {
/* 4421 */                 Attend attend3 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "3");
/* 4422 */                 if (attend3 != null)
/*      */                 {
/* 4424 */                   String a1 = DateFormat.getwyqStrTime(attend3.getAtime());
/* 4425 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime3()).getTime()) {
/* 4426 */                     status = "早退";
/* 4427 */                     BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 4432 */                     leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend3.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime3()).intValue() - attend3.getAtime().intValue()) + ")");
/*      */ 
/* 4434 */                     leaveEarly.add(leaveEarlysix);
/*      */                   } else {
/* 4436 */                     status = "正常";
/* 4437 */                     BaseAttend closedB = new BaseAttend();
/* 4438 */                     closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend3.getAtime()));
/* 4439 */                     closed.add(closedB);
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 4444 */                   status = "未签到";
/* 4445 */                   BaseAttend notOutsix = new BaseAttend();
/* 4446 */                   notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime3() + ")");
/* 4447 */                   notOut.add(notOutsix);
/*      */                 }
/*      */               }
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 4454 */           if ("1".equals(attendSet.getAtime4Setother())) {
/* 4455 */             String status = "";
/* 4456 */             if ((DateFormat.getDateTimes(attendSet.getAtime4()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */             {
/* 4458 */               if ("1".equals(attendSet.getCommute4())) {
/* 4459 */                 Attend attend4 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "4");
/* 4460 */                 if (attend4 != null)
/*      */                 {
/* 4462 */                   String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 4463 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 4464 */                     status = "迟到";
/* 4465 */                     BaseAttend latesix = new BaseAttend();
/*      */ 
/* 4467 */                     latesix.setStr("签到时间为：" + attendSet.getAtime4() + "迟到(" + DateFormat.parseMillisecone(attend4.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime4()).intValue()) + ")");
/*      */ 
/* 4470 */                     late.add(latesix);
/*      */                   } else {
/* 4472 */                     status = "正常";
/* 4473 */                     BaseAttend normalB = new BaseAttend();
/* 4474 */                     normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend4.getAtime()));
/* 4475 */                     normal.add(normalB);
/*      */                   }
/*      */                 } else {
/* 4478 */                   status = "未签到";
/* 4479 */                   BaseAttend notSignsix = new BaseAttend();
/* 4480 */                   notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime4() + ")");
/* 4481 */                   notSign.add(notSignsix);
/*      */                 }
/*      */               }
/*      */               else {
/* 4485 */                 Attend attend4 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "4");
/* 4486 */                 if (attend4 != null)
/*      */                 {
/* 4488 */                   String a1 = DateFormat.getwyqStrTime(attend4.getAtime());
/* 4489 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime4()).getTime()) {
/* 4490 */                     status = "早退";
/* 4491 */                     BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 4496 */                     leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend4.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime4()).intValue() - attend4.getAtime().intValue()) + ")");
/*      */ 
/* 4498 */                     leaveEarly.add(leaveEarlysix);
/*      */                   } else {
/* 4500 */                     status = "正常";
/* 4501 */                     BaseAttend closedB = new BaseAttend();
/* 4502 */                     closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend4.getAtime()));
/* 4503 */                     closed.add(closedB);
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 4508 */                   status = "未签到";
/* 4509 */                   BaseAttend notOutsix = new BaseAttend();
/* 4510 */                   notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime4() + ")");
/* 4511 */                   notOut.add(notOutsix);
/*      */                 }
/*      */               }
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 4518 */           if ("1".equals(attendSet.getAtime5Setother())) {
/* 4519 */             String status = "";
/* 4520 */             if ((DateFormat.getDateTimes(attendSet.getAtime5()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */             {
/* 4522 */               if ("1".equals(attendSet.getCommute5())) {
/* 4523 */                 Attend attend5 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "5");
/* 4524 */                 if (attend5 != null)
/*      */                 {
/* 4526 */                   String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 4527 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 4528 */                     status = "迟到";
/* 4529 */                     BaseAttend latesix = new BaseAttend();
/*      */ 
/* 4531 */                     latesix.setStr("签到时间为：" + attendSet.getAtime5() + "迟到(" + DateFormat.parseMillisecone(attend5.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime5()).intValue()) + ")");
/* 4532 */                     latesix.setSignStatus(status);
/* 4533 */                     latesix.setSignTimeStr("规定签到时间为：" + attendSet.getAtime5() + "签到时间：(" + DateFormat.parseMillisecone(attend5.getAtime().intValue()) + ")");
/*      */ 
/* 4535 */                     late.add(latesix);
/*      */                   } else {
/* 4537 */                     status = "正常";
/* 4538 */                     BaseAttend normalB = new BaseAttend();
/* 4539 */                     normalB.setSignStatus(status);
/*      */ 
/* 4541 */                     normalB.setSignTimeStr("规定签到时间为：" + attendSet.getAtime5() + "签到时间：(" + DateFormat.parseMillisecone(attend5.getAtime().intValue()) + ")");
/*      */ 
/* 4543 */                     normal.add(normalB);
/*      */                   }
/*      */                 } else {
/* 4546 */                   status = "未签到";
/* 4547 */                   BaseAttend notSignsix = new BaseAttend();
/* 4548 */                   notSignsix.setSignStatus(status);
/* 4549 */                   notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime5() + ")");
/* 4550 */                   notSign.add(notSignsix);
/*      */                 }
/*      */               }
/*      */               else {
/* 4554 */                 Attend attend5 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "5");
/* 4555 */                 if (attend5 != null)
/*      */                 {
/* 4557 */                   String a1 = DateFormat.getwyqStrTime(attend5.getAtime());
/* 4558 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime5()).getTime()) {
/* 4559 */                     status = "早退";
/* 4560 */                     BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 4565 */                     leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend5.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime5()).intValue() - attend5.getAtime().intValue()) + ")");
/*      */ 
/* 4567 */                     leaveEarly.add(leaveEarlysix);
/*      */                   } else {
/* 4569 */                     status = "正常";
/* 4570 */                     BaseAttend closedB = new BaseAttend();
/* 4571 */                     closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend5.getAtime()));
/* 4572 */                     closed.add(closedB);
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 4577 */                   status = "未签到";
/* 4578 */                   BaseAttend notOutsix = new BaseAttend();
/* 4579 */                   notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime5() + ")");
/* 4580 */                   notOut.add(notOutsix);
/*      */                 }
/*      */               }
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/* 4587 */           if ("1".equals(attendSet.getAtime6Setother())) {
/* 4588 */             String status = "";
/* 4589 */             if ((DateFormat.getDateTimes(attendSet.getAtime6()).getTime() < DateFormat.getDateTimes(time).getTime()) || (!date.equals(time1)))
/*      */             {
/* 4591 */               if ("1".equals(attendSet.getCommute6())) {
/* 4592 */                 Attend attend6 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "6");
/* 4593 */                 if (attend6 != null)
/*      */                 {
/* 4595 */                   String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 4596 */                   if (DateFormat.getDateTimes(a1).getTime() > DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 4597 */                     status = "迟到";
/* 4598 */                     BaseAttend latesix = new BaseAttend();
/*      */ 
/* 4600 */                     latesix.setStr("签到时间为：" + attendSet.getAtime6() + "迟到(" + DateFormat.parseMillisecone(attend6.getAtime().intValue() - DateFormat.getWYQTime(attendSet.getAtime6()).intValue()) + ")");
/*      */ 
/* 4603 */                     late.add(latesix);
/*      */                   } else {
/* 4605 */                     status = "正常";
/* 4606 */                     BaseAttend normalB = new BaseAttend();
/* 4607 */                     normalB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend6.getAtime()));
/* 4608 */                     normal.add(normalB);
/*      */                   }
/*      */                 } else {
/* 4611 */                   status = "未签到";
/* 4612 */                   BaseAttend notSignsix = new BaseAttend();
/* 4613 */                   notSignsix.setStr("未签到(规定签到时间为：" + attendSet.getAtime6() + ")");
/* 4614 */                   notSign.add(notSignsix);
/*      */                 }
/*      */               }
/*      */               else {
/* 4618 */                 Attend attend6 = this.attendMapper.selectAttendAll(DateFormat.getDatestr(nowdate), uid.toString(), "6");
/* 4619 */                 if (attend6 != null)
/*      */                 {
/* 4621 */                   String a1 = DateFormat.getwyqStrTime(attend6.getAtime());
/* 4622 */                   if (DateFormat.getDateTimes(a1).getTime() < DateFormat.getDateTimes(attendSet.getAtime6()).getTime()) {
/* 4623 */                     status = "早退";
/* 4624 */                     BaseAttend leaveEarlysix = new BaseAttend();
/*      */ 
/* 4629 */                     leaveEarlysix.setStr("签到时间为：" + DateFormat.getwyqStrTime(attend6.getAtime()) + "早退(" + DateFormat.parseMillisecone(DateFormat.getWYQTime(attendSet.getAtime6()).intValue() - attend6.getAtime().intValue()) + ")");
/*      */ 
/* 4631 */                     leaveEarly.add(leaveEarlysix);
/*      */                   } else {
/* 4633 */                     status = "正常";
/* 4634 */                     BaseAttend closedB = new BaseAttend();
/* 4635 */                     closedB.setStr("签到时间：" + DateFormat.getwyqStrTime(attend6.getAtime()));
/* 4636 */                     closed.add(closedB);
/*      */                   }
/*      */                 }
/*      */                 else
/*      */                 {
/* 4641 */                   status = "weiqiandao";
/* 4642 */                   BaseAttend notOutsix = new BaseAttend();
/* 4643 */                   notOutsix.setStr("未签退(规定签到时间为：" + attendSet.getAtime6() + ")");
/* 4644 */                   notOut.add(notOutsix);
/*      */                 }
/*      */ 
/*      */               }
/*      */ 
/*      */             }
/*      */ 
/*      */           }
/*      */ 
/*      */         }
/*      */ 
/* 4676 */         AttendStatistics attendStatistics = new AttendStatistics();
/* 4677 */         attendStatistics.setUserName(users.getUserName());
/* 4678 */         System.out.println("aaa" + users.getDeptName());
/* 4679 */         attendStatistics.setDeptName(users.getDeptName());
/* 4680 */         System.out.println("uid" + users.getUid());
/* 4681 */         attendStatistics.setUid(users.getUid());
/*      */ 
/* 4683 */         attendStatistics.setCount1(Integer.valueOf(normal.size()));
/* 4684 */         attendStatistics.setCount1List(normal);
/*      */ 
/* 4686 */         attendStatistics.setCount2(Integer.valueOf(closed.size()));
/* 4687 */         attendStatistics.setCount2List(closed);
/*      */ 
/* 4689 */         attendStatistics.setCount3(Integer.valueOf(notSign.size()));
/* 4690 */         attendStatistics.setCount3List(notSign);
/*      */ 
/* 4692 */         attendStatistics.setCount4(Integer.valueOf(notOut.size()));
/* 4693 */         attendStatistics.setCount4List(notOut);
/*      */ 
/* 4695 */         attendStatistics.setCount5(Integer.valueOf(late.size()));
/* 4696 */         attendStatistics.setCount5List(late);
/*      */ 
/* 4698 */         attendStatistics.setCount6(Integer.valueOf(leaveEarly.size()));
/* 4699 */         attendStatistics.setCount6List(leaveEarly);
/*      */ 
/* 4701 */         attendStatistics.setCount7(Integer.valueOf(normalyichang.size()));
/* 4702 */         attendStatistics.setCount7List(normalyichang);
/*      */ 
/* 4704 */         attendStatistics.setCount8(Integer.valueOf(fields.size()));
/* 4705 */         attendStatistics.setCount8List(fields);
/*      */ 
/* 4707 */         attendStatistics.setCount9(Integer.valueOf(attendance.size()));
/* 4708 */         attendStatistics.setCount9List(attendance);
/*      */ 
/* 4710 */         attendStatistics.setCount10(Integer.valueOf(evection.size()));
/* 4711 */         attendStatistics.setCount10List(evection);
/*      */ 
/* 4713 */         attendStatistics.setCount11(Integer.valueOf(leave.size()));
/* 4714 */         attendStatistics.setCount11List(leave);
/*      */ 
/* 4716 */         attendStatistics.setCount12(Integer.valueOf(out.size()));
/* 4717 */         attendStatistics.setCount12List(out);
/*      */ 
/* 4719 */         attendStatisticAll.add(attendStatistics);
/*      */       }
/*      */     }
/*      */ 
/* 4723 */     if (attendStatisticAll.size() > 0) {
/* 4724 */       wrappers.setFlag(true);
/* 4725 */       wrappers.setStatus(true);
/* 4726 */       wrappers.setData(attendStatisticAll);
/* 4727 */       wrappers.setMsg("查询成功");
/*      */     } else {
/* 4729 */       wrappers.setFlag(false);
/* 4730 */       wrappers.setStatus(true);
/* 4731 */       wrappers.setMsg("查询失败");
/*      */     }
/* 4733 */     return wrappers;
/*      */   }
/*      */ 
/*      */   public ToJson selectAttendDate(Integer uid)
/*      */   {
/* 4741 */     ToJson toJson = new ToJson();
/* 4742 */     List<Date> dateList = this.attendMapper.selectAttendDate(uid);
/* 4743 */     List list = new ArrayList();
/*      */ 
/* 4745 */     for (Date date : dateList) {
/* 4746 */       Map map = new LinkedHashMap();
/* 4747 */       SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd");
/* 4748 */       String date2 = simpleDateFormat.format(date);
/* 4749 */       map.put("date2", date2);
/*      */ 
/* 4751 */       SimpleDateFormat simpleDateFormat1 = new SimpleDateFormat("yyyy-MM-dd");
/* 4752 */       String date3 = simpleDateFormat1.format(new Date());
/*      */ 
/* 4754 */       list.add(map);
/*      */     }
/* 4756 */     if (list != null)
/*      */     {
/* 4758 */       toJson.setFlag(0);
/* 4759 */       toJson.setMsg("查询成功");
/* 4760 */       toJson.setObj(list);
/*      */     } else {
/* 4762 */       toJson.setFlag(0);
/* 4763 */       toJson.setMsg("日期为空");
/*      */     }
/*      */ 
/* 4766 */     return toJson;
/*      */   }
/*      */ }

/* Location:           D:\xoa\webapps\ROOT\WEB-INF\classes\
 * Qualified Name:     com.xoa.service.attend.AttendService
 * JD-Core Version:    0.6.0
 */
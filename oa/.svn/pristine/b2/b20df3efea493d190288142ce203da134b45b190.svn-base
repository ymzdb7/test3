<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.myoa.dao.workPlan.WorkPlanMapper" >
  <resultMap id="BaseResultMap" type="com.myoa.model.workPlan.WorkPlan" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="PLAN_ID" property="planId" jdbcType="INTEGER" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="BEGIN_DATE" property="beginDate" jdbcType="DATE" />
    <result column="END_DATE" property="endDate" jdbcType="DATE" />
    <result column="TYPE" property="type" jdbcType="VARCHAR" />
    <result column="TYPE_NAME" property="typeName" jdbcType="VARCHAR" />
    <result column="TO_ID" property="toId" jdbcType="VARCHAR" />
    <result column="CREATOR" property="creator" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="DATE" />
    <result column="SUSPEND_FLAG" property="suspendFlag" jdbcType="VARCHAR" />
    <result column="PUBLISH" property="publish" jdbcType="CHAR" />
    <result column="SMS_FLAG" property="smsFlag" jdbcType="CHAR" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.myoa.model.workPlan.WorkPlanWithBLOBs" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="CONTENT" property="content" jdbcType="LONGVARCHAR" />
    <result column="MANAGER" property="manager" jdbcType="LONGVARCHAR" />
    <result column="PARTICIPATOR" property="participator" jdbcType="LONGVARCHAR" />
    <result column="ATTACHMENT_ID" property="attachmentId" jdbcType="LONGVARCHAR" />
    <result column="ATTACHMENT_NAME" property="attachmentName" jdbcType="LONGVARCHAR" />
    <result column="ATTACHMENT_COMMENT" property="attachmentComment" jdbcType="LONGVARCHAR" />
    <result column="REMARK" property="remark" jdbcType="LONGVARCHAR" />
    <result column="TO_PERSON_ID" property="toPersonId" jdbcType="LONGVARCHAR" />
    <result column="OPINION_LEADER" property="opinionLeader" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    PLAN_ID, NAME, BEGIN_DATE, END_DATE, TYPE, TO_ID, CREATOR, CREATE_DATE, SUSPEND_FLAG,
    PUBLISH, SMS_FLAG
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    CONTENT, MANAGER, PARTICIPATOR, ATTACHMENT_ID, ATTACHMENT_NAME, ATTACHMENT_COMMENT,
    REMARK, TO_PERSON_ID, OPINION_LEADER
  </sql>
  <select id="selectByExampleWithBLOBs" resultMap="ResultMapWithBLOBs" parameterType="com.myoa.model.workPlan.WorkPlanExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from work_plan
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.myoa.model.workPlan.WorkPlanExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from work_plan
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from work_plan
    where PLAN_ID = #{planId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from work_plan
    where PLAN_ID = #{planId,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="com.myoa.model.workPlan.WorkPlanExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from work_plan
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into work_plan (PLAN_ID, NAME, BEGIN_DATE,
    END_DATE, TYPE, TO_ID, CREATOR,
    CREATE_DATE, SUSPEND_FLAG, PUBLISH,
    SMS_FLAG, CONTENT, MANAGER,
    PARTICIPATOR, ATTACHMENT_ID, ATTACHMENT_NAME,
    ATTACHMENT_COMMENT, REMARK, TO_PERSON_ID,
    OPINION_LEADER)
    values (#{planId,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{beginDate,jdbcType=DATE},
    #{endDate,jdbcType=DATE}, #{type,jdbcType=VARCHAR}, #{toId,jdbcType=VARCHAR}, #{creator,jdbcType=VARCHAR},
    #{createDate,jdbcType=DATE}, #{suspendFlag,jdbcType=VARCHAR}, #{publish,jdbcType=CHAR},
    #{smsFlag,jdbcType=CHAR}, #{content,jdbcType=LONGVARCHAR}, #{manager,jdbcType=LONGVARCHAR},
    #{participator,jdbcType=LONGVARCHAR}, #{attachmentId,jdbcType=LONGVARCHAR}, #{attachmentName,jdbcType=LONGVARCHAR},
    #{attachmentComment,jdbcType=LONGVARCHAR}, #{remark,jdbcType=LONGVARCHAR}, #{toPersonId,jdbcType=LONGVARCHAR},
    #{opinionLeader,jdbcType=LONGVARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into work_plan
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="planId != null" >
        PLAN_ID,
      </if>
      <if test="name != null" >
        NAME,
      </if>
      <if test="beginDate != null" >
        BEGIN_DATE,
      </if>
      <if test="endDate != null" >
        END_DATE,
      </if>
      <if test="type != null" >
        TYPE,
      </if>
      <if test="toId != null" >
        TO_ID,
      </if>
      <if test="creator != null" >
        CREATOR,
      </if>
      <if test="createDate != null" >
        CREATE_DATE,
      </if>
      <if test="suspendFlag != null" >
        SUSPEND_FLAG,
      </if>
      <if test="publish != null" >
        PUBLISH,
      </if>
      <if test="smsFlag != null" >
        SMS_FLAG,
      </if>
      <if test="content != null" >
        CONTENT,
      </if>
      <if test="manager != null" >
        MANAGER,
      </if>
      <if test="participator != null" >
        PARTICIPATOR,
      </if>
      <if test="attachmentId != null" >
        ATTACHMENT_ID,
      </if>
      <if test="attachmentName != null" >
        ATTACHMENT_NAME,
      </if>
      <if test="attachmentComment != null" >
        ATTACHMENT_COMMENT,
      </if>
      <if test="remark != null" >
        REMARK,
      </if>
      <if test="toPersonId != null" >
        TO_PERSON_ID,
      </if>
      <if test="opinionLeader != null" >
        OPINION_LEADER,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="planId != null" >
        #{planId,jdbcType=INTEGER},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="beginDate != null" >
        #{beginDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        #{endDate,jdbcType=DATE},
      </if>
      <if test="type != null" >
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="toId != null" >
        #{toId,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=DATE},
      </if>
      <if test="suspendFlag != null" >
        #{suspendFlag,jdbcType=VARCHAR},
      </if>
      <if test="publish != null" >
        #{publish,jdbcType=CHAR},
      </if>
      <if test="smsFlag != null" >
        #{smsFlag,jdbcType=CHAR},
      </if>
      <if test="content != null" >
        #{content,jdbcType=LONGVARCHAR},
      </if>
      <if test="manager != null" >
        #{manager,jdbcType=LONGVARCHAR},
      </if>
      <if test="participator != null" >
        #{participator,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentId != null" >
        #{attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentName != null" >
        #{attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentComment != null" >
        #{attachmentComment,jdbcType=LONGVARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="toPersonId != null" >
        #{toPersonId,jdbcType=LONGVARCHAR},
      </if>
      <if test="opinionLeader != null" >
        #{opinionLeader,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.myoa.model.workPlan.WorkPlanExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select count(*) from work_plan
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update work_plan
    <set >
      <if test="record.planId != null" >
        PLAN_ID = #{record.planId,jdbcType=INTEGER},
      </if>
      <if test="record.name != null" >
        NAME = #{record.name,jdbcType=VARCHAR},
      </if>
      <if test="record.beginDate != null" >
        BEGIN_DATE = #{record.beginDate,jdbcType=DATE},
      </if>
      <if test="record.endDate != null" >
        END_DATE = #{record.endDate,jdbcType=DATE},
      </if>
      <if test="record.type != null" >
        TYPE = #{record.type,jdbcType=VARCHAR},
      </if>
      <if test="record.toId != null" >
        TO_ID = #{record.toId,jdbcType=VARCHAR},
      </if>
      <if test="record.creator != null" >
        CREATOR = #{record.creator,jdbcType=VARCHAR},
      </if>
      <if test="record.createDate != null" >
        CREATE_DATE = #{record.createDate,jdbcType=DATE},
      </if>
      <if test="record.suspendFlag != null" >
        SUSPEND_FLAG = #{record.suspendFlag,jdbcType=VARCHAR},
      </if>
      <if test="record.publish != null" >
        PUBLISH = #{record.publish,jdbcType=CHAR},
      </if>
      <if test="record.smsFlag != null" >
        SMS_FLAG = #{record.smsFlag,jdbcType=CHAR},
      </if>
      <if test="record.content != null" >
        CONTENT = #{record.content,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.manager != null" >
        MANAGER = #{record.manager,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.participator != null" >
        PARTICIPATOR = #{record.participator,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.attachmentId != null" >
        ATTACHMENT_ID = #{record.attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.attachmentName != null" >
        ATTACHMENT_NAME = #{record.attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.attachmentComment != null" >
        ATTACHMENT_COMMENT = #{record.attachmentComment,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.remark != null" >
        REMARK = #{record.remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.toPersonId != null" >
        TO_PERSON_ID = #{record.toPersonId,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.opinionLeader != null" >
        OPINION_LEADER = #{record.opinionLeader,jdbcType=LONGVARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExampleWithBLOBs" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update work_plan
    set PLAN_ID = #{record.planId,jdbcType=INTEGER},
    NAME = #{record.name,jdbcType=VARCHAR},
    BEGIN_DATE = #{record.beginDate,jdbcType=DATE},
    END_DATE = #{record.endDate,jdbcType=DATE},
    TYPE = #{record.type,jdbcType=VARCHAR},
    TO_ID = #{record.toId,jdbcType=VARCHAR},
    CREATOR = #{record.creator,jdbcType=VARCHAR},
    CREATE_DATE = #{record.createDate,jdbcType=DATE},
    SUSPEND_FLAG = #{record.suspendFlag,jdbcType=VARCHAR},
    PUBLISH = #{record.publish,jdbcType=CHAR},
    SMS_FLAG = #{record.smsFlag,jdbcType=CHAR},
    CONTENT = #{record.content,jdbcType=LONGVARCHAR},
    MANAGER = #{record.manager,jdbcType=LONGVARCHAR},
    PARTICIPATOR = #{record.participator,jdbcType=LONGVARCHAR},
    ATTACHMENT_ID = #{record.attachmentId,jdbcType=LONGVARCHAR},
    ATTACHMENT_NAME = #{record.attachmentName,jdbcType=LONGVARCHAR},
    ATTACHMENT_COMMENT = #{record.attachmentComment,jdbcType=LONGVARCHAR},
    REMARK = #{record.remark,jdbcType=LONGVARCHAR},
    TO_PERSON_ID = #{record.toPersonId,jdbcType=LONGVARCHAR},
    OPINION_LEADER = #{record.opinionLeader,jdbcType=LONGVARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update work_plan
    set PLAN_ID = #{record.planId,jdbcType=INTEGER},
    NAME = #{record.name,jdbcType=VARCHAR},
    BEGIN_DATE = #{record.beginDate,jdbcType=DATE},
    END_DATE = #{record.endDate,jdbcType=DATE},
    TYPE = #{record.type,jdbcType=VARCHAR},
    TO_ID = #{record.toId,jdbcType=VARCHAR},
    CREATOR = #{record.creator,jdbcType=VARCHAR},
    CREATE_DATE = #{record.createDate,jdbcType=DATE},
    SUSPEND_FLAG = #{record.suspendFlag,jdbcType=VARCHAR},
    PUBLISH = #{record.publish,jdbcType=CHAR},
    SMS_FLAG = #{record.smsFlag,jdbcType=CHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update work_plan
    <set >
      <if test="name != null" >
        NAME = #{name,jdbcType=VARCHAR},
      </if>
      <if test="beginDate != null" >
        BEGIN_DATE = #{beginDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        END_DATE = #{endDate,jdbcType=DATE},
      </if>
      <if test="type != null" >
        TYPE = #{type,jdbcType=VARCHAR},
      </if>
      <if test="toId != null" >
        TO_ID = #{toId,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        CREATOR = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null" >
        CREATE_DATE = #{createDate,jdbcType=DATE},
      </if>
      <if test="suspendFlag != null" >
        SUSPEND_FLAG = #{suspendFlag,jdbcType=VARCHAR},
      </if>
      <if test="publish != null" >
        PUBLISH = #{publish,jdbcType=CHAR},
      </if>
      <if test="smsFlag != null" >
        SMS_FLAG = #{smsFlag,jdbcType=CHAR},
      </if>
      <if test="content != null" >
        CONTENT = #{content,jdbcType=LONGVARCHAR},
      </if>
      <if test="manager != null" >
        MANAGER = #{manager,jdbcType=LONGVARCHAR},
      </if>
      <if test="participator != null" >
        PARTICIPATOR = #{participator,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentId != null" >
        ATTACHMENT_ID = #{attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentName != null" >
        ATTACHMENT_NAME = #{attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentComment != null" >
        ATTACHMENT_COMMENT = #{attachmentComment,jdbcType=LONGVARCHAR},
      </if>
      <if test="remark != null" >
        REMARK = #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="toPersonId != null" >
        TO_PERSON_ID = #{toPersonId,jdbcType=LONGVARCHAR},
      </if>
      <if test="opinionLeader != null" >
        OPINION_LEADER = #{opinionLeader,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where PLAN_ID = #{planId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update work_plan
    set NAME = #{name,jdbcType=VARCHAR},
    BEGIN_DATE = #{beginDate,jdbcType=DATE},
    END_DATE = #{endDate,jdbcType=DATE},
    TYPE = #{type,jdbcType=VARCHAR},
    TO_ID = #{toId,jdbcType=VARCHAR},
    CREATOR = #{creator,jdbcType=VARCHAR},
    CREATE_DATE = #{createDate,jdbcType=DATE},
    SUSPEND_FLAG = #{suspendFlag,jdbcType=VARCHAR},
    PUBLISH = #{publish,jdbcType=CHAR},
    SMS_FLAG = #{smsFlag,jdbcType=CHAR},
    CONTENT = #{content,jdbcType=LONGVARCHAR},
    MANAGER = #{manager,jdbcType=LONGVARCHAR},
    PARTICIPATOR = #{participator,jdbcType=LONGVARCHAR},
    ATTACHMENT_ID = #{attachmentId,jdbcType=LONGVARCHAR},
    ATTACHMENT_NAME = #{attachmentName,jdbcType=LONGVARCHAR},
    ATTACHMENT_COMMENT = #{attachmentComment,jdbcType=LONGVARCHAR},
    REMARK = #{remark,jdbcType=LONGVARCHAR},
    TO_PERSON_ID = #{toPersonId,jdbcType=LONGVARCHAR},
    OPINION_LEADER = #{opinionLeader,jdbcType=LONGVARCHAR}
    where PLAN_ID = #{planId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.myoa.model.workPlan.WorkPlan" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update work_plan
    set NAME = #{name,jdbcType=VARCHAR},
    BEGIN_DATE = #{beginDate,jdbcType=DATE},
    END_DATE = #{endDate,jdbcType=DATE},
    TYPE = #{type,jdbcType=VARCHAR},
    TO_ID = #{toId,jdbcType=VARCHAR},
    CREATOR = #{creator,jdbcType=VARCHAR},
    CREATE_DATE = #{createDate,jdbcType=DATE},
    SUSPEND_FLAG = #{suspendFlag,jdbcType=VARCHAR},
    PUBLISH = #{publish,jdbcType=CHAR},
    SMS_FLAG = #{smsFlag,jdbcType=CHAR}
    where PLAN_ID = #{planId,jdbcType=INTEGER}
  </update>





  <insert id="insertWorkPlan" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs">
    insert into work_plan
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="planId != null" >
        PLAN_ID,
      </if>
      <if test="name != null" >
        NAME,
      </if>
      <if test="beginDate != null" >
        BEGIN_DATE,
      </if>
      <if test="endDate != null" >
        END_DATE,
      </if>
      <if test="type != null" >
        TYPE,
      </if>
      <if test="toId != null" >
        TO_ID,
      </if>
      <if test="creator != null" >
        CREATOR,
      </if>
      <if test="createDate != null" >
        CREATE_DATE,
      </if>
      <if test="suspendFlag != null" >
        SUSPEND_FLAG,
      </if>
      <if test="publish != null" >
        PUBLISH,
      </if>
      <if test="smsFlag != null" >
        SMS_FLAG,
      </if>
      <if test="content != null" >
        CONTENT,
      </if>
      <if test="manager != null" >
        MANAGER,
      </if>
      <if test="participator != null" >
        PARTICIPATOR,
      </if>
      <if test="attachmentId != null" >
        ATTACHMENT_ID,
      </if>
      <if test="attachmentName != null" >
        ATTACHMENT_NAME,
      </if>
      <if test="attachmentComment != null" >
        ATTACHMENT_COMMENT,
      </if>
      <if test="remark != null" >
        REMARK,
      </if>
      <if test="toPersonId != null" >
        TO_PERSON_ID,
      </if>
      <if test="opinionLeader != null" >
        OPINION_LEADER,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="planId != null" >
        #{planId,jdbcType=INTEGER},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="beginDate != null" >
        #{beginDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        #{endDate,jdbcType=DATE},
      </if>
      <if test="type != null" >
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="toId != null" >
        #{toId,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=DATE},
      </if>
      <if test="suspendFlag != null" >
        #{suspendFlag,jdbcType=VARCHAR},
      </if>
      <if test="publish != null" >
        #{publish,jdbcType=CHAR},
      </if>
      <if test="smsFlag != null" >
        #{smsFlag,jdbcType=CHAR},
      </if>
      <if test="content != null" >
        #{content,jdbcType=LONGVARCHAR},
      </if>
      <if test="manager != null" >
        #{manager,jdbcType=LONGVARCHAR},
      </if>
      <if test="participator != null" >
        #{participator,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentId != null" >
        #{attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentName != null" >
        #{attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentComment != null" >
        #{attachmentComment,jdbcType=LONGVARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="toPersonId != null" >
        #{toPersonId,jdbcType=LONGVARCHAR},
      </if>
      <if test="opinionLeader != null" >
        #{opinionLeader,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>


  <insert id="insertWorkPlan" useGeneratedKeys="true" keyProperty="planId" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" databaseId="oracle">
    <selectKey order="BEFORE" keyProperty="planId" resultType="int">
      select WORK_PLAN_PLAN_ID_SEQ.nextval as planId from dual
    </selectKey>
    insert into work_plan
    <trim prefix="(" suffix=")" suffixOverrides="," >
        PLAN_ID,
      <if test="name != null" >
        NAME,
      </if>
      <if test="beginDate != null" >
        BEGIN_DATE,
      </if>
      <if test="endDate != null" >
        END_DATE,
      </if>
      <if test="type != null" >
        TYPE,
      </if>
      <if test="toId != null" >
        TO_ID,
      </if>
      <if test="creator != null" >
        CREATOR,
      </if>
      <if test="createDate != null" >
        CREATE_DATE,
      </if>
      <if test="suspendFlag != null" >
        SUSPEND_FLAG,
      </if>
      <if test="publish != null" >
        PUBLISH,
      </if>
      <if test="smsFlag != null" >
        SMS_FLAG,
      </if>
      <if test="content != null" >
        CONTENT,
      </if>
      <if test="manager != null" >
        MANAGER,
      </if>
      <if test="participator != null" >
        PARTICIPATOR,
      </if>
      <if test="attachmentId != null" >
        ATTACHMENT_ID,
      </if>
      <if test="attachmentName != null" >
        ATTACHMENT_NAME,
      </if>
      <if test="attachmentComment != null" >
        ATTACHMENT_COMMENT,
      </if>
      <if test="remark != null" >
        REMARK,
      </if>
      <if test="toPersonId != null" >
        TO_PERSON_ID,
      </if>
      <if test="opinionLeader != null" >
        OPINION_LEADER,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
        #{planId,jdbcType=INTEGER},
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="beginDate != null" >
        #{beginDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        #{endDate,jdbcType=DATE},
      </if>
      <if test="type != null" >
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="toId != null" >
        #{toId,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=DATE},
      </if>
      <if test="suspendFlag != null" >
        #{suspendFlag,jdbcType=VARCHAR},
      </if>
      <if test="publish != null" >
        #{publish,jdbcType=CHAR},
      </if>
      <if test="smsFlag != null" >
        #{smsFlag,jdbcType=CHAR},
      </if>
      <if test="content != null" >
        #{content,jdbcType=LONGVARCHAR},
      </if>
      <if test="manager != null" >
        #{manager,jdbcType=LONGVARCHAR},
      </if>
      <if test="participator != null" >
        #{participator,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentId != null" >
        #{attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentName != null" >
        #{attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentComment != null" >
        #{attachmentComment,jdbcType=LONGVARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="toPersonId != null" >
        #{toPersonId,jdbcType=LONGVARCHAR},
      </if>
      <if test="opinionLeader != null" >
        #{opinionLeader,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>

  <insert id="insertWorkPlan" useGeneratedKeys="true" keyProperty="planId" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" databaseId="dm">
    <selectKey order="BEFORE" keyProperty="planId" resultType="int">
      select WORK_PLAN_PLAN_ID_SEQ.nextval as planId from dual
    </selectKey>
    insert into work_plan
    <trim prefix="(" suffix=")" suffixOverrides="," >
      PLAN_ID,
      <if test="name != null" >
        NAME,
      </if>
      <if test="beginDate != null" >
        BEGIN_DATE,
      </if>
      <if test="endDate != null" >
        END_DATE,
      </if>
      <if test="type != null" >
        TYPE,
      </if>
      <if test="toId != null" >
        TO_ID,
      </if>
      <if test="creator != null" >
        CREATOR,
      </if>
      <if test="createDate != null" >
        CREATE_DATE,
      </if>
      <if test="suspendFlag != null" >
        SUSPEND_FLAG,
      </if>
      <if test="publish != null" >
        PUBLISH,
      </if>
      <if test="smsFlag != null" >
        SMS_FLAG,
      </if>
      <if test="content != null" >
        CONTENT,
      </if>
      <if test="manager != null" >
        MANAGER,
      </if>
      <if test="participator != null" >
        PARTICIPATOR,
      </if>
      <if test="attachmentId != null" >
        ATTACHMENT_ID,
      </if>
      <if test="attachmentName != null" >
        ATTACHMENT_NAME,
      </if>
      <if test="attachmentComment != null" >
        ATTACHMENT_COMMENT,
      </if>
      <if test="remark != null" >
        REMARK,
      </if>
      <if test="toPersonId != null" >
        TO_PERSON_ID,
      </if>
      <if test="opinionLeader != null" >
        OPINION_LEADER,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      #{planId,jdbcType=INTEGER},
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="beginDate != null" >
        #{beginDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        #{endDate,jdbcType=DATE},
      </if>
      <if test="type != null" >
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="toId != null" >
        #{toId,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=DATE},
      </if>
      <if test="suspendFlag != null" >
        #{suspendFlag,jdbcType=VARCHAR},
      </if>
      <if test="publish != null" >
        #{publish,jdbcType=CHAR},
      </if>
      <if test="smsFlag != null" >
        #{smsFlag,jdbcType=CHAR},
      </if>
      <if test="content != null" >
        #{content,jdbcType=LONGVARCHAR},
      </if>
      <if test="manager != null" >
        #{manager,jdbcType=LONGVARCHAR},
      </if>
      <if test="participator != null" >
        #{participator,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentId != null" >
        #{attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentName != null" >
        #{attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentComment != null" >
        #{attachmentComment,jdbcType=LONGVARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="toPersonId != null" >
        #{toPersonId,jdbcType=LONGVARCHAR},
      </if>
      <if test="opinionLeader != null" >
        #{opinionLeader,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateWorkPlanById" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" >
    update work_plan
    <set >
      <if test="name != null" >
        NAME = #{name,jdbcType=VARCHAR},
      </if>
      <if test="beginDate != null" >
        BEGIN_DATE = #{beginDate,jdbcType=DATE},
      </if>
      <if test="endDate != null" >
        END_DATE = #{endDate,jdbcType=DATE},
      </if>
      <if test="type != null" >
        TYPE = #{type,jdbcType=VARCHAR},
      </if>
      <if test="toId != null" >
        TO_ID = #{toId,jdbcType=VARCHAR},
      </if>
      <if test="creator != null" >
        CREATOR = #{creator,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null" >
        CREATE_DATE = #{createDate,jdbcType=DATE},
      </if>
      <if test="suspendFlag != null" >
        SUSPEND_FLAG = #{suspendFlag,jdbcType=VARCHAR},
      </if>
      <if test="publish != null" >
        PUBLISH = #{publish,jdbcType=CHAR},
      </if>
      <if test="smsFlag != null" >
        SMS_FLAG = #{smsFlag,jdbcType=CHAR},
      </if>
      <if test="content != null" >
        CONTENT = #{content,jdbcType=LONGVARCHAR},
      </if>
      <if test="manager != null" >
        MANAGER = #{manager,jdbcType=LONGVARCHAR},
      </if>
      <if test="participator != null" >
        PARTICIPATOR = #{participator,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentId != null" >
        ATTACHMENT_ID = #{attachmentId,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentName != null" >
        ATTACHMENT_NAME = #{attachmentName,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentComment != null" >
        ATTACHMENT_COMMENT = #{attachmentComment,jdbcType=LONGVARCHAR},
      </if>
      <if test="remark != null" >
        REMARK = #{remark,jdbcType=LONGVARCHAR},
      </if>
      <if test="toPersonId != null" >
        TO_PERSON_ID = #{toPersonId,jdbcType=LONGVARCHAR},
      </if>
      <if test="opinionLeader != null" >
        OPINION_LEADER = #{opinionLeader,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where PLAN_ID = #{planId,jdbcType=INTEGER}
  </update>

  <select id="selectWorkPlanById" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Integer" >
    select w.*,t.TYPE_NAME
    from work_plan w
    JOIN plan_type t
    ON  w.TYPE=t.TYPE_ID
    where PLAN_ID = #{planId,jdbcType=INTEGER}
  </select>

  <select id="selectWorkPlanByCond" resultMap="ResultMapWithBLOBs" parameterType="map" >
    select w.*,t.TYPE_NAME
    from work_plan w
    JOIN plan_type t
    ON  w.TYPE=t.TYPE_ID
    <where>
      <if test="workPlanWithBLOBs.name != null and workPlanWithBLOBs.name!=''" >
        and  NAME = #{workPlanWithBLOBs.name,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.beginDate!=null and workPlanWithBLOBs.beginDate!=''">
        and BEGIN_DATE &gt;= #{workPlanWithBLOBs.beginDate}
      </if>
      <if test="workPlanWithBLOBs.endDate!=null and workPlanWithBLOBs.endDate!=''">
        and END_DATE &lt;= #{workPlanWithBLOBs.endDate}
      </if>

      <if test="workPlanWithBLOBs.time==1">
        and
          (BEGIN_DATE &lt;= #{workPlanWithBLOBs.current} and END_DATE &gt;=#{workPlanWithBLOBs.current})
      </if>
      <if test="workPlanWithBLOBs.statusFlag==1">
        and (END_DATE &lt;= #{workPlanWithBLOBs.current} and publish="1" and END_DATE != "0000-00-00")
      </if>
      <if test="workPlanWithBLOBs.statusFlag==2">
        and
        (
        publish="0"
        or
        (publish="1" and END_DATE &gt; #{workPlanWithBLOBs.current})
        or
        (publish="1" and END_DATE="0000-00-00")
        or
        (publish="1" and END_DATE is NULL)
        or
        (SUSPEND_FLAG="1" and END_DATE &gt; #{workPlanWithBLOBs.current})
        or
        (SUSPEND_FLAG="1" and END_DATE="0000-00-00")
        or
        (SUSPEND_FLAG="1" and END_DATE is NULL)
        )
      </if>
      <if test="workPlanWithBLOBs.type != null and workPlanWithBLOBs.type!=0 and workPlanWithBLOBs.type !=''" >
        and TYPE = #{workPlanWithBLOBs.type,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.toId != null and workPlanWithBLOBs.toId !=''" >
        and
        (TO_ID like concat('%,'#{workPlanWithBLOBs.toId},',%') or TO_ID like concat(#{workPlanWithBLOBs.toId},',%') OR TO_ID='ALL_DEPT')
      </if>
      <if test="workPlanWithBLOBs.creator != null and workPlanWithBLOBs.creator != ''" >
        and CREATOR = #{workPlanWithBLOBs.creator,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.createDate != null and workPlanWithBLOBs.createDate!=''" >
        and CREATE_DATE = #{workPlanWithBLOBs.createDate,jdbcType=DATE}
      </if>
      <if test="workPlanWithBLOBs.suspendFlag != null and workPlanWithBLOBs.suspendFlag !=''" >
        and SUSPEND_FLAG = #{workPlanWithBLOBs.suspendFlag,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.publish != null and workPlanWithBLOBs.publish !=''" >
        and PUBLISH = #{workPlanWithBLOBs.publish,jdbcType=CHAR}
      </if>
      <if test="workPlanWithBLOBs.smsFlag != null and workPlanWithBLOBs.smsFlag !=''" >
        and SMS_FLAG = #{workPlanWithBLOBs.smsFlag,jdbcType=CHAR}
      </if>
      <if test="workPlanWithBLOBs.content != null and workPlanWithBLOBs.content != ''" >
        and CONTENT = #{workPlanWithBLOBs.content,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.manager != null and workPlanWithBLOBs.manager !=''" >
        and (MANAGER like CONCAT(#{workPlanWithBLOBs.manager}) or MANAGER like CONCAT('%,',#{workPlanWithBLOBs.manager}))
      </if>
      <if test="workPlanWithBLOBs.participator != null and workPlanWithBLOBs.participator !=''" >
        and (PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.participator},',%') or PARTICIPATOR like CONCAT('%,',#{workPlanWithBLOBs.participator},',%'))
      </if>
      <if test="workPlanWithBLOBs.attachmentId != null and workPlanWithBLOBs.attachmentId != ''" >
        and ATTACHMENT_ID = #{workPlanWithBLOBs.attachmentId,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.attachmentName != null and workPlanWithBLOBs.attachmentName !=''" >
        and ATTACHMENT_NAME = #{workPlanWithBLOBs.attachmentName,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.attachmentComment != null and workPlanWithBLOBs.attachmentComment !=''" >
        and ATTACHMENT_COMMENT = #{workPlanWithBLOBs.attachmentComment,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.remark != null and workPlanWithBLOBs.remark != ''" >
        and REMARK = #{workPlanWithBLOBs.remark,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.toPersonId != null and workPlanWithBLOBs.toPersonId !=''" >
        and (TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.toPersonId},',%') OR  TO_PERSON_ID like CONCAT('%,',#{workPlanWithBLOBs.toPersonId},',%'))
      </if>
      <if test="workPlanWithBLOBs.opinionLeader != null and workPlanWithBLOBs.opinionLeader != ''" >
        and (OPINION_LEADER like CONCAT(#{workPlanWithBLOBs.opinionLeader},',%') or OPINION_LEADER like CONCAT('%,',#{workPlanWithBLOBs.opinionLeader},',%'))
      </if>
      <if test="workPlanWithBLOBs.time !=null" >
        AND PUBLISH="1"
        and
        (
           TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
          or
          TO_PERSON_ID like CONCAT('%,',#{workPlanWithBLOBs.currentUser},',%')
          or
          TO_ID like concat((select DEPT_ID from user WHERE UID=#{workPlanWithBLOBs.currentUser}),',%')
          or
          TO_ID like concat('%,',(select DEPT_ID from user WHERE UID=#{workPlanWithBLOBs.currentUser}),',%')
          OR
          TO_ID='ALL_DEPT'
          or
          PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
          or
          PARTICIPATOR like CONCAT('%,',#{workPlanWithBLOBs.currentUser},',%')
        )
      </if>
      <if test="workPlanWithBLOBs.time !=null and workPlanWithBLOBs.time !=0" >
        OR
        (
            (( PUBLISH="1" AND END_DATE IS NULL) OR ( PUBLISH="1" AND END_DATE='0000-00-00'))
            and
            (
              TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
              or
              TO_PERSON_ID like CONCAT('%,',#{workPlanWithBLOBs.currentUser},',%')
              or
              TO_ID like concat((select DEPT_ID from user WHERE UID=#{workPlanWithBLOBs.currentUser}),',%')
              or
              TO_ID like concat('%,',(select DEPT_ID from user WHERE UID=#{workPlanWithBLOBs.currentUser}),',%')
              OR
              TO_ID='ALL_DEPT'
              or
              PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
              or
              PARTICIPATOR like CONCAT('%,',#{workPlanWithBLOBs.currentUser},',%')
            )
        )
      </if>
    </where>
  </select>

  <select id="selectWorkPlanByCond" resultMap="ResultMapWithBLOBs" parameterType="map" databaseId="oracle">
    select w.*,t.TYPE_NAME
    from work_plan w
    JOIN plan_type t
    ON  w.TYPE=t.TYPE_ID
    <where>
      <if test="workPlanWithBLOBs.name != null and workPlanWithBLOBs.name!=''" >
        and  NAME = #{workPlanWithBLOBs.name,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.beginDate!=null and workPlanWithBLOBs.beginDate!=''">
        and BEGIN_DATE &gt;= #{workPlanWithBLOBs.beginDate}
      </if>
      <if test="workPlanWithBLOBs.endDate!=null and workPlanWithBLOBs.endDate!=''">
        and END_DATE &lt;= #{workPlanWithBLOBs.endDate}
      </if>

      <if test="workPlanWithBLOBs.time==1">
        and
        (BEGIN_DATE &lt;= #{workPlanWithBLOBs.current} and END_DATE &gt;=#{workPlanWithBLOBs.current})
      </if>
      <if test="workPlanWithBLOBs.statusFlag==1">
        and (END_DATE &lt;= #{workPlanWithBLOBs.current} and publish='1' and END_DATE is not NULL)
      </if>
      <if test="workPlanWithBLOBs.statusFlag==2">
        and
        (
        publish='0'
        or
        (publish='1' and END_DATE &gt; #{workPlanWithBLOBs.current})
        or
        (publish='1' and END_DATE is NULL)
        or
        (publish='1' and END_DATE is NULL)
        or
        (SUSPEND_FLAG='1' and END_DATE &gt; #{workPlanWithBLOBs.current})
        or
        (SUSPEND_FLAG='1' and END_DATE is NULL)
        or
        (SUSPEND_FLAG='1' and END_DATE is NULL)
        )
      </if>
      <if test="workPlanWithBLOBs.type != null and workPlanWithBLOBs.type!=0 and workPlanWithBLOBs.type !=''" >
        and TYPE = #{workPlanWithBLOBs.type,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.toId != null and workPlanWithBLOBs.toId !=''" >
        and
        (TO_ID like concat(concat('%,'#{workPlanWithBLOBs.toId}),',%') or TO_ID like concat(#{workPlanWithBLOBs.toId},',%') OR TO_ID='ALL_DEPT')
      </if>
      <if test="workPlanWithBLOBs.creator != null and workPlanWithBLOBs.creator != ''" >
        and CREATOR = #{workPlanWithBLOBs.creator,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.createDate != null and workPlanWithBLOBs.createDate!=''" >
        and CREATE_DATE = #{workPlanWithBLOBs.createDate,jdbcType=DATE}
      </if>
      <if test="workPlanWithBLOBs.suspendFlag != null and workPlanWithBLOBs.suspendFlag !=''" >
        and SUSPEND_FLAG = #{workPlanWithBLOBs.suspendFlag,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.publish != null and workPlanWithBLOBs.publish !=''" >
        and PUBLISH = #{workPlanWithBLOBs.publish,jdbcType=CHAR}
      </if>
      <if test="workPlanWithBLOBs.smsFlag != null and workPlanWithBLOBs.smsFlag !=''" >
        and SMS_FLAG = #{workPlanWithBLOBs.smsFlag,jdbcType=CHAR}
      </if>
      <if test="workPlanWithBLOBs.content != null and workPlanWithBLOBs.content != ''" >
        and CONTENT = #{workPlanWithBLOBs.content,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.manager != null and workPlanWithBLOBs.manager !=''" >
        and (MANAGER like CONCAT(#{workPlanWithBLOBs.manager}) or MANAGER like CONCAT('%,',#{workPlanWithBLOBs.manager}))
      </if>
      <if test="workPlanWithBLOBs.participator != null and workPlanWithBLOBs.participator !=''" >
        and (PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.participator},',%') or PARTICIPATOR like concat(CONCAT('%,',#{workPlanWithBLOBs.participator}),',%'))
      </if>
      <if test="workPlanWithBLOBs.attachmentId != null and workPlanWithBLOBs.attachmentId != ''" >
        and ATTACHMENT_ID = #{workPlanWithBLOBs.attachmentId,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.attachmentName != null and workPlanWithBLOBs.attachmentName !=''" >
        and ATTACHMENT_NAME = #{workPlanWithBLOBs.attachmentName,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.attachmentComment != null and workPlanWithBLOBs.attachmentComment !=''" >
        and ATTACHMENT_COMMENT = #{workPlanWithBLOBs.attachmentComment,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.remark != null and workPlanWithBLOBs.remark != ''" >
        and REMARK = #{workPlanWithBLOBs.remark,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.toPersonId != null and workPlanWithBLOBs.toPersonId !=''" >
        and (TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.toPersonId},',%') OR  TO_PERSON_ID like concat(CONCAT('%,',#{workPlanWithBLOBs.toPersonId}),',%'))
      </if>
      <if test="workPlanWithBLOBs.opinionLeader != null and workPlanWithBLOBs.opinionLeader != ''" >
        and (OPINION_LEADER like CONCAT(#{workPlanWithBLOBs.opinionLeader},',%') or OPINION_LEADER like concat(CONCAT('%,',#{workPlanWithBLOBs.opinionLeader}),',%'))
      </if>
      <if test="workPlanWithBLOBs.time !=null" >
        AND PUBLISH='1'
        and
        (
        TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
        or
        TO_PERSON_ID like concat(CONCAT('%,',#{workPlanWithBLOBs.currentUser}),',%')
        or
        TO_ID like concat((select DEPT_ID from "USER" WHERE UID=#{workPlanWithBLOBs.currentUser}),',%')
        or
        TO_ID like concat(concat('%,',(select DEPT_ID from "USER" WHERE UID=#{workPlanWithBLOBs.currentUser})),',%')
        OR
        TO_ID='ALL_DEPT'
        or
        PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
        or
        PARTICIPATOR like concat(CONCAT('%,',#{workPlanWithBLOBs.currentUser}),',%')
        )
      </if>
      <if test="workPlanWithBLOBs.time !=null and workPlanWithBLOBs.time !=0" >
        OR
        (
        (( PUBLISH='1' AND END_DATE IS NULL) OR ( PUBLISH='1' AND END_DATE is NULL))
        and
        (
        TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
        or
        TO_PERSON_ID like concat(CONCAT('%,',#{workPlanWithBLOBs.currentUser}),',%')
        or
        TO_ID like concat((select DEPT_ID from "USER" WHERE UID=#{workPlanWithBLOBs.currentUser}),',%')
        or
        TO_ID like concat(concat('%,',(select DEPT_ID from "USER" WHERE UID=#{workPlanWithBLOBs.currentUser})),',%')
        OR
        TO_ID='ALL_DEPT'
        or
        PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
        or
        PARTICIPATOR like concat(CONCAT('%,',#{workPlanWithBLOBs.currentUser}),',%')
        )
        )
      </if>
    </where>
  </select>

  <select id="selectWorkPlanByCond" resultMap="ResultMapWithBLOBs" parameterType="map" databaseId="dm">
    select w.*,t.TYPE_NAME
    from work_plan w
    JOIN plan_type t
    ON  w.TYPE=t.TYPE_ID
    <where>
      <if test="workPlanWithBLOBs.name != null and workPlanWithBLOBs.name!=''" >
        and  NAME = #{workPlanWithBLOBs.name,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.beginDate!=null and workPlanWithBLOBs.beginDate!=''">
        and BEGIN_DATE &gt;= #{workPlanWithBLOBs.beginDate}
      </if>
      <if test="workPlanWithBLOBs.endDate!=null and workPlanWithBLOBs.endDate!=''">
        and END_DATE &lt;= #{workPlanWithBLOBs.endDate}
      </if>

      <if test="workPlanWithBLOBs.time==1">
        and
        (BEGIN_DATE &lt;= #{workPlanWithBLOBs.current} and END_DATE &gt;=#{workPlanWithBLOBs.current})
      </if>
      <if test="workPlanWithBLOBs.statusFlag==1">
        and (END_DATE &lt;= #{workPlanWithBLOBs.current} and publish='1' and END_DATE is not NULL)
      </if>
      <if test="workPlanWithBLOBs.statusFlag==2">
        and
        (
        publish='0'
        or
        (publish='1' and END_DATE &gt; #{workPlanWithBLOBs.current})
        or
        (publish='1' and END_DATE is NULL)
        or
        (publish='1' and END_DATE is NULL)
        or
        (SUSPEND_FLAG='1' and END_DATE &gt; #{workPlanWithBLOBs.current})
        or
        (SUSPEND_FLAG='1' and END_DATE is NULL)
        or
        (SUSPEND_FLAG='1' and END_DATE is NULL)
        )
      </if>
      <if test="workPlanWithBLOBs.type != null and workPlanWithBLOBs.type!=0 and workPlanWithBLOBs.type !=''" >
        and TYPE = #{workPlanWithBLOBs.type,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.toId != null and workPlanWithBLOBs.toId !=''" >
        and
        (TO_ID like concat(concat('%,'#{workPlanWithBLOBs.toId}),',%') or TO_ID like concat(#{workPlanWithBLOBs.toId},',%') OR TO_ID='ALL_DEPT')
      </if>
      <if test="workPlanWithBLOBs.creator != null and workPlanWithBLOBs.creator != ''" >
        and CREATOR = #{workPlanWithBLOBs.creator,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.createDate != null and workPlanWithBLOBs.createDate!=''" >
        and CREATE_DATE = #{workPlanWithBLOBs.createDate,jdbcType=DATE}
      </if>
      <if test="workPlanWithBLOBs.suspendFlag != null and workPlanWithBLOBs.suspendFlag !=''" >
        and SUSPEND_FLAG = #{workPlanWithBLOBs.suspendFlag,jdbcType=VARCHAR}
      </if>
      <if test="workPlanWithBLOBs.publish != null and workPlanWithBLOBs.publish !=''" >
        and PUBLISH = #{workPlanWithBLOBs.publish,jdbcType=CHAR}
      </if>
      <if test="workPlanWithBLOBs.smsFlag != null and workPlanWithBLOBs.smsFlag !=''" >
        and SMS_FLAG = #{workPlanWithBLOBs.smsFlag,jdbcType=CHAR}
      </if>
      <if test="workPlanWithBLOBs.content != null and workPlanWithBLOBs.content != ''" >
        and CONTENT = #{workPlanWithBLOBs.content,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.manager != null and workPlanWithBLOBs.manager !=''" >
        and (MANAGER like CONCAT(#{workPlanWithBLOBs.manager}) or MANAGER like CONCAT('%,',#{workPlanWithBLOBs.manager}))
      </if>
      <if test="workPlanWithBLOBs.participator != null and workPlanWithBLOBs.participator !=''" >
        and (PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.participator},',%') or PARTICIPATOR like concat(CONCAT('%,',#{workPlanWithBLOBs.participator}),',%'))
      </if>
      <if test="workPlanWithBLOBs.attachmentId != null and workPlanWithBLOBs.attachmentId != ''" >
        and ATTACHMENT_ID = #{workPlanWithBLOBs.attachmentId,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.attachmentName != null and workPlanWithBLOBs.attachmentName !=''" >
        and ATTACHMENT_NAME = #{workPlanWithBLOBs.attachmentName,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.attachmentComment != null and workPlanWithBLOBs.attachmentComment !=''" >
        and ATTACHMENT_COMMENT = #{workPlanWithBLOBs.attachmentComment,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.remark != null and workPlanWithBLOBs.remark != ''" >
        and REMARK = #{workPlanWithBLOBs.remark,jdbcType=LONGVARCHAR}
      </if>
      <if test="workPlanWithBLOBs.toPersonId != null and workPlanWithBLOBs.toPersonId !=''" >
        and (TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.toPersonId},',%') OR  TO_PERSON_ID like concat(CONCAT('%,',#{workPlanWithBLOBs.toPersonId}),',%'))
      </if>
      <if test="workPlanWithBLOBs.opinionLeader != null and workPlanWithBLOBs.opinionLeader != ''" >
        and (OPINION_LEADER like CONCAT(#{workPlanWithBLOBs.opinionLeader},',%') or OPINION_LEADER like concat(CONCAT('%,',#{workPlanWithBLOBs.opinionLeader}),',%'))
      </if>
      <if test="workPlanWithBLOBs.time !=null" >
        AND PUBLISH='1'
        and
        (
        TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
        or
        TO_PERSON_ID like concat(CONCAT('%,',#{workPlanWithBLOBs.currentUser}),',%')
        or
        TO_ID like concat((select DEPT_ID from "USER" WHERE UID=#{workPlanWithBLOBs.currentUser}),',%')
        or
        TO_ID like concat(concat('%,',(select DEPT_ID from "USER" WHERE UID=#{workPlanWithBLOBs.currentUser})),',%')
        OR
        TO_ID='ALL_DEPT'
        or
        PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
        or
        PARTICIPATOR like concat(CONCAT('%,',#{workPlanWithBLOBs.currentUser}),',%')
        )
      </if>
      <if test="workPlanWithBLOBs.time !=null and workPlanWithBLOBs.time !=0" >
        OR
        (
        (( PUBLISH='1' AND END_DATE IS NULL) OR ( PUBLISH='1' AND END_DATE is NULL))
        and
        (
        TO_PERSON_ID like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
        or
        TO_PERSON_ID like concat(CONCAT('%,',#{workPlanWithBLOBs.currentUser}),',%')
        or
        TO_ID like concat((select DEPT_ID from "USER" WHERE UID=#{workPlanWithBLOBs.currentUser}),',%')
        or
        TO_ID like concat(concat('%,',(select DEPT_ID from "USER" WHERE UID=#{workPlanWithBLOBs.currentUser})),',%')
        OR
        TO_ID='ALL_DEPT'
        or
        PARTICIPATOR like CONCAT(#{workPlanWithBLOBs.currentUser},',%')
        or
        PARTICIPATOR like concat(CONCAT('%,',#{workPlanWithBLOBs.currentUser}),',%')
        )
        )
      </if>
    </where>
  </select>
  <select id="selectWorkPlanTotalByCond" resultType="java.lang.Integer" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" >
    select count(*)
    from work_plan
    <where>
      <if test="name != null and name!=''" >
        and NAME = #{name,jdbcType=VARCHAR}
      </if>
      <if test="beginDate!=null and beginDate!=''">
        and BEGIN_DATE &gt;= #{beginDate}
      </if>
      <if test="endDate!=null and endDate!=''">
        and END_DATE &lt;= #{endDate}
      </if>
      <if test="time==1">
        and
          (BEGIN_DATE &lt;= #{current} and END_DATE &gt;=#{current})
      </if>
      <if test="statusFlag==1">
        and (END_DATE &lt;= #{current} and publish="1" and END_DATE != "0000-00-00")
      </if>
      <if test="statusFlag==2">
        and
        (
        publish="0"
        or
        (publish="1" and END_DATE &gt; #{current})
        or
        (publish="1" and END_DATE="0000-00-00")
        or
        (publish="1" and END_DATE is NULL)
        or
        (SUSPEND_FLAG="1" and END_DATE &gt; #{current})
        or
        (SUSPEND_FLAG="1" and END_DATE="0000-00-00")
        or
        (SUSPEND_FLAG="1" and END_DATE is NULL)
        )
      </if>
      <if test="type != null and type!=0 and type !=''" >
        and TYPE = #{type,jdbcType=VARCHAR}
      </if>
      <if test="toId != null and toId !=''" >
        and (TO_ID like concat('%,'#{toId},',%') or TO_ID like concat(#{toId},',%') OR TO_ID='ALL_DEPT')
      </if>
      <if test="creator != null and creator != ''" >
        and CREATOR = #{creator,jdbcType=VARCHAR}
      </if>
      <if test="createDate != null and createDate!=''" >
        and CREATE_DATE = #{createDate,jdbcType=DATE}
      </if>
      <if test="suspendFlag != null and suspendFlag !=''" >
        and SUSPEND_FLAG = #{suspendFlag,jdbcType=VARCHAR}
      </if>
      <if test="publish != null and publish !=''" >
        and PUBLISH = #{publish,jdbcType=CHAR}
      </if>
      <if test="smsFlag != null and smsFlag !=''" >
        and SMS_FLAG = #{smsFlag,jdbcType=CHAR}
      </if>
      <if test="content != null and content != ''" >
        and CONTENT = #{content,jdbcType=LONGVARCHAR}
      </if>
      <if test="manager != null and manager !=''" >
        and (MANAGER like CONCAT(#{manager}) or MANAGER like CONCAT('%,',#{manager}))
      </if>
      <if test="participator != null and participator !=''" >
        and (PARTICIPATOR like CONCAT(#{participator},',%') or PARTICIPATOR like CONCAT('%,',#{participator},',%'))
      </if>
      <if test="attachmentId != null and attachmentId != ''" >
        and ATTACHMENT_ID = #{attachmentId,jdbcType=LONGVARCHAR}
      </if>
      <if test="attachmentName != null and attachmentName !=''" >
        and ATTACHMENT_NAME = #{attachmentName,jdbcType=LONGVARCHAR}
      </if>
      <if test="attachmentComment != null and attachmentComment !=''" >
        and ATTACHMENT_COMMENT = #{attachmentComment,jdbcType=LONGVARCHAR}
      </if>
      <if test="remark != null and remark != ''" >
        and REMARK = #{remark,jdbcType=LONGVARCHAR}
      </if>
      <if test="toPersonId != null and toPersonId !=''" >
        and (TO_PERSON_ID like CONCAT(#{toPersonId},',%') OR  TO_PERSON_ID like CONCAT('%,',#{toPersonId},',%'))
      </if>
      <if test="opinionLeader != null and opinionLeader != ''" >
        and (OPINION_LEADER like CONCAT(#{opinionLeader},',%') or OPINION_LEADER like CONCAT('%,',#{opinionLeader},',%'))
      </if>
      <if test="time !=null" >
        AND PUBLISH="1"
        and
        (
          TO_PERSON_ID like CONCAT(#{currentUser},',%')
          or
          TO_PERSON_ID like CONCAT('%,',#{currentUser},',%')
          or
          TO_ID like concat((select DEPT_ID from user WHERE UID=#{currentUser}),',%')
          or
          TO_ID like concat('%,',(select DEPT_ID from user WHERE UID=#{currentUser}),',%')
          OR
          TO_ID='ALL_DEPT'
          or
          PARTICIPATOR like CONCAT(#{currentUser},',%')
          or
          PARTICIPATOR like CONCAT('%,',#{currentUser},',%')
        )
      </if>
      <if test="time!=null and time!=0" >
        OR
        (
          (( PUBLISH="1" AND END_DATE IS NULL) or ( PUBLISH="1" AND END_DATE='0000-00-00'))
          and
          (
            TO_PERSON_ID like CONCAT(#{currentUser},',%')
            or
            TO_PERSON_ID like CONCAT('%,',#{currentUser},',%')
            or
            TO_ID like concat((select DEPT_ID from user WHERE UID=#{currentUser}),',%')
            or
            TO_ID like concat('%,',(select DEPT_ID from user WHERE UID=#{currentUser}),',%')
            OR
            TO_ID='ALL_DEPT'
            or
            PARTICIPATOR like CONCAT(#{currentUser},',%')
            or
            PARTICIPATOR like CONCAT('%,',#{currentUser},',%')
          )
        )
      </if>
    </where>
  </select>


  <select id="selectWorkPlanTotalByCond" resultType="java.lang.Integer" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" databaseId="oracle">
    select count(*)
    from work_plan
    <where>
      <if test="name != null and name!=''" >
        and NAME = #{name,jdbcType=VARCHAR}
      </if>
      <if test="beginDate!=null and beginDate!=''">
        and BEGIN_DATE &gt;= #{beginDate}
      </if>
      <if test="endDate!=null and endDate!=''">
        and END_DATE &lt;= #{endDate}
      </if>
      <if test="time==1">
        and
        (BEGIN_DATE &lt;= #{current} and END_DATE &gt;=#{current})
      </if>
      <if test="statusFlag==1">
        and (END_DATE &lt;= #{current} and publish='1' and END_DATE is not NULL)
      </if>
      <if test="statusFlag==2">
        and
        (
        publish='0'
        or
        (publish='1' and END_DATE &gt; #{current})
        or
        (publish='1' and END_DATE=is NULL)
        or
        (publish='1' and END_DATE is NULL)
        or
        (SUSPEND_FLAG='1' and END_DATE &gt; #{current})
        or
        (SUSPEND_FLAG='1' and END_DATE=is NULL)
        or
        (SUSPEND_FLAG='1' and END_DATE is NULL)
        )
      </if>
      <if test="type != null and type!=0 and type !=''" >
        and TYPE = #{type,jdbcType=VARCHAR}
      </if>
      <if test="toId != null and toId !=''" >
        and (TO_ID like concat(concat('%,'#{toId}),',%') or TO_ID like concat(#{toId},',%') OR TO_ID='ALL_DEPT')
      </if>
      <if test="creator != null and creator != ''" >
        and CREATOR = #{creator,jdbcType=VARCHAR}
      </if>
      <if test="createDate != null and createDate!=''" >
        and CREATE_DATE = #{createDate,jdbcType=DATE}
      </if>
      <if test="suspendFlag != null and suspendFlag !=''" >
        and SUSPEND_FLAG = #{suspendFlag,jdbcType=VARCHAR}
      </if>
      <if test="publish != null and publish !=''" >
        and PUBLISH = #{publish,jdbcType=CHAR}
      </if>
      <if test="smsFlag != null and smsFlag !=''" >
        and SMS_FLAG = #{smsFlag,jdbcType=CHAR}
      </if>
      <if test="content != null and content != ''" >
        and CONTENT = #{content,jdbcType=LONGVARCHAR}
      </if>
      <if test="manager != null and manager !=''" >
        and (MANAGER like CONCAT(#{manager}) or MANAGER like CONCAT('%,',#{manager}))
      </if>
      <if test="participator != null and participator !=''" >
        and (PARTICIPATOR like CONCAT(#{participator},',%') or PARTICIPATOR like CONCAT(CONCAT('%,',#{participator}),',%'))
      </if>
      <if test="attachmentId != null and attachmentId != ''" >
        and ATTACHMENT_ID = #{attachmentId,jdbcType=LONGVARCHAR}
      </if>
      <if test="attachmentName != null and attachmentName !=''" >
        and ATTACHMENT_NAME = #{attachmentName,jdbcType=LONGVARCHAR}
      </if>
      <if test="attachmentComment != null and attachmentComment !=''" >
        and ATTACHMENT_COMMENT = #{attachmentComment,jdbcType=LONGVARCHAR}
      </if>
      <if test="remark != null and remark != ''" >
        and REMARK = #{remark,jdbcType=LONGVARCHAR}
      </if>
      <if test="toPersonId != null and toPersonId !=''" >
        and (TO_PERSON_ID like CONCAT(#{toPersonId},',%') OR  TO_PERSON_ID like CONCAT(CONCAT('%,',#{toPersonId}),',%'))
      </if>
      <if test="opinionLeader != null and opinionLeader != ''" >
        and (OPINION_LEADER like CONCAT(#{opinionLeader},',%') or OPINION_LEADER like CONCAT(CONCAT('%,',#{opinionLeader}),',%'))
      </if>
      <if test="time !=null" >
        AND PUBLISH='1'
        and
        (
        TO_PERSON_ID like CONCAT(#{currentUser},',%')
        or
        TO_PERSON_ID like CONCAT(CONCAT('%,',#{currentUser}),',%')
        or
        TO_ID like concat((select DEPT_ID from "USER" WHERE UID=#{currentUser}),',%')
        or
        TO_ID like concat(concat('%,',(select DEPT_ID from "USER" WHERE UID=#{currentUser})),',%')
        OR
        TO_ID='ALL_DEPT'
        or
        PARTICIPATOR like CONCAT(#{currentUser},',%')
        or
        PARTICIPATOR like CONCAT(CONCAT('%,',#{currentUser}),',%')
        )
      </if>
      <if test="time!=null and time!=0" >
        OR
        (
        (( PUBLISH='1'  AND END_DATE IS NULL) or ( PUBLISH='1' AND END_DATE is NULL))
        and
        (
        TO_PERSON_ID like CONCAT(#{currentUser},',%')
        or
        TO_PERSON_ID like CONCAT(CONCAT('%,',#{currentUser}),',%')
        or
        TO_ID like concat((select DEPT_ID from "USER" WHERE UID=#{currentUser}),',%')
        or
        TO_ID like CONCAT(concat('%,',(select DEPT_ID from "USER" WHERE UID=#{currentUser})),',%')
        OR
        TO_ID='ALL_DEPT'
        or
        PARTICIPATOR like CONCAT(#{currentUser},',%')
        or
        PARTICIPATOR like CONCAT(CONCAT('%,',#{currentUser}),',%')
        )
        )
      </if>
    </where>
  </select>

  <select id="selectWorkPlanTotalByCond" resultType="java.lang.Integer" parameterType="com.myoa.model.workPlan.WorkPlanWithBLOBs" databaseId="dm">
    select count(*)
    from work_plan
    <where>
      <if test="name != null and name!=''" >
        and NAME = #{name,jdbcType=VARCHAR}
      </if>
      <if test="beginDate!=null and beginDate!=''">
        and BEGIN_DATE &gt;= #{beginDate}
      </if>
      <if test="endDate!=null and endDate!=''">
        and END_DATE &lt;= #{endDate}
      </if>
      <if test="time==1">
        and
        (BEGIN_DATE &lt;= #{current} and END_DATE &gt;=#{current})
      </if>
      <if test="statusFlag==1">
        and (END_DATE &lt;= #{current} and publish='1' and END_DATE is not NULL)
      </if>
      <if test="statusFlag==2">
        and
        (
        publish='0'
        or
        (publish='1' and END_DATE &gt; #{current})
        or
        (publish='1' and END_DATE=is NULL)
        or
        (publish='1' and END_DATE is NULL)
        or
        (SUSPEND_FLAG='1' and END_DATE &gt; #{current})
        or
        (SUSPEND_FLAG='1' and END_DATE=is NULL)
        or
        (SUSPEND_FLAG='1' and END_DATE is NULL)
        )
      </if>
      <if test="type != null and type!=0 and type !=''" >
        and TYPE = #{type,jdbcType=VARCHAR}
      </if>
      <if test="toId != null and toId !=''" >
        and (TO_ID like concat(concat('%,'#{toId}),',%') or TO_ID like concat(#{toId},',%') OR TO_ID='ALL_DEPT')
      </if>
      <if test="creator != null and creator != ''" >
        and CREATOR = #{creator,jdbcType=VARCHAR}
      </if>
      <if test="createDate != null and createDate!=''" >
        and CREATE_DATE = #{createDate,jdbcType=DATE}
      </if>
      <if test="suspendFlag != null and suspendFlag !=''" >
        and SUSPEND_FLAG = #{suspendFlag,jdbcType=VARCHAR}
      </if>
      <if test="publish != null and publish !=''" >
        and PUBLISH = #{publish,jdbcType=CHAR}
      </if>
      <if test="smsFlag != null and smsFlag !=''" >
        and SMS_FLAG = #{smsFlag,jdbcType=CHAR}
      </if>
      <if test="content != null and content != ''" >
        and CONTENT = #{content,jdbcType=LONGVARCHAR}
      </if>
      <if test="manager != null and manager !=''" >
        and (MANAGER like CONCAT(#{manager}) or MANAGER like CONCAT('%,',#{manager}))
      </if>
      <if test="participator != null and participator !=''" >
        and (PARTICIPATOR like CONCAT(#{participator},',%') or PARTICIPATOR like CONCAT(CONCAT('%,',#{participator}),',%'))
      </if>
      <if test="attachmentId != null and attachmentId != ''" >
        and ATTACHMENT_ID = #{attachmentId,jdbcType=LONGVARCHAR}
      </if>
      <if test="attachmentName != null and attachmentName !=''" >
        and ATTACHMENT_NAME = #{attachmentName,jdbcType=LONGVARCHAR}
      </if>
      <if test="attachmentComment != null and attachmentComment !=''" >
        and ATTACHMENT_COMMENT = #{attachmentComment,jdbcType=LONGVARCHAR}
      </if>
      <if test="remark != null and remark != ''" >
        and REMARK = #{remark,jdbcType=LONGVARCHAR}
      </if>
      <if test="toPersonId != null and toPersonId !=''" >
        and (TO_PERSON_ID like CONCAT(#{toPersonId},',%') OR  TO_PERSON_ID like CONCAT(CONCAT('%,',#{toPersonId}),',%'))
      </if>
      <if test="opinionLeader != null and opinionLeader != ''" >
        and (OPINION_LEADER like CONCAT(#{opinionLeader},',%') or OPINION_LEADER like CONCAT(CONCAT('%,',#{opinionLeader}),',%'))
      </if>
      <if test="time !=null" >
        AND PUBLISH='1'
        and
        (
        TO_PERSON_ID like CONCAT(#{currentUser},',%')
        or
        TO_PERSON_ID like CONCAT(CONCAT('%,',#{currentUser}),',%')
        or
        TO_ID like concat((select DEPT_ID from "USER" WHERE UID=#{currentUser}),',%')
        or
        TO_ID like concat(concat('%,',(select DEPT_ID from "USER" WHERE UID=#{currentUser})),',%')
        OR
        TO_ID='ALL_DEPT'
        or
        PARTICIPATOR like CONCAT(#{currentUser},',%')
        or
        PARTICIPATOR like CONCAT(CONCAT('%,',#{currentUser}),',%')
        )
      </if>
      <if test="time!=null and time!=0" >
        OR
        (
        (( PUBLISH='1'  AND END_DATE IS NULL) or ( PUBLISH='1' AND END_DATE is NULL))
        and
        (
        TO_PERSON_ID like CONCAT(#{currentUser},',%')
        or
        TO_PERSON_ID like CONCAT(CONCAT('%,',#{currentUser}),',%')
        or
        TO_ID like concat((select DEPT_ID from "USER" WHERE UID=#{currentUser}),',%')
        or
        TO_ID like CONCAT(concat('%,',(select DEPT_ID from "USER" WHERE UID=#{currentUser})),',%')
        OR
        TO_ID='ALL_DEPT'
        or
        PARTICIPATOR like CONCAT(#{currentUser},',%')
        or
        PARTICIPATOR like CONCAT(CONCAT('%,',#{currentUser}),',%')
        )
        )
      </if>
    </where>
  </select>
  <delete id="delWorkPlanById" parameterType="java.lang.Integer" >
    delete from work_plan
    where PLAN_ID = #{planId,jdbcType=INTEGER}
  </delete>

  <update id="clearEndDateById" parameterType="java.lang.Integer">
    UPDATE work_plan set END_DATE=NULL  WHERE  PLAN_ID = #{planId,jdbcType=INTEGER}
  </update>

  <select id="selManAndPartCount" parameterType="map" resultType="java.lang.Integer">
    select count(*) from work_plan
    WHERE
    (
     MANAGER LIKE CONCAT(#{uId},',%') or MANAGER LIKE CONCAT('%,',#{uId},',%')
    or
     PARTICIPATOR LIKE CONCAT(#{uId},',%') or PARTICIPATOR LIKE CONCAT('%,',#{uId},',%')
     )
     and PLAN_ID=#{planId}

  </select>

  <select id="selManAndPartCount" parameterType="map" resultType="java.lang.Integer" databaseId="oracle">
    select count(*) from work_plan
    WHERE
    (
    MANAGER LIKE CONCAT(#{uId},',%') or MANAGER LIKE CONCAT(CONCAT('%,',#{uId}),',%')
    or
    PARTICIPATOR LIKE CONCAT(#{uId},',%') or PARTICIPATOR LIKE CONCAT(CONCAT('%,',#{uId}),',%')
    )
    and PLAN_ID=#{planId}

  </select>

  <select id="selManAndPartCount" parameterType="map" resultType="java.lang.Integer" databaseId="dm">
    select count(*) from work_plan
    WHERE
    (
    MANAGER LIKE CONCAT(#{uId},',%') or MANAGER LIKE CONCAT(CONCAT('%,',#{uId}),',%')
    or
    PARTICIPATOR LIKE CONCAT(#{uId},',%') or PARTICIPATOR LIKE CONCAT(CONCAT('%,',#{uId}),',%')
    )
    and PLAN_ID=#{planId}

  </select>

</mapper>